(self.webpackChunkfire_chat=self.webpackChunkfire_chat||[]).push([[179],{8255:et=>{function Te(V){return Promise.resolve().then(()=>{var m=new Error("Cannot find module '"+V+"'");throw m.code="MODULE_NOT_FOUND",m})}Te.keys=()=>[],Te.resolve=Te,Te.id=8255,et.exports=Te},3018:(et,Te,V)=>{"use strict";V.d(Te,{deG:()=>Rl,tb:()=>uD,AFp:()=>oD,ip1:()=>Bw,CZH:()=>$f,hGG:()=>bx,z2F:()=>kg,sBO:()=>BA,Sil:()=>jo,_Vd:()=>Nu,EJc:()=>$w,SBq:()=>Vo,qLn:()=>_e,vpe:()=>Dn,gxx:()=>Sc,tBr:()=>zr,XFs:()=>Re,OlP:()=>cn,zs3:()=>Sn,ZZ4:()=>Ny,aQg:()=>Pf,soG:()=>Og,YKP:()=>aC,v3s:()=>wD,h0i:()=>Kc,PXZ:()=>ox,R0b:()=>Ss,FiY:()=>Ki,Lbi:()=>zS,g9A:()=>aD,Qsj:()=>Ty,FYo:()=>zc,JOm:()=>wa,Tiy:()=>FE,q3G:()=>vn,tp0:()=>Ro,EAV:()=>DD,Rgc:()=>Mu,dDg:()=>l_,DyG:()=>fa,q4F:()=>Ay,GfV:()=>LE,s_b:()=>ky,ifc:()=>fn,eFA:()=>wi,G48:()=>KR,Gpc:()=>de,X6Q:()=>mD,_c5:()=>yx,VLi:()=>ix,c2e:()=>a_,zSh:()=>nd,wAp:()=>ze,vHH:()=>he,EiD:()=>ym,mCW:()=>Oo,qzn:()=>va,JVY:()=>No,pB0:()=>B_,eBb:()=>Lh,L6k:()=>Vl,LAX:()=>um,cg1:()=>pE,Tjo:()=>r0,kL8:()=>xf,yhl:()=>_c,dqk:()=>j,sIi:()=>$p,CqO:()=>Yp,QGY:()=>gf,F4k:()=>ay,RDi:()=>Vi,AaK:()=>K,z3N:()=>Yi,qOj:()=>Ln,TTD:()=>_l,_Bn:()=>qc,xp6:()=>tb,uIk:()=>ry,ekj:()=>fy,Suo:()=>ZC,Xpm:()=>Ho,lG2:()=>Zf,Yz7:()=>rn,cJS:()=>bi,oAB:()=>$a,Yjl:()=>Wu,Y36:()=>md,_UZ:()=>kc,qZA:()=>Xe,TgZ:()=>oy,n5z:()=>xo,Ikx:()=>my,LFG:()=>Pn,$8M:()=>xl,NdJ:()=>uy,CRH:()=>YC,oxw:()=>In,Q6J:()=>yd,VKq:()=>$d,WLB:()=>Zy,iGM:()=>zC,LSH:()=>Hl,kYT:()=>Rs,YNc:()=>Zb,_uU:()=>zn,Oqu:()=>Cf});var m=V(9765),ee=V(5319),F=V(7574),ce=V(6682),te=V(2441);var le=V(1307);function W(){return new m.xQ}function L(r){for(let i in r)if(r[i]===L)return i;throw Error("Could not find renamed property on target object.")}function Q(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function K(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(K).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function re(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const we=L({__forward_ref__:L});function de(r){return r.__forward_ref__=de,r.toString=function(){return K(this())},r}function q(r){return ye(r)?r():r}function ye(r){return"function"==typeof r&&r.hasOwnProperty(we)&&r.__forward_ref__===de}class he extends Error{constructor(i,o){super(function(r,i){return`${r?`NG0${r}: `:""}${i}`}(i,o)),this.code=i}}function Le(r){return"string"==typeof r?r:null==r?"":String(r)}function gt(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Le(r)}function oe(r,i){const o=i?` in ${i}`:"";throw new he("201",`No provider for ${gt(r)} found${o}`)}function dn(r,i){null==r&&function(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function rn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function bi(r){return{providers:r.providers||[],imports:r.imports||[]}}function br(r){return oi(r,wn)||oi(r,lo)}function oi(r,i){return r.hasOwnProperty(i)?r[i]:null}function ai(r){return r&&(r.hasOwnProperty(lr)||r.hasOwnProperty(ot))?r[lr]:null}const wn=L({\u0275prov:L}),lr=L({\u0275inj:L}),lo=L({ngInjectableDef:L}),ot=L({ngInjectorDef:L});var Re=(()=>((Re=Re||{})[Re.Default=0]="Default",Re[Re.Host=1]="Host",Re[Re.Self=2]="Self",Re[Re.SkipSelf=4]="SkipSelf",Re[Re.Optional=8]="Optional",Re))();let jt;function hn(r){const i=jt;return jt=r,i}function Pt(r,i,o){const u=br(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Re.Optional?null:void 0!==i?i:void oe(K(r),"Injector")}function Qe(r){return{toString:r}.toString()}var mn=(()=>((mn=mn||{})[mn.OnPush=0]="OnPush",mn[mn.Default=1]="Default",mn))(),fn=(()=>((fn=fn||{})[fn.Emulated=0]="Emulated",fn[fn.None=2]="None",fn[fn.ShadowDom=3]="ShadowDom",fn))();const Ir="undefined"!=typeof globalThis&&globalThis,ho="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j=Ir||"undefined"!=typeof global&&global||ho||$,qe={},He=[],kt=L({\u0275cmp:L}),Jt=L({\u0275dir:L}),Zt=L({\u0275pipe:L}),Ur=L({\u0275mod:L}),Dt=L({\u0275loc:L}),Xt=L({\u0275fac:L}),Yn=L({__NG_ELEMENT_ID__:L});let Gu=0;function Ho(r){return Qe(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===mn.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||He,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||fn.Emulated,id:"c",styles:r.styles||He,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,d=r.features,g=r.pipes;return u.id+=Gu++,u.inputs=Ci(r.inputs,o),u.outputs=Ci(r.outputs),d&&d.forEach(y=>y(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(ja):null,u.pipeDefs=g?()=>("function"==typeof g?g():g).map(qu):null,u})}function ja(r){return Qn(r)||function(r){return r[Jt]||null}(r)}function qu(r){return function(r){return r[Zt]||null}(r)}const xs={};function $a(r){return Qe(()=>{const i={type:r.type,bootstrap:r.bootstrap||He,declarations:r.declarations||He,imports:r.imports||He,exports:r.exports||He,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(xs[r.id]=r.type),i})}function Rs(r,i){return Qe(()=>{const o=Bn(r,!0);o.declarations=i.declarations||He,o.imports=i.imports||He,o.exports=i.exports||He})}function Ci(r,i){if(null==r)return qe;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),o[c]=u,i&&(i[c]=d)}return o}const Zf=Ho;function Wu(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Qn(r){return r[kt]||null}function Bn(r,i){const o=r[Ur]||null;if(!o&&!0===i)throw new Error(`Type ${K(r)} does not have '\u0275mod' property.`);return o}function jr(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ht(r){return Array.isArray(r)&&!0===r[1]}function Wa(r){return 0!=(8&r.flags)}function zu(r){return 2==(2&r.flags)}function $r(r){return 1==(1&r.flags)}function Ti(r){return null!==r.template}function gl(r){return 0!=(512&r[2])}function Cr(r,i){return r.hasOwnProperty(Xt)?r[Xt]:null}class Ai{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function _l(){return _o}function _o(r){return r.type.prototype.ngOnChanges&&(r.setInput=oh),Si}function Si(){const r=vo(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===qe)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function oh(r,i,o,u){const c=vo(r)||function(r,i){return r[Yf]=i}(r,{previous:qe,current:null}),d=c.current||(c.current={}),g=c.previous,y=this.declaredInputs[o],w=g[y];d[y]=new Ai(w&&w.currentValue,i,g===qe),r[u]=i}_l.ngInherit=!0;const Yf="__ngSimpleChanges__";function vo(r){return r[Yf]||null}let ks;function Vi(r){ks=r}function sn(r){return!!r.listen}const Jo={createRenderer:(r,i)=>void 0!==ks?ks:"undefined"!=typeof document?document:void 0};function bt(r){for(;Array.isArray(r);)r=r[0];return r}function Za(r,i){return bt(i[r])}function hr(r,i){return bt(i[r.index])}function Ui(r,i){return r.data[i]}function Hn(r,i){const o=i[r];return jr(o)?o:o[0]}function bo(r){return 4==(4&r[2])}function Xo(r){return 128==(128&r[2])}function Fs(r,i){return null==i?null:r[i]}function ea(r){r[18]=0}function ec(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const ut={lFrame:ic(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function vl(){return ut.bindingsEnabled}function Se(){return ut.lFrame.lView}function Tt(){return ut.lFrame.tView}function yn(){let r=dh();for(;null!==r&&64===r.type;)r=r.parent;return r}function dh(){return ut.lFrame.currentTNode}function ui(r,i){const o=ut.lFrame;o.currentTNode=r,o.isParent=i}function Qa(){return ut.lFrame.isParent}function ra(){return ut.isInCheckNoChangesMode}function Bi(r){ut.isInCheckNoChangesMode=r}function Dr(){const r=ut.lFrame;let i=r.bindingRootIndex;return-1===i&&(i=r.bindingRootIndex=r.tView.bindingStartIndex),i}function ji(){return ut.lFrame.bindingIndex++}function El(r,i){const o=ut.lFrame;o.bindingIndex=o.bindingRootIndex=r,ia(i)}function ia(r){ut.lFrame.currentDirectiveIndex=r}function Co(){return ut.lFrame.currentQueryIndex}function wl(r){ut.lFrame.currentQueryIndex=r}function Jf(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function ph(r,i,o){if(o&Re.SkipSelf){let c=i,d=r;for(;!(c=c.parent,null!==c||o&Re.Host||(c=Jf(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;i=c,r=d}const u=ut.lFrame=gh();return u.currentTNode=i,u.lView=r,!0}function Do(r){const i=gh(),o=r[1];ut.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function gh(){const r=ut.lFrame,i=null===r?null:r.child;return null===i?ic(r):i}function ic(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function mh(){const r=ut.lFrame;return ut.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const N_=mh;function Xf(){const r=mh();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Hr(){return ut.lFrame.selectedIndex}function $i(r){ut.lFrame.selectedIndex=r}function on(){const r=ut.lFrame;return Ui(r.tView,r.selectedIndex)}function sa(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const d=r.data[o].type.prototype,{ngAfterContentInit:g,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:T}=d;g&&(r.contentHooks||(r.contentHooks=[])).push(-o,g),y&&((r.contentHooks||(r.contentHooks=[])).push(o,y),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,y)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=T&&(r.destroyHooks||(r.destroyHooks=[])).push(o,T)}}function oa(r,i,o){Dl(r,i,3,o)}function Cl(r,i,o,u){(3&r[2])===o&&Dl(r,i,o,u)}function To(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function Dl(r,i,o,u){const d=null!=u?u:-1,g=i.length-1;let y=0;for(let w=void 0!==u?65535&r[18]:0;w<g;w++)if("number"==typeof i[w+1]){if(y=i[w],null!=u&&y>=u)break}else i[w]<0&&(r[18]+=65536),(y<d||-1==d)&&(Tl(r,o,i,w),r[18]=(4294901760&r[18])+w+2),w++}function Tl(r,i,o,u){const c=o[u]<0,d=o[u+1],y=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{d.call(y)}finally{}}}else try{d.call(y)}finally{}}class eu{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function an(r,i,o){const u=sn(r);let c=0;for(;c<o.length;){const d=o[c];if("number"==typeof d){if(0!==d)break;c++;const g=o[c++],y=o[c++],w=o[c++];u?r.setAttribute(i,y,w,g):i.setAttributeNS(g,y,w)}else{const g=d,y=o[++c];oc(g)?u&&r.setProperty(i,g,y):u?r.setAttribute(i,g,y):i.setAttribute(g,y),c++}}return c}function nu(r){return 3===r||4===r||6===r}function oc(r){return 64===r.charCodeAt(0)}function ru(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||ac(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function ac(r,i,o,u,c){let d=0,g=r.length;if(-1===i)g=-1;else for(;d<r.length;){const y=r[d++];if("number"==typeof y){if(y===i){g=-1;break}if(y>i){g=d-1;break}}}for(;d<r.length;){const y=r[d];if("number"==typeof y)break;if(y===o){if(null===u)return void(null!==c&&(r[d+1]=c));if(u===r[d+1])return void(r[d+2]=c)}d++,null!==u&&d++,null!==c&&d++}-1!==g&&(r.splice(g,0,i),d=g+1),r.splice(d++,0,o),null!==u&&r.splice(d++,0,u),null!==c&&r.splice(d++,0,c)}function uc(r){return-1!==r}function iu(r){return 32767&r}function su(r,i){let o=function(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let ou=!0;function aa(r){const i=ou;return ou=r,i}let bn=0;function rt(r,i){const o=Ao(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Gr(u.data,r),Gr(i,null),Gr(u.blueprint,null));const c=er(r,i),d=r.injectorIndex;if(uc(c)){const g=iu(c),y=su(c,i),w=y[1].data;for(let C=0;C<8;C++)i[d+C]=y[g+C]|w[g+C]}return i[d+8]=c,d}function Gr(r,i){r.push(0,0,0,0,0,0,0,0,i)}function Ao(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function er(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const d=c[1],g=d.type;if(u=2===g?d.declTNode:1===g?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function vs(r,i,o){!function(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Yn)&&(u=o[Yn]),null==u&&(u=o[Yn]=bn++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function Hi(r,i,o){if(o&Re.Optional)return r;oe(i,"NodeInjector")}function ca(r,i,o,u){if(o&Re.Optional&&void 0===u&&(u=null),0==(o&(Re.Self|Re.Host))){const c=r[9],d=hn(void 0);try{return c?c.get(i,u,o&Re.Optional):Pt(i,u,o&Re.Optional)}finally{hn(d)}}return Hi(u,i,o)}function Eh(r,i,o,u=Re.Default,c){if(null!==r){const d=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(Yn)?r[Yn]:void 0;return"number"==typeof i?i>=0?255&i:qr:i}(o);if("function"==typeof d){if(!ph(i,r,u))return u&Re.Host?Hi(c,o,u):ca(i,o,u,c);try{const g=d(u);if(null!=g||u&Re.Optional)return g;oe(o)}finally{N_()}}else if("number"==typeof d){let g=null,y=Ao(r,i),w=-1,C=u&Re.Host?i[16][6]:null;for((-1===y||u&Re.SkipSelf)&&(w=-1===y?er(r,i):i[y+8],-1!==w&&dc(u,!1)?(g=i[1],y=iu(w),i=su(w,i)):y=-1);-1!==y;){const T=i[1];if(bh(d,y,T.data)){const R=Sl(y,i,o,g,u,C);if(R!==wh)return R}w=i[y+8],-1!==w&&dc(u,i[1].data[y+8]===C)&&bh(d,y,i)?(g=T,y=iu(w),i=su(w,i)):y=-1}}}return ca(i,o,u,c)}const wh={};function qr(){return new Bs(yn(),Se())}function Sl(r,i,o,u,c,d){const g=i[1],y=g.data[r+8],T=la(y,g,o,null==u?zu(y)&&ou:u!=g&&0!=(3&y.type),c&Re.Host&&d===y);return null!==T?So(i,g,T,y):wh}function la(r,i,o,u,c){const d=r.providerIndexes,g=i.data,y=1048575&d,w=r.directiveStart,T=d>>20,O=c?y+T:r.directiveEnd;for(let B=u?y:y+T;B<O;B++){const H=g[B];if(B<w&&o===H||B>=w&&H.type===o)return B}if(c){const B=g[w];if(B&&Ti(B)&&B.type===o)return w}return null}function So(r,i,o,u){let c=r[o];const d=i.data;if(function(r){return r instanceof eu}(c)){const g=c;g.resolving&&function(r,i){throw new he("200",`Circular dependency in DI detected for ${r}`)}(gt(d[o]));const y=aa(g.canSeeViewProviders);g.resolving=!0;const w=g.injectImpl?hn(g.injectImpl):null;ph(r,u,Re.Default);try{c=r[o]=g.factory(void 0,d,r,u),i.firstCreatePass&&o>=u.directiveStart&&function(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:d}=i.type.prototype;if(u){const g=_o(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,g),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,g)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),d&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,d))}(o,d[o],i)}finally{null!==w&&hn(w),aa(y),g.resolving=!1,N_()}}return c}function bh(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function dc(r,i){return!(r&Re.Self||r&Re.Host&&i)}class Bs{constructor(i,o){this._tNode=i,this._lView=o}get(i,o){return Eh(this._tNode,this._lView,i,void 0,o)}}function xo(r){return Qe(()=>{const i=r.prototype.constructor,o=i[Xt]||uu(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const d=c[Xt]||uu(c);if(d&&d!==o)return d;c=Object.getPrototypeOf(c)}return d=>new d})}function uu(r){return ye(r)?()=>{const i=uu(q(r));return i&&i()}:Cr(r)}function xl(r){return function(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const d=o[c];if(nu(d))break;if(0===d)c+=2;else if("number"==typeof d)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(d===i)return o[c+1];c+=2}}}return null}(yn(),r)}const pr="__parameters__";function xi(r,i,o){return Qe(()=>{const u=function(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...d){if(this instanceof c)return u.apply(this,d),this;const g=new c(...d);return y.annotation=g,y;function y(w,C,T){const R=w.hasOwnProperty(pr)?w[pr]:Object.defineProperty(w,pr,{value:[]})[pr];for(;R.length<=T;)R.push(null);return(R[T]=R[T]||[]).push(g),w}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class cn{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=rn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rl=new cn("AnalyzeForEntryComponents"),fa=Function;function li(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),li(u,i)):i!==r&&i.push(u)}return i}function di(r,i){r.forEach(o=>Array.isArray(o)?di(o,i):i(o))}function qi(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Wi(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function I(r,i,o){let u=x(r,i);return u>=0?r[1|u]=o:(u=~u,function(r,i,o,u){let c=r.length;if(c==i)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function D(r,i){const o=x(r,i);if(o>=0)return r[1|o]}function x(r,i){return function(r,i,o){let u=0,c=r.length>>o;for(;c!==u;){const d=u+(c-u>>1),g=r[d<<o];if(i===g)return d<<o;g>i?c=d:u=d+1}return~(c<<o)}(r,i,1)}const Ni={},ma="__NG_DI_FLAG__",fi="ngTempTokenPath",$s=/\n/gm,gc="__source",Ah=L({provide:String,useValue:L});let ws;function ya(r){const i=ws;return ws=r,i}function ip(r,i=Re.Default){if(void 0===ws)throw new Error("inject() must be called from an injection context");return null===ws?Pt(r,void 0,i):ws.get(r,i&Re.Optional?null:void 0,i)}function Pn(r,i=Re.Default){return(jt||ip)(q(r),i)}function Sr(r){const i=[];for(let o=0;o<r.length;o++){const u=q(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,d=Re.Default;for(let g=0;g<u.length;g++){const y=u[g],w=xh(y);"number"==typeof w?-1===w?c=y.token:d|=w:c=y}i.push(Pn(c,d))}else i.push(Pn(u))}return i}function mc(r,i){return r[ma]=i,r.prototype[ma]=i,r}function xh(r){return r[ma]}function sp(r,i,o,u){const c=r[fi];throw i[gc]&&c.unshift(i[gc]),r.message=function(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=K(i);if(Array.isArray(i))c=i.map(K).join(" -> ");else if("object"==typeof i){let d=[];for(let g in i)if(i.hasOwnProperty(g)){let y=i[g];d.push(g+":"+("string"==typeof y?JSON.stringify(y):K(y)))}c=`{${d.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace($s,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[fi]=null,r}const zr=mc(xi("Inject",r=>({token:r})),-1),Ki=mc(xi("Optional"),8),Ro=mc(xi("SkipSelf"),4);let Hs;function bs(r){var i;return(null===(i=function(){if(void 0===Hs&&(Hs=null,j.trustedTypes))try{Hs=j.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return Hs}())||void 0===i?void 0:i.createHTML(r))||r}class Gs{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class L_ extends Gs{getTypeName(){return"HTML"}}class N0 extends Gs{getTypeName(){return"Style"}}class hu extends Gs{getTypeName(){return"Script"}}class V_ extends Gs{getTypeName(){return"URL"}}class U_ extends Gs{getTypeName(){return"ResourceURL"}}function Yi(r){return r instanceof Gs?r.changingThisBreaksApplicationSecurity:r}function va(r,i){const o=_c(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}function _c(r){return r instanceof Gs&&r.getTypeName()||null}function No(r){return new L_(r)}function Vl(r){return new N0(r)}function Lh(r){return new hu(r)}function um(r){return new V_(r)}function B_(r){return new U_(r)}class cm{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const o=(new window.DOMParser).parseFromString(bs(i),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(i):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class j_{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const u=this.inertDocument.createElement("body");o.appendChild(u)}}getInertBodyElement(i){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=bs(i),o;const u=this.inertDocument.createElement("body");return u.innerHTML=bs(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(i){const o=i.attributes;for(let c=o.length-1;0<c;c--){const g=o.item(c).name;("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&i.removeAttribute(g)}let u=i.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const lm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Oo(r){return(r=String(r)).match(lm)||r.match(lp)?r:"unsafe:"+r}function qs(r){const i={};for(const o of r.split(","))i[o]=!0;return i}function Ws(...r){const i={};for(const o of r)for(const u in o)o.hasOwnProperty(u)&&(i[u]=!0);return i}const Ul=qs("area,br,col,hr,img,wbr"),hm=qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fm=qs("rp,rt"),Bl=Ws(Ul,Ws(hm,qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ws(fm,qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ws(fm,hm)),jl=qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jh=qs("srcset"),gm=Ws(jl,jh,qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$h=qs("script,style,template");class $_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let o=i.firstChild,u=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?u=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,u&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let c=this.checkClobberedElement(o,o.nextSibling);if(c){o=c;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(i){const o=i.nodeName.toLowerCase();if(!Bl.hasOwnProperty(o))return this.sanitizedSomething=!0,!$h.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const u=i.attributes;for(let c=0;c<u.length;c++){const d=u.item(c),g=d.name,y=g.toLowerCase();if(!gm.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=d.value;jl[y]&&(w=Oo(w)),jh[y]&&(r=w,w=(r=String(r)).split(",").map(i=>Oo(i.trim())).join(", ")),this.buf.push(" ",g,'="',mm(w),'"')}var r;return this.buf.push(">"),!0}endElement(i){const o=i.nodeName.toLowerCase();Bl.hasOwnProperty(o)&&!Ul.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(i){this.buf.push(mm(i))}checkClobberedElement(i,o){if(o&&(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return o}}const fp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hh=/([^\#-~ |!])/g;function mm(r){return r.replace(/&/g,"&amp;").replace(fp,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(Hh,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vc;function ym(r,i){let o=null;try{vc=vc||function(r){const i=new j_(r);return function(){try{return!!(new window.DOMParser).parseFromString(bs(""),"text/html")}catch(r){return!1}}()?new cm(i):i}(r);let u=i?String(i):"";o=vc.getInertBodyElement(u);let c=5,d=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=d,d=o.innerHTML,o=vc.getInertBodyElement(u)}while(u!==d);return bs((new $_).sanitizeChildren($l(o)||o))}finally{if(o){const u=$l(o)||o;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function $l(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var vn=(()=>((vn=vn||{})[vn.NONE=0]="NONE",vn[vn.HTML=1]="HTML",vn[vn.STYLE=2]="STYLE",vn[vn.SCRIPT=3]="SCRIPT",vn[vn.URL=4]="URL",vn[vn.RESOURCE_URL=5]="RESOURCE_URL",vn))();function Hl(r){const i=function(){const r=Se();return r&&r[12]}();return i?i.sanitize(vn.URL,r)||"":va(r,"URL")?Yi(r):Oo(Le(r))}const wm="__ngContext__";function Rr(r,i){r[wm]=i}function tn(r){const i=function(r){return r[wm]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function A(r){return r.ngOriginalError}function z(r,...i){r.error(...i)}class _e{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=this._findContext(i),c=(r=i)&&r.ngErrorLogger||z;var r;c(this._console,"ERROR",i),o&&c(this._console,"ORIGINAL ERROR",o),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(i){return i?i.ngDebugContext||this._findContext(A(i)):null}_findOriginalError(i){let o=i&&A(i);for(;o&&A(o);)o=A(o);return o||null}}const bp=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Xi(r){return r instanceof Function?r():r}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function q_(r,i){return undefined(r,i)}function Kh(r){const i=r[3];return Ht(i)?i[3]:i}function Am(r){return z_(r[13])}function Sm(r){return z_(r[4])}function z_(r){for(;null!==r&&!Ht(r);)r=r[4];return r}function Zh(r,i,o,u,c){if(null!=u){let d,g=!1;Ht(u)?d=u:jr(u)&&(g=!0,u=u[0]);const y=bt(u);0===r&&null!==o?null==c?H0(i,o,y):ir(i,o,y,c||null,!0):1===r&&null!==o?ir(i,o,y,c||null,!0):2===r?function(r,i,o){const u=Yh(r,i);u&&function(r,i,o,u){sn(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,y,g):3===r&&i.destroyNode(y),null!=d&&function(r,i,o,u,c){const d=o[7];d!==bt(o)&&Zh(i,r,u,d,c);for(let y=10;y<o.length;y++){const w=o[y];Jh(w[1],w,r,i,u,d)}}(i,r,d,o,c)}}function Cp(r,i,o){return sn(r)?r.createElement(i,o):null===o?r.createElement(i):r.createElementNS(o,i)}function Wl(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,ec(c,-1)),o.splice(u,1)}function Y_(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&Wl(c,u),i>0&&(r[o-1][4]=u[4]);const d=Wi(r,10+i);!function(r,i){Jh(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const g=d[19];null!==g&&g.detachView(d[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function U0(r,i){if(!(256&i[2])){const o=i[11];sn(o)&&o.destroyNode&&Jh(r,i,o,3,null,null),function(r){let i=r[13];if(!i)return Q_(r[1],r);for(;i;){let o=null;if(jr(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)jr(i)&&Q_(i[1],i),i=i[3];null===i&&(i=r),jr(i)&&Q_(i[1],i),o=i&&i[4]}i=o}}(i)}}function Q_(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof eu)){const d=o[u+1];if(Array.isArray(d))for(let g=0;g<d.length;g+=2){const y=c[d[g]],w=d[g+1];try{w.call(y)}finally{}}else try{d.call(c)}finally{}}}}(r,i),function(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let d=0;d<o.length-1;d+=2)if("string"==typeof o[d]){const g=o[d+1],y="function"==typeof g?g(i):bt(i[g]),w=u[c=o[d+2]],C=o[d+3];"boolean"==typeof C?y.removeEventListener(o[d],w,C):C>=0?u[c=C]():u[c=-C].unsubscribe(),d+=2}else{const g=u[c=o[d+1]];o[d].call(g)}if(null!==u){for(let d=c+1;d<u.length;d++)u[d]();i[7]=null}}(r,i),1===i[1].type&&sn(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&Ht(i[3])){o!==i[3]&&Wl(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function j0(r,i,o){return function(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===fn.None||c===fn.Emulated)return null}return hr(u,o)}(r,i.parent,o)}function ir(r,i,o,u,c){sn(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function H0(r,i,o){sn(r)?r.appendChild(i,o):i.appendChild(o)}function Dp(r,i,o,u,c){null!==u?ir(r,i,o,u,c):H0(r,i,o)}function Yh(r,i){return sn(r)?r.parentNode(i):i.parentNode}let X_=function(r,i,o){return 40&r.type?hr(r,o):null};function xm(r,i,o,u){const c=j0(r,u,i),d=i[11],y=function(r,i,o){return X_(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let w=0;w<o.length;w++)Dp(d,c,o[w],y,!1);else Dp(d,c,o,y,!1)}function Tp(r,i){if(null!==i){const o=i.type;if(3&o)return hr(i,r);if(4&o)return Ap(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return Tp(r,u);{const c=r[i.index];return Ht(c)?Ap(-1,c):bt(c)}}if(32&o)return q_(i,r)()||bt(r[i.index]);{const u=nv(r,i);return null!==u?Array.isArray(u)?u[0]:Tp(Kh(r[16]),u):Tp(r,i.next)}}return null}function nv(r,i){return null!==i?r[16][6].projection[i.projection]:null}function Ap(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return Tp(u,c)}return i[7]}function mu(r,i,o,u,c,d,g){for(;null!=o;){const y=u[o.index],w=o.type;if(g&&0===i&&(y&&Rr(bt(y),u),o.flags|=4),64!=(64&o.flags))if(8&w)mu(r,i,o.child,u,c,d,!1),Zh(i,r,c,y,d);else if(32&w){const C=q_(o,u);let T;for(;T=C();)Zh(i,r,c,T,d);Zh(i,r,c,y,d)}else 16&w?W0(r,i,u,o,c,d):Zh(i,r,c,y,d);o=g?o.projectionNext:o.next}}function Jh(r,i,o,u,c,d){mu(o,u,r.firstChild,i,c,d,!1)}function W0(r,i,o,u,c,d){const g=o[16],w=g[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)Zh(i,r,c,w[C],d);else mu(r,i,w,g[3],c,d,!0)}function K0(r,i,o){sn(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function rv(r,i,o){sn(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function Z0(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const d=i.length;if(c+d===u||r.charCodeAt(c+d)<=32)return c}o=c+1}}const Y0="ng-template";function vT(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==Z0(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function Q0(r){return 4===r.type&&r.value!==Y0}function iv(r,i,o){return i===(4!==r.type||o?r.value:Y0)}function ET(r,i,o){let u=4;const c=r.attrs||[],d=function(r){for(let i=0;i<r.length;i++)if(nu(r[i]))return i;return r.length}(c);let g=!1;for(let y=0;y<i.length;y++){const w=i[y];if("number"!=typeof w){if(!g)if(4&u){if(u=2|1&u,""!==w&&!iv(r,w,o)||""===w&&1===i.length){if(ko(u))return!1;g=!0}}else{const C=8&u?w:i[++y];if(8&u&&null!==r.attrs){if(!vT(r.attrs,C,o)){if(ko(u))return!1;g=!0}continue}const R=J0(8&u?"class":w,c,Q0(r),o);if(-1===R){if(ko(u))return!1;g=!0;continue}if(""!==C){let O;O=R>d?"":c[R+1].toLowerCase();const B=8&u?O:null;if(B&&-1!==Z0(B,C,0)||2&u&&C!==O){if(ko(u))return!1;g=!0}}}}else{if(!g&&!ko(u)&&!ko(w))return!1;if(g&&ko(w))continue;g=!1,u=w|1&u}}return ko(u)||g}function ko(r){return 0==(1&r)}function J0(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let d=!1;for(;c<i.length;){const g=i[c];if(g===r)return c;if(3===g||6===g)d=!0;else{if(1===g||2===g){let y=i[++c];for(;"string"==typeof y;)y=i[++c];continue}if(4===g)break;if(0===g){c+=4;continue}}c+=d?1:2}return-1}return function(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function X0(r,i,o=!1){for(let u=0;u<i.length;u++)if(ET(r,i[u],o))return!0;return!1}function eb(r,i){return r?":not("+i.trim()+")":i}function gi(r){let i=r[0],o=1,u=2,c="",d=!1;for(;o<r.length;){let g=r[o];if("string"==typeof g)if(2&u){const y=r[++o];c+="["+g+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?c+="."+g:4&u&&(c+=" "+g);else""!==c&&!ko(g)&&(i+=eb(d,c),c=""),u=g,d=d||!ko(u);o++}return""!==c&&(i+=eb(d,c)),i}const Et={};function tb(r){nb(Tt(),Se(),Hr()+r,ra())}function nb(r,i,o,u){if(!u)if(3==(3&i[2])){const d=r.preOrderCheckHooks;null!==d&&oa(i,d,o)}else{const d=r.preOrderHooks;null!==d&&Cl(i,d,0,o)}$i(o)}function Rm(r,i){return r<<17|i<<2}function ba(r){return r>>17&32767}function yu(r){return 2|r}function zs(r){return(131068&r)>>2}function Ia(r,i){return-131069&r|i<<2}function ov(r){return 1|r}function fv(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],d=o[u+1];if(-1!==d){const g=r.data[d];wl(c),g.contentQueries(2,i[d],d)}}}function Yl(r,i,o,u,c,d,g,y,w,C){const T=i.blueprint.slice();return T[0]=c,T[2]=140|u,ea(T),T[3]=T[15]=r,T[8]=o,T[10]=g||r&&r[10],T[11]=y||r&&r[11],T[12]=w||r&&r[12]||null,T[9]=C||r&&r[9]||null,T[6]=d,T[16]=2==i.type?r[16]:T,T}function Tc(r,i,o,u,c){let d=r.data[i];if(null===d)d=function(r,i,o,u,c){const d=dh(),g=Qa(),w=r.data[i]=function(r,i,o,u,c,d){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,g?d:d&&d.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=w),null!==d&&(g?null==d.child&&null!==w.parent&&(d.child=w):null===d.next&&(d.next=w)),w}(r,i,o,u,c),ut.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=o,d.value=u,d.attrs=c;const g=function(){const r=ut.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();d.injectorIndex=null===g?-1:g.injectorIndex}return ui(d,!0),d}function ef(r,i,o,u){if(0===o)return-1;const c=i.length;for(let d=0;d<o;d++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function Ql(r,i,o){Do(i);try{const u=r.viewQuery;null!==u&&nf(1,u,o);const c=r.template;null!==c&&lb(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&fv(r,i),r.staticViewQueries&&nf(2,r.viewQuery,o);const d=r.components;null!==d&&function(r,i){for(let o=0;o<i.length;o++)wb(r,i[o])}(i,d)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Xf()}}function Jl(r,i,o,u){const c=i[2];if(256==(256&c))return;Do(i);const d=ra();try{ea(i),function(r){ut.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&lb(r,i,o,2,u);const g=3==(3&c);if(!d)if(g){const C=r.preOrderCheckHooks;null!==C&&oa(i,C,null)}else{const C=r.preOrderHooks;null!==C&&Cl(i,C,0,null),To(i,0)}if(function(r){for(let i=Am(r);null!==i;i=Sm(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],d=c[3];0==(1024&c[2])&&ec(d,1),c[2]|=1024}}}(i),function(r){for(let i=Am(r);null!==i;i=Sm(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Xo(u)&&Jl(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&fv(r,i),!d)if(g){const C=r.contentCheckHooks;null!==C&&oa(i,C)}else{const C=r.contentHooks;null!==C&&Cl(i,C,1),To(i,1)}!function(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)$i(~c);else{const d=c,g=o[++u],y=o[++u];El(g,d),y(2,i[d])}}}finally{$i(-1)}}(r,i);const y=r.components;null!==y&&function(r,i){for(let o=0;o<i.length;o++)Mp(r,i[o])}(i,y);const w=r.viewQuery;if(null!==w&&nf(2,w,u),!d)if(g){const C=r.viewCheckHooks;null!==C&&oa(i,C)}else{const C=r.viewHooks;null!==C&&Cl(i,C,2),To(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),d||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,ec(i[3],-1))}finally{Xf()}}function MT(r,i,o,u){const c=i[10],d=!ra(),g=bo(i);try{d&&!g&&c.begin&&c.begin(),g&&Ql(r,i,u),Jl(r,i,o,u)}finally{d&&!g&&c.end&&c.end()}}function lb(r,i,o,u,c){const d=Hr(),g=2&u;try{$i(-1),g&&i.length>20&&nb(r,i,20,ra()),o(u,c)}finally{$i(d)}}function Xl(r,i,o){!vl()||(function(r,i,o,u){const c=o.directiveStart,d=o.directiveEnd;r.firstCreatePass||rt(o,i),Rr(u,i);const g=o.initialInputs;for(let y=c;y<d;y++){const w=r.data[y],C=Ti(w);C&&VT(i,o,w);const T=So(i,r,y,o);Rr(T,i),null!==g&&UT(0,y-c,T,w,0,g),C&&(Hn(o.index,i)[8]=T)}}(r,i,o,hr(o,i)),128==(128&o.flags)&&function(r,i,o){const u=o.directiveStart,c=o.directiveEnd,g=o.index,y=ut.lFrame.currentDirectiveIndex;try{$i(g);for(let w=u;w<c;w++){const C=r.data[w],T=i[w];ia(w),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&_b(C,T)}}finally{$i(-1),ia(y)}}(r,i,o))}function mv(r,i,o=hr){const u=i.localNames;if(null!==u){let c=i.index+1;for(let d=0;d<u.length;d+=2){const g=u[d+1],y=-1===g?o(i,r):r[g];r[c++]=y}}}function tf(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=km(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function km(r,i,o,u,c,d,g,y,w,C){const T=20+u,R=T+c,O=function(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:Et);return o}(T,R),B="function"==typeof C?C():C;return O[1]={type:r,blueprint:O,template:o,queries:null,viewQuery:y,declTNode:i,data:O.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof g?g():g,firstChild:null,schemas:w,consts:B,incompleteFirstPass:!1}}function Lm(r,i,o,u){const c=Cv(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&yi(r).push(u,c.length-1))}function Vm(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function Is(r,i,o,u,c,d,g,y){const w=hr(i,o);let T,C=i.inputs;!y&&null!=C&&(T=C[u])?(Pp(r,o,T,u,c),zu(i)&&function(r,i){const o=Hn(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=g?g(c,i.value||"",u):c,sn(d)?d.setProperty(w,u,c):oc(u)||(w.setProperty?w.setProperty(u,c):w[u]=c))}function Np(r,i,o,u){let c=!1;if(vl()){const d=function(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let d=0;d<u.length;d++){const g=u[d];X0(o,g.selectors,!1)&&(c||(c=[]),vs(rt(o,i),r,g.type),Ti(g)?(wv(r,o),c.unshift(g)):c.push(g))}return c}(r,i,o),g=null===u?null:{"":-1};if(null!==d){c=!0,Bm(o,r.data.length,d.length);for(let T=0;T<d.length;T++){const R=d[T];R.providersResolver&&R.providersResolver(R)}let y=!1,w=!1,C=ef(r,i,d.length,null);for(let T=0;T<d.length;T++){const R=d[T];o.mergedAttrs=ru(o.mergedAttrs,R.hostAttrs),jm(r,o,i,C,R),LT(C,R,g),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const O=R.type.prototype;!y&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),y=!0),!w&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),C++}!function(r,i){const u=i.directiveEnd,c=r.data,d=i.attrs,g=[];let y=null,w=null;for(let C=i.directiveStart;C<u;C++){const T=c[C],R=T.inputs,O=null===d||Q0(i)?null:Hm(R,d);g.push(O),y=Vm(R,C,y),w=Vm(T.outputs,C,w)}null!==y&&(y.hasOwnProperty("class")&&(i.flags|=16),y.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=g,i.inputs=y,i.outputs=w}(r,o)}g&&function(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const d=o[i[c+1]];if(null==d)throw new he("301",`Export of name '${i[c+1]}' not found!`);u.push(i[c],d)}}}(o,u,g)}return o.mergedAttrs=ru(o.mergedAttrs,o.attrs),c}function yr(r,i,o,u,c,d){const g=d.hostBindings;if(g){let y=r.hostBindingOpCodes;null===y&&(y=r.hostBindingOpCodes=[]);const w=~i.index;(function(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(y)!=w&&y.push(w),y.push(u,c,g)}}function _b(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function wv(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function LT(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;Ti(i)&&(o[""]=r)}}function Bm(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function jm(r,i,o,u,c){r.data[u]=c;const d=c.factory||(c.factory=Cr(c.type)),g=new eu(d,Ti(c),null);r.blueprint[u]=g,o[u]=g,yr(r,i,0,u,ef(r,o,c.hostVars,Et),c)}function VT(r,i,o){const u=hr(i,r),c=tf(o),d=r[10],g=ed(r,Yl(r,c,null,o.onPush?64:16,u,i,d,d.createRenderer(u,o),null,null));r[i.index]=g}function Ks(r,i,o,u,c,d){const g=hr(r,i);!function(r,i,o,u,c,d,g){if(null==d)sn(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const y=null==g?Le(d):g(d,u||"",c);sn(r)?r.setAttribute(i,c,y,o):o?i.setAttributeNS(o,c,y):i.setAttribute(c,y)}}(i[11],g,d,r.value,o,u,c)}function UT(r,i,o,u,c,d){const g=d[i];if(null!==g){const y=u.setInput;for(let w=0;w<g.length;){const C=g[w++],T=g[w++],R=g[w++];null!==y?u.setInput(o,R,C,T):o[T]=R}}}function Hm(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function Gm(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function Mp(r,i){const o=Hn(i,r);if(Xo(o)){const u=o[1];80&o[2]?Jl(u,o,u.template,o[8]):o[5]>0&&qm(o)}}function qm(r){for(let u=Am(r);null!==u;u=Sm(u))for(let c=10;c<u.length;c++){const d=u[c];if(1024&d[2]){const g=d[1];Jl(g,d,g.template,d[8])}else d[5]>0&&qm(d)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=Hn(o[u],r);Xo(c)&&c[5]>0&&qm(c)}}function wb(r,i){const o=Hn(i,r),u=o[1];(function(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),Ql(u,o,o[8])}function ed(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function bv(r){for(;r;){r[2]|=64;const i=Kh(r);if(gl(r)&&!i)return r;r=i}return null}function Iv(r,i,o){const u=i[10];u.begin&&u.begin();try{Jl(r,i,r.template,o)}catch(c){throw rf(i,c),c}finally{u.end&&u.end()}}function Ib(r){!function(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=tn(o),c=u[1];MT(c,u,c.template,o)}}(r[8])}function nf(r,i,o){wl(0),i(r,o)}const Op=(()=>Promise.resolve(null))();function Cv(r){return r[7]||(r[7]=[])}function yi(r){return r.cleanup||(r.cleanup=[])}function rf(r,i){const o=r[9],u=o?o.get(_e,null):null;u&&u.handleError(i)}function Pp(r,i,o,u,c){for(let d=0;d<o.length;){const g=o[d++],y=o[d++],w=i[g],C=r.data[g];null!==C.setInput?C.setInput(w,c,u,y):w[y]=c}}function Ca(r,i,o){const u=Za(i,r);!function(r,i,o){sn(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function sf(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,d=0;if(null!==i)for(let g=0;g<i.length;g++){const y=i[g];"number"==typeof y?d=y:1==d?c=re(c,y):2==d&&(u=re(u,y+": "+i[++g]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const Sc=new cn("INJECTOR",-1);class zm{get(i,o=Ni){if(o===Ni){const u=new Error(`NullInjectorError: No provider for ${K(i)}!`);throw u.name="NullInjectorError",u}return o}}const nd=new cn("Set Injector scope."),xc={},kp={};let Km;function Ab(){return void 0===Km&&(Km=new zm),Km}function Fp(r,i=null,o=null,u){return new Av(r,o,i||Ab(),u)}class Av{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];o&&di(o,y=>this.processProvider(y,i,o)),di([i],y=>this.processInjectorType(y,[],d)),this.records.set(Sc,Da(void 0,this));const g=this.records.get(nd);this.scope=null!=g?g.value:null,this.source=c||("object"==typeof i?null:K(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Ni,u=Re.Default){this.assertNotDestroyed();const c=ya(this),d=hn(void 0);try{if(!(u&Re.SkipSelf)){let y=this.records.get(i);if(void 0===y){const w=("function"==typeof(r=i)||"object"==typeof r&&r instanceof cn)&&br(i);y=w&&this.injectableDefInScope(w)?Da(Zm(i),xc):null,this.records.set(i,y)}if(null!=y)return this.hydrate(i,y)}return(u&Re.Self?Ab():this.parent).get(i,o=u&Re.Optional&&o===Ni?null:o)}catch(g){if("NullInjectorError"===g.name){if((g[fi]=g[fi]||[]).unshift(K(i)),c)throw g;return sp(g,i,"R3InjectorError",this.source)}throw g}finally{hn(d),ya(c)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(K(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,o,u){if(!(i=q(i)))return!1;let c=ai(i);const d=null==c&&i.ngModule||void 0,g=void 0===d?i:d,y=-1!==u.indexOf(g);if(void 0!==d&&(c=ai(d)),null==c)return!1;if(null!=c.imports&&!y){let T;u.push(g);try{di(c.imports,R=>{this.processInjectorType(R,o,u)&&(void 0===T&&(T=[]),T.push(R))})}finally{}if(void 0!==T)for(let R=0;R<T.length;R++){const{ngModule:O,providers:B}=T[R];di(B,H=>this.processProvider(H,O,B||He))}}this.injectorDefTypes.add(g);const w=Cr(g)||(()=>new g);this.records.set(g,Da(w,xc));const C=c.providers;if(null!=C&&!y){const T=i;di(C,R=>this.processProvider(R,T,C))}return void 0!==d&&void 0!==i.providers}processProvider(i,o,u){let c=Zs(i=q(i))?i:q(i&&i.provide);const d=Sv(r=i)?Da(void 0,r.useValue):Da(Rb(r),xc);var r;if(Zs(i)||!0!==i.multi)this.records.get(c);else{let g=this.records.get(c);g||(g=Da(void 0,xc,!0),g.factory=()=>Sr(g.multi),this.records.set(c,g)),c=i,g.multi.push(i)}this.records.set(c,d)}hydrate(i,o){return o.value===xc&&(o.value=kp,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(r=o.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var r}injectableDefInScope(i){if(!i.providedIn)return!1;const o=q(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Zm(r){const i=br(r),o=null!==i?i.factory:Cr(r);if(null!==o)return o;if(r instanceof cn)throw new Error(`Token ${K(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const i=r.length;if(i>0){const u=function(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?");throw new Error(`Can't resolve all parameters for ${K(r)}: (${u.join(", ")}).`)}const o=function(r){const i=r&&(r[wn]||r[lo]);if(i){const o=function(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Error("unreachable")}function Rb(r,i,o){let u;if(Zs(r)){const c=q(r);return Cr(c)||Zm(c)}if(Sv(r))u=()=>q(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Sr(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))u=()=>Pn(q(r.useExisting));else{const c=q(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return Cr(c)||Zm(c);u=()=>new c(...Sr(r.deps))}return u}function Da(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function Sv(r){return null!==r&&"object"==typeof r&&Ah in r}function Zs(r){return"function"==typeof r}const Nv=function(r,i,o){return function(r,i=null,o=null,u){const c=Fp(r,i,o,u);return c._resolveInjectorDefTypes(),c}({name:o},i,r,o)};let Sn=(()=>{class r{static create(o,u){return Array.isArray(o)?Nv(o,u,""):Nv(o.providers,o.parent,o.name||"")}}return r.THROW_IF_NOT_FOUND=Ni,r.NULL=new zm,r.\u0275prov=rn({token:r,providedIn:"any",factory:()=>Pn(Sc)}),r.__NG_ELEMENT_ID__=-1,r})();function jp(r,i){sa(tn(r)[1],yn())}function Ln(r){let i=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let c;if(Ti(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");c=i.\u0275dir}if(c){if(o){u.push(c);const g=r;g.inputs=Lv(r.inputs),g.declaredInputs=Lv(r.declaredInputs),g.outputs=Lv(r.outputs);const y=c.hostBindings;y&&YT(r,y);const w=c.viewQuery,C=c.contentQueries;if(w&&KT(r,w),C&&ZT(r,C),Q(r.inputs,c.inputs),Q(r.declaredInputs,c.declaredInputs),Q(r.outputs,c.outputs),Ti(c)&&c.data.animation){const T=r.data;T.animation=(T.animation||[]).concat(c.data.animation)}}const d=c.features;if(d)for(let g=0;g<d.length;g++){const y=d[g];y&&y.ngInherit&&y(r),y===Ln&&(o=!1)}}i=Object.getPrototypeOf(i)}!function(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=ru(c.hostAttrs,o=ru(o,c.hostAttrs))}}(u)}function Lv(r){return r===qe?{}:r===He?[]:r}function KT(r,i){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function ZT(r,i){const o=r.contentQueries;r.contentQueries=o?(u,c,d)=>{i(u,c,d),o(u,c,d)}:i}function YT(r,i){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let id=null;function sd(){if(!id){const r=j.Symbol;if(r&&r.iterator)id=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(id=u)}}}return id}function $p(r){return!!ny(r)&&(Array.isArray(r)||!(r instanceof Map)&&sd()in r)}function ny(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Js(r,i,o){return r[i]=o}function Yr(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function ry(r,i,o,u){const c=Se();return Yr(c,ji(),i)&&(Tt(),Ks(on(),c,r,i,o,u)),ry}function Zb(r,i,o,u,c,d,g,y){const w=Se(),C=Tt(),T=r+20,R=C.firstCreatePass?function(r,i,o,u,c,d,g,y,w){const C=i.consts,T=Tc(i,r,4,g||null,Fs(C,y));Np(i,o,T,Fs(C,w)),sa(i,T);const R=T.tViews=km(2,T,u,c,d,i.directiveRegistry,i.pipeRegistry,null,i.schemas,C);return null!==i.queries&&(i.queries.template(i,T),R.queries=i.queries.embeddedTView(T)),T}(T,C,w,i,o,u,c,d,g):C.data[T];ui(R,!1);const O=w[11].createComment("");xm(C,w,O,R),Rr(O,w),ed(w,w[T]=Gm(O,w,O,R)),$r(R)&&Xl(C,w,R),null!=g&&mv(w,R,y)}function md(r,i=Re.Default){const o=Se();return null===o?Pn(r,i):Eh(yn(),o,q(r),i)}function yd(r,i,o){const u=Se();return Yr(u,ji(),i)&&Is(Tt(),on(),u,r,i,u[11],o,!1),yd}function Iu(r,i,o,u,c){const g=c?"class":"style";Pp(r,o,i.inputs[g],g,u)}function oy(r,i,o,u){const c=Se(),d=Tt(),g=20+r,y=c[11],w=c[g]=Cp(y,i,ut.lFrame.currentNamespace),C=d.firstCreatePass?function(r,i,o,u,c,d,g){const y=i.consts,C=Tc(i,r,2,c,Fs(y,d));return Np(i,o,C,Fs(y,g)),null!==C.attrs&&sf(C,C.attrs,!1),null!==C.mergedAttrs&&sf(C,C.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,C),C}(g,d,c,0,i,o,u):d.data[g];ui(C,!0);const T=C.mergedAttrs;null!==T&&an(y,w,T);const R=C.classes;null!==R&&rv(y,w,R);const O=C.styles;null!==O&&K0(y,w,O),64!=(64&C.flags)&&xm(d,c,w,C),0===ut.lFrame.elementDepthCount&&Rr(w,c),ut.lFrame.elementDepthCount++,$r(C)&&(Xl(d,c,C),function(r,i,o){if(Wa(i)){const c=i.directiveEnd;for(let d=i.directiveStart;d<c;d++){const g=r.data[d];g.contentQueries&&g.contentQueries(1,o[d],d)}}}(d,C,c)),null!==u&&mv(c,C)}function Xe(){let r=yn();Qa()?ut.lFrame.isParent=!1:(r=r.parent,ui(r,!1));const i=r;ut.lFrame.elementDepthCount--;const o=Tt();o.firstCreatePass&&(sa(o,r),Wa(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(i)&&Iu(o,i,Se(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(i)&&Iu(o,i,Se(),i.stylesWithoutHost,!1)}function kc(r,i,o,u){oy(r,i,o,u),Xe()}function gf(r){return!!r&&"function"==typeof r.then}function ay(r){return!!r&&"function"==typeof r.subscribe}const Yp=ay;function uy(r,i,o,u){const c=Se(),d=Tt(),g=yn();return function(r,i,o,u,c,d,g,y){const w=$r(u),T=r.firstCreatePass&&yi(r),R=i[8],O=Cv(i);let B=!0;if(3&u.type||y){const X=hr(u,i),ke=y?y(X):X,Ie=O.length,nt=y?ht=>y(bt(ht[u.index])):u.index;if(sn(o)){let ht=null;if(!y&&w&&(ht=function(r,i,o,u){const c=r.cleanup;if(null!=c)for(let d=0;d<c.length-1;d+=2){const g=c[d];if(g===o&&c[d+1]===u){const y=i[7],w=c[d+2];return y.length>w?y[w]:null}"string"==typeof g&&(d+=2)}return null}(r,i,c,u.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=d,ht.__ngLastListenerFn__=d,B=!1;else{d=ly(u,i,R,d,!1);const Mt=o.listen(ke,c,d);O.push(d,Mt),T&&T.push(c,nt,Ie,Ie+1)}}else d=ly(u,i,R,d,!0),ke.addEventListener(c,d,g),O.push(d),T&&T.push(c,nt,Ie,g)}else d=ly(u,i,R,d,!1);const H=u.outputs;let ae;if(B&&null!==H&&(ae=H[c])){const X=ae.length;if(X)for(let ke=0;ke<X;ke+=2){const wr=i[ae[ke]][ae[ke+1]].subscribe(d),us=O.length;O.push(d,wr),T&&T.push(c,u.index,us,-(us+1))}}}(d,c,c[11],g,r,i,!!o,u),uy}function ei(r,i,o,u){try{return!1!==o(u)}catch(c){return rf(r,c),!1}}function ly(r,i,o,u,c){return function d(g){if(g===Function)return u;const y=2&r.flags?Hn(r.index,i):i;0==(32&i[2])&&bv(y);let w=ei(i,0,u,g),C=d.__ngNextListenerFn__;for(;C;)w=ei(i,0,C,g)&&w,C=C.__ngNextListenerFn__;return c&&!1===w&&(g.preventDefault(),g.returnValue=!1),w}}function In(r=1){return function(r){return(ut.lFrame.contextLView=function(r,i){for(;r>0;)i=i[15],r--;return i}(r,ut.lFrame.contextLView))[8]}(r)}function _f(r,i,o,u,c){const d=r[o+1],g=null===i;let y=u?ba(d):zs(d),w=!1;for(;0!==y&&(!1===w||g);){const T=r[y+1];dy(r[y],i)&&(w=!0,r[y+1]=u?ov(T):yu(T)),y=u?ba(T):zs(T)}w&&(r[o+1]=u?yu(d):ov(d))}function dy(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&x(r,i)>=0}function fy(r,i){return function(r,i,o,u){const c=Se(),d=Tt(),g=function(r){const i=ut.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}(2);d.firstUpdatePass&&function(r,i,o,u){const c=r.data;if(null===c[o+1]){const d=c[Hr()],g=function(r,i){return i>=r.expandoStartIndex}(r,o);(function(r,i){return 0!=(r.flags&(i?16:32))})(d,u)&&null===i&&!g&&(i=!1),i=function(r,i,o,u){const c=function(r){const i=ut.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let d=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=bf(o=Tu(null,r,i,o,u),i.attrs,u),d=null);else{const g=i.directiveStylingLast;if(-1===g||r[g]!==c)if(o=Tu(c,r,i,o,u),null===d){let w=function(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==zs(u))return r[ba(u)]}(r,i,u);void 0!==w&&Array.isArray(w)&&(w=Tu(null,r,i,w[1],u),w=bf(w,i.attrs,u),function(r,i,o,u){r[ba(o?i.classBindings:i.styleBindings)]=u}(r,i,u,w))}else d=function(r,i,o){let u;const c=i.directiveEnd;for(let d=1+i.directiveStylingLast;d<c;d++)u=bf(u,r[d].hostAttrs,o);return bf(u,i.attrs,o)}(r,i,u)}return void 0!==d&&(u?i.residualClasses=d:i.residualStyles=d),o}(c,d,i,u),function(r,i,o,u,c,d){let g=d?i.classBindings:i.styleBindings,y=ba(g),w=zs(g);r[u]=o;let T,C=!1;if(Array.isArray(o)){const R=o;T=R[1],(null===T||x(R,T)>0)&&(C=!0)}else T=o;if(c)if(0!==w){const O=ba(r[y+1]);r[u+1]=Rm(O,y),0!==O&&(r[O+1]=Ia(r[O+1],u)),r[y+1]=function(r,i){return 131071&r|i<<17}(r[y+1],u)}else r[u+1]=Rm(y,0),0!==y&&(r[y+1]=Ia(r[y+1],u)),y=u;else r[u+1]=Rm(w,0),0===y?y=u:r[w+1]=Ia(r[w+1],u),w=u;C&&(r[u+1]=yu(r[u+1])),_f(r,T,u,!0),_f(r,T,u,!1),function(r,i,o,u,c){const d=c?r.residualClasses:r.residualStyles;null!=d&&"string"==typeof i&&x(d,i)>=0&&(o[u+1]=ov(o[u+1]))}(i,T,r,u,d),g=Rm(y,w),d?i.classBindings=g:i.styleBindings=g}(c,d,i,o,g,u)}}(d,r,g,u),i!==Et&&Yr(c,g,i)&&function(r,i,o,u,c,d,g,y){if(!(3&i.type))return;const w=r.data,C=w[y+1];Fc(function(r){return 1==(1&r)}(C)?oE(w,i,o,c,zs(C),g):void 0)||(Fc(d)||function(r){return 2==(2&r)}(C)&&(d=oE(w,null,o,c,y,g)),function(r,i,o,u,c){const d=sn(r);if(i)c?d?r.addClass(o,u):o.classList.add(u):d?r.removeClass(o,u):o.classList.remove(u);else{let g=-1===u.indexOf("-")?void 0:wa.DashCase;if(null==c)d?r.removeStyle(o,u,g):o.style.removeProperty(u);else{const y="string"==typeof c&&c.endsWith("!important");y&&(c=c.slice(0,-10),g|=wa.Important),d?r.setStyle(o,u,c,g):o.style.setProperty(u,c,y?"important":"")}}}(u,g,Za(Hr(),o),c,d))}(d,d.data[Hr()],c,c[11],r,c[g+1]=function(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=K(Yi(r)))),r}(i,o),u,g)}(r,i,null,!0),fy}function Tu(r,i,o,u,c){let d=null;const g=o.directiveEnd;let y=o.directiveStylingLast;for(-1===y?y=o.directiveStart:y++;y<g&&(d=i[y],u=bf(u,d.hostAttrs,c),d!==r);)y++;return null!==r&&(o.directiveStylingLast=y),u}function bf(r,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let d=0;d<i.length;d++){const g=i[d];"number"==typeof g?c=g:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),I(r,g,!!o||i[++d]))}return void 0===r?null:r}function oE(r,i,o,u,c,d){const g=null===i;let y;for(;c>0;){const w=r[c],C=Array.isArray(w),T=C?w[1]:w,R=null===T;let O=o[c+1];O===Et&&(O=R?He:void 0);let B=R?D(O,u):T===u?O:void 0;if(C&&!Fc(B)&&(B=D(w,u)),Fc(B)&&(y=B,g))return y;const H=r[c+1];c=g?ba(H):zs(H)}if(null!==i){let w=d?i.residualClasses:i.residualStyles;null!=w&&(y=D(w,u))}return y}function Fc(r){return void 0!==r}function zn(r,i=""){const o=Se(),u=Tt(),c=r+20,d=u.firstCreatePass?Tc(u,c,1,i,null):u.data[c],g=o[c]=function(r,i){return sn(r)?r.createText(i):r.createTextNode(i)}(o[11],i);xm(u,o,g,d),ui(d,!1)}function Cf(r){return Df("",r,""),Cf}function Df(r,i,o){const u=Se(),c=function(r,i,o,u){return Yr(r,ji(),o)?i+Le(o)+u:Et}(u,r,i,o);return c!==Et&&Ca(u,Hr(),c),Df}function my(r,i,o){const u=Se();return Yr(u,ji(),i)&&Is(Tt(),on(),u,r,i,u[11],o,!0),my}const Lc=void 0;var SI=["en",[["a","p"],["AM","PM"],Lc],[["AM","PM"],Lc,Lc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lc,"{1} 'at' {0}",Lc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const i=Math.floor(Math.abs(r)),o=r.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let wd={};function pE(r){const i=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=gE(i);if(o)return o;const u=i.split("-")[0];if(o=gE(u),o)return o;if("en"===u)return SI;throw new Error(`Missing locale data for the locale "${r}".`)}function xf(r){return pE(r)[ze.PluralCase]}function gE(r){return r in wd||(wd[r]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[r]),wd[r]}var ze=(()=>((ze=ze||{})[ze.LocaleId=0]="LocaleId",ze[ze.DayPeriodsFormat=1]="DayPeriodsFormat",ze[ze.DayPeriodsStandalone=2]="DayPeriodsStandalone",ze[ze.DaysFormat=3]="DaysFormat",ze[ze.DaysStandalone=4]="DaysStandalone",ze[ze.MonthsFormat=5]="MonthsFormat",ze[ze.MonthsStandalone=6]="MonthsStandalone",ze[ze.Eras=7]="Eras",ze[ze.FirstDayOfWeek=8]="FirstDayOfWeek",ze[ze.WeekendRange=9]="WeekendRange",ze[ze.DateFormat=10]="DateFormat",ze[ze.TimeFormat=11]="TimeFormat",ze[ze.DateTimeFormat=12]="DateTimeFormat",ze[ze.NumberSymbols=13]="NumberSymbols",ze[ze.NumberFormats=14]="NumberFormats",ze[ze.CurrencyCode=15]="CurrencyCode",ze[ze.CurrencySymbol=16]="CurrencySymbol",ze[ze.CurrencyName=17]="CurrencyName",ze[ze.Currencies=18]="Currencies",ze[ze.Directionality=19]="Directionality",ze[ze.PluralCase=20]="PluralCase",ze[ze.ExtraData=21]="ExtraData",ze))();const Ds="en-US";let _E=Ds;function vE(r){dn(r,"Expected localeId to be defined"),"string"==typeof r&&(_E=r.toLowerCase().replace(/_/g,"-"))}function Oa(r,i,o,u,c){if(r=q(r),Array.isArray(r))for(let d=0;d<r.length;d++)Oa(r[d],i,o,u,c);else{const d=Tt(),g=Se();let y=Zs(r)?r:q(r.provide),w=Rb(r);const C=yn(),T=1048575&C.providerIndexes,R=C.directiveStart,O=C.providerIndexes>>20;if(Zs(r)||!r.multi){const B=new eu(w,c,md),H=Ru(y,i,c?T:T+O,R);-1===H?(vs(rt(C,g),d,y),Hc(d,r,i.length),i.push(y),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),o.push(B),g.push(B)):(o[H]=B,g[H]=B)}else{const B=Ru(y,i,T+O,R),H=Ru(y,i,T,T+O),ae=B>=0&&o[B],X=H>=0&&o[H];if(c&&!X||!c&&!ae){vs(rt(C,g),d,y);const ke=function(r,i,o,u,c){const d=new eu(r,o,md);return d.multi=[],d.index=i,d.componentProviders=0,RE(d,c,u&&!o),d}(c?Of:RA,o.length,c,u,w);!c&&X&&(o[H].providerFactory=ke),Hc(d,r,i.length,0),i.push(y),C.directiveStart++,C.directiveEnd++,c&&(C.providerIndexes+=1048576),o.push(ke),g.push(ke)}else Hc(d,r,B>-1?B:H,RE(o[c?H:B],w,!c&&u));!c&&u&&X&&o[H].componentProviders++}}}function Hc(r,i,o,u){const c=Zs(i);if(c||function(r){return!!r.useClass}(i)){const g=(i.useClass||i).prototype.ngOnDestroy;if(g){const y=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const w=y.indexOf(o);-1===w?y.push(o,[u,g]):y[w+1].push(u,g)}else y.push(o,g)}}}function RE(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function Ru(r,i,o,u){for(let c=o;c<u;c++)if(i[c]===r)return c;return-1}function RA(r,i,o,u){return by(this.multi,[])}function Of(r,i,o,u){const c=this.multi;let d;if(this.providerFactory){const g=this.providerFactory.componentProviders,y=So(o,o[1],this.providerFactory.index,u);d=y.slice(0,g),by(c,d);for(let w=g;w<y.length;w++)d.push(y[w])}else d=[],by(c,d);return d}function by(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function qc(r,i=[]){return o=>{o.providersResolver=(u,c)=>function(r,i,o){const u=Tt();if(u.firstCreatePass){const c=Ti(r);Oa(o,u.data,u.blueprint,c,!0),Oa(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class ME{}const QI="ngComponent";class NA{resolveComponentFactory(i){throw function(r){const i=Error(`No component factory found for ${K(r)}. Did you add it to @NgModule.entryComponents?`);return i[QI]=r,i}(i)}}let Nu=(()=>{class r{}return r.NULL=new NA,r})();function Cy(...r){}function Ad(r,i){return new Vo(hr(r,i))}const OA=function(){return Ad(yn(),Se())};let Vo=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=OA,r})();function Dy(r){return r instanceof Vo?r.nativeElement:r}class zc{}let Ty=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>XI(),r})();const XI=function(){const r=Se(),o=Hn(yn().index,r);return function(r){return r[11]}(jr(o)?o:r)};let FE=(()=>{class r{}return r.\u0275prov=rn({token:r,providedIn:"root",factory:()=>null}),r})();class LE{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Ay=new LE("12.2.12");class Sy{constructor(){}supports(i){return $p(i)}create(i){return new FA(i)}}const PA=(r,i)=>i;class FA{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||PA}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,d=null;for(;o||u;){const g=!u||o&&o.currentIndex<xd(u,c,d)?o:u,y=xd(g,c,d),w=g.currentIndex;if(g===u)c--,u=u._nextRemoved;else if(o=o._next,null==g.previousIndex)c++;else{d||(d=[]);const C=y-c,T=w-c;if(C!=T){for(let O=0;O<C;O++){const B=O<d.length?d[O]:d[O]=0,H=B+O;T<=H&&H<C&&(d[O]=B+1)}d[g.previousIndex]=T-C}}y!==w&&i(g,y,w)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!$p(i))throw new Error(`Error trying to diff '${K(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,d,g,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let y=0;y<this.length;y++)d=i[y],g=this._trackByFn(y,d),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,d,g,y)),Object.is(o.item,d)||this._addIdentityChange(o,d)):(o=this._mismatch(o,d,g,y),u=!0),o=o._next}else c=0,function(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[sd()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,y=>{g=this._trackByFn(c,y),null!==o&&Object.is(o.trackById,g)?(u&&(o=this._verifyReinsertion(o,y,g,c)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,g,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let d;return null===i?d=this._itTail:(d=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,d,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,d,c)):i=this._addAfter(new tC(o,u),d,c),i}_verifyReinsertion(i,o,u,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==d?i=this._reinsertAfter(d,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,d=i._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new Sd),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sd),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class tC{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LA{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class Sd{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new LA,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xd(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class xy{constructor(){}supports(i){return i instanceof Map||ny(i)}create(){return new Ry}}class Ry{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ny(i)))throw new Error(`Error trying to diff '${K(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const d=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,d)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const d=c._prev,g=c._next;return d&&(d._next=g),g&&(g._prev=d),c._next=null,c._prev=null,c}const u=new nC(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class nC{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VE(){return new Ny([new Sy])}let Ny=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||VE()),deps:[[r,new Ro,new Ki]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(r){return r.name||typeof r}(o)}'`)}}return r.\u0275prov=rn({token:r,providedIn:"root",factory:VE}),r})();function rC(){return new Pf([new xy])}let Pf=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||rC()),deps:[[r,new Ro,new Ki]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(u)return u;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return r.\u0275prov=rn({token:r,providedIn:"root",factory:rC}),r})();function My(r,i,o,u,c=!1){for(;null!==o;){const d=i[o.index];if(null!==d&&u.push(bt(d)),Ht(d))for(let y=10;y<d.length;y++){const w=d[y],C=w[1].firstChild;null!==C&&My(w[1],w,C,u)}const g=o.type;if(8&g)My(r,i,o.child,u);else if(32&g){const y=q_(o,i);let w;for(;w=y();)u.push(w)}else if(16&g){const y=nv(i,o);if(Array.isArray(y))u.push(...y);else{const w=Kh(i[16]);My(w[1],w,y,u,!0)}}o=c?o.projectionNext:o.next}return u}class Rd{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return My(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Ht(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(Y_(i,u),Wi(o,u))}this._attachedToViewContainer=!1}U0(this._lView[1],this._lView)}onDestroy(i){Lm(this._lView[1],this._lView,null,i)}markForCheck(){bv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Iv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,i,o){Bi(!0);try{Iv(r,i,o)}finally{Bi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Jh(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class VA extends Rd{constructor(i){super(i),this._view=i}detectChanges(){Ib(this._view)}checkNoChanges(){!function(r){Bi(!0);try{Ib(r)}finally{Bi(!1)}}(this._view)}get context(){return null}}const UA=function(r){return function(r,i,o){if(zu(r)&&!o){const u=Hn(r.index,i);return new Rd(u,u)}return 47&r.type?new Rd(i[16],i):null}(yn(),Se(),16==(16&r))};let BA=(()=>{class r{}return r.__NG_ELEMENT_ID__=UA,r})();const HA=[new xy],jE=new Ny([new Sy]),iC=new Pf(HA),Oy=function(){return kf(yn(),Se())};let Mu=(()=>{class r{}return r.__NG_ELEMENT_ID__=Oy,r})();const Py=Mu,$E=class extends Py{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Yl(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(u[19]=d.createEmbeddedView(o)),Ql(o,u,i),new Rd(u)}};function kf(r,i){return 4&r.type?new $E(i,r,Ad(r,i)):null}class Kc{}class aC{}const qA=function(){return lC(yn(),Se())};let ky=(()=>{class r{}return r.__NG_ELEMENT_ID__=qA,r})();const Fy=ky,Ff=class extends Fy{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return Ad(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){const i=er(this._hostTNode,this._hostLView);if(uc(i)){const o=su(i,this._hostLView),u=iu(i);return new Bs(o[1].data[u+8],o)}return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=Ly(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,d){const g=u||this.parentInjector;if(!d&&null==i.ngModule&&g){const w=g.get(Kc,null);w&&(d=w)}const y=i.create(g,c,void 0,d);return this.insert(y.hostView,o),y}insert(i,o){const u=i._lView,c=u[1];if(Ht(u[3])){const T=this.indexOf(i);if(-1!==T)this.detach(T);else{const R=u[3],O=new Ff(R,R[6],R[3]);O.detach(O.indexOf(i))}}const d=this._adjustIndex(o),g=this._lContainer;!function(r,i,o,u){const c=10+u,d=o.length;u>0&&(o[c-1][4]=i),u<d-10?(i[4]=o[c],qi(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const g=i[17];null!==g&&o!==g&&function(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(g,i);const y=i[19];null!==y&&y.insertView(r),i[2]|=128}(c,u,g,d);const y=Ap(d,g),w=u[11],C=Yh(w,g[7]);return null!==C&&function(r,i,o,u,c,d){u[0]=c,u[6]=i,Jh(r,u,o,1,c,d)}(c,g[6],w,u,C,y),i.attachToViewContainerRef(),qi(Vy(g),d,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=Ly(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=Y_(this._lContainer,o);u&&(Wi(Vy(this._lContainer),o),U0(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=Y_(this._lContainer,o);return u&&null!=Wi(Vy(this._lContainer),o)?new Rd(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function Ly(r){return r[8]}function Vy(r){return r[8]||(r[8]=[])}function lC(r,i){let o;const u=i[r.index];if(Ht(u))o=u;else{let c;if(8&r.type)c=bt(u);else{const d=i[11];c=d.createComment("");const g=hr(r,i);ir(d,Yh(d,g),c,function(r,i){return sn(r)?r.nextSibling(i):i.nextSibling}(d,g),!1)}i[r.index]=o=Gm(u,i,c,r),ed(i,o)}return new Ff(o,r,i)}const Qc={};class Gy extends Nu{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Qn(i);return new PC(o,this.ngModule)}}function yw(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}const lS=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bp});class PC extends ME{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=i.selectors.map(gi).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return yw(this.componentDef.inputs)}get outputs(){return yw(this.componentDef.outputs)}create(i,o,u,c){const d=(c=c||this.ngModule)?function(r,i){return{get:(o,u,c)=>{const d=r.get(o,Qc,c);return d!==Qc||u===Qc?d:i.get(o,u,c)}}}(i,c.injector):i,g=d.get(zc,Jo),y=d.get(FE,null),w=g.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",T=u?function(r,i,o){if(sn(r))return r.selectRootElement(i,o===fn.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(w,u,this.componentDef.encapsulation):Cp(g.createRenderer(null,this.componentDef),C,function(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(C)),R=this.componentDef.onPush?576:528,O=function(r,i){return{components:[],scheduler:r||bp,clean:Op,playerHandler:i||null,flags:0}}(),B=km(0,null,null,1,0,null,null,null,null,null),H=Yl(null,B,O,R,null,null,g,w,y,d);let ae,X;Do(H);try{const ke=function(r,i,o,u,c,d){const g=o[1];o[20]=r;const w=Tc(g,20,2,"#host",null),C=w.mergedAttrs=i.hostAttrs;null!==C&&(sf(w,C,!0),null!==r&&(an(c,r,C),null!==w.classes&&rv(c,r,w.classes),null!==w.styles&&K0(c,r,w.styles)));const T=u.createRenderer(r,i),R=Yl(o,tf(i),null,i.onPush?64:16,o[20],w,u,T,d||null,null);return g.firstCreatePass&&(vs(rt(w,o),g,i.type),wv(g,w),Bm(w,o.length,1)),ed(o,R),o[20]=R}(T,this.componentDef,H,g,w);if(T)if(u)an(w,T,["ng-version",Ay.full]);else{const{attrs:Ie,classes:nt}=function(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let d=r[u];if("string"==typeof d)2===c?""!==d&&i.push(d,r[++u]):8===c&&o.push(d);else{if(!ko(c))break;c=d}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);Ie&&an(w,T,Ie),nt&&nt.length>0&&rv(w,T,nt.join(" "))}if(X=Ui(B,20),void 0!==o){const Ie=X.projection=[];for(let nt=0;nt<this.ngContentSelectors.length;nt++){const ht=o[nt];Ie.push(null!=ht?Array.from(ht):null)}}ae=function(r,i,o,u,c){const d=o[1],g=function(r,i,o){const u=yn();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),jm(r,u,i,ef(r,i,1,null),o));const c=So(i,r,u.directiveStart,u);Rr(c,i);const d=hr(u,i);return d&&Rr(d,i),c}(d,o,i);if(u.components.push(g),r[8]=g,c&&c.forEach(w=>w(g,i)),i.contentQueries){const w=yn();i.contentQueries(1,g,w.directiveStart)}const y=yn();return!d.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||($i(y.index),yr(o[1],y,0,y.directiveStart,y.directiveEnd,i),_b(i,g)),g}(ke,this.componentDef,H,O,[jp]),Ql(B,H,null)}finally{Xf()}return new _w(this.componentType,ae,Ad(X,H),H,X)}}class _w extends class{}{constructor(i,o,u,c,d){super(),this.location=u,this._rootLView=c,this._tNode=d,this.instance=o,this.hostView=this.changeDetectorRef=new VA(c),this.componentType=i}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const Jc=new Map;class Ew extends Kc{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gy(this);const u=Bn(i),c=i[Dt]||null;c&&vE(c),this._bootstrapComponents=Xi(u.bootstrap),this._r3Injector=Fp(i,o,[{provide:Kc,useValue:this},{provide:Nu,useValue:this.componentFactoryResolver}],K(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Sn.THROW_IF_NOT_FOUND,u=Re.Default){return i===Sn||i===Kc||i===Sc?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Ky extends aC{constructor(i){super(),this.moduleType=i,null!==Bn(i)&&function(r){const i=new Set;!function o(u){const c=Bn(u,!0),d=c.id;null!==d&&(function(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${K(i)} vs ${K(i.name)}`)}(d,Jc.get(d),u),Jc.set(d,u));const g=Xi(c.imports);for(const y of g)i.has(y)||(i.add(y),o(y))}(r)}(i)}create(i){return new Ew(this.moduleType,i)}}function $d(r,i,o,u){return function(r,i,o,u,c,d){const g=i+o;return Yr(r,g,c)?Js(r,g+1,d?u.call(d,c):u(c)):Cg(r,g+1)}(Se(),Dr(),r,i,o,u)}function Zy(r,i,o,u,c){return function(r,i,o,u,c,d,g){const y=i+o;return function(r,i,o,u){const c=Yr(r,i,o);return Yr(r,i+1,u)||c}(r,y,c,d)?Js(r,y+2,g?u.call(g,c,d):u(c,d)):Cg(r,y+2)}(Se(),Dr(),r,i,o,u,c)}function Cg(r,i){const o=r[i];return o===Et?void 0:o}function gn(r){return i=>{setTimeout(r,void 0,i)}}const Dn=class extends m.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,d,g;let y=i,w=o||(()=>null),C=u;if(i&&"object"==typeof i){const R=i;y=null===(c=R.next)||void 0===c?void 0:c.bind(R),w=null===(d=R.error)||void 0===d?void 0:d.bind(R),C=null===(g=R.complete)||void 0===g?void 0:g.bind(R)}this.__isAsync&&(w=gn(w),y&&(y=gn(y)),C&&(C=gn(C)));const T=super.subscribe({next:y,error:w,complete:C});return i instanceof ee.w&&i.add(T),T}};function Pa(){return this._results[sd()]()}class Dg{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=sd(),u=Dg.prototype;u[o]||(u[o]=Pa)}get changes(){return this._changes||(this._changes=new Dn)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=li(i);(this._changesDetected=!function(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],d=i[u];if(o&&(c=o(c),d=o(d)),d!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Jy{constructor(i){this.queryList=i,this.matches=null}clone(){return new Jy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cw{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let d=0;d<u;d++){const g=o.getByIndex(d);c.push(this.queries[g.indexInDeclarationView].clone())}return new Cw(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==JC(i,o).matches&&this.queries[o].setDirty()}}class Xy{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Dw{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,d=this.getByIndex(u).embeddedTView(i,c);d&&(d.indexInDeclarationView=u,null!==o?o.push(d):o=[d])}return null!==o?new Dw(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Tw{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Tw(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const d=u[c];this.matchTNodeWithReadOption(i,o,Fn(o,d)),this.matchTNodeWithReadOption(i,o,la(o,i,d,!1,!1))}else u===Mu?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,la(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Vo||c===ky||c===Mu&&4&o.type)this.addMatch(o.index,-2);else{const d=la(o,i,c,!1,!1);null!==d&&this.addMatch(o.index,d)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function Fn(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function RR(r,i,o,u){return-1===o?function(r,i){return 11&r.type?Ad(r,i):4&r.type?kf(r,i):null}(i,r):-2===o?function(r,i,o){return o===Vo?Ad(i,r):o===Mu?kf(i,r):o===ky?lC(i,r):void 0}(r,i,u):So(r,r[1],o,i)}function Aw(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const d=r.data,g=o.matches,y=[];for(let w=0;w<g.length;w+=2){const C=g[w];y.push(C<0?null:RR(i,d[C],g[w+1],o.metadata.read))}c.matches=y}return c.matches}function Sw(r,i,o,u){const c=r.queries.getByIndex(o),d=c.matches;if(null!==d){const g=Aw(r,i,c,o);for(let y=0;y<d.length;y+=2){const w=d[y];if(w>0)u.push(g[y/2]);else{const C=d[y+1],T=i[-w];for(let R=10;R<T.length;R++){const O=T[R];O[17]===O[3]&&Sw(O[1],O,C,u)}if(null!==T[9]){const R=T[9];for(let O=0;O<R.length;O++){const B=R[O];Sw(B[1],B,C,u)}}}}}return u}function zC(r){const i=Se(),o=Tt(),u=Co();wl(u+1);const c=JC(o,u);if(r.dirty&&bo(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const d=c.crossesNgTemplate?Sw(o,i,u,[]):Aw(o,i,c,u);r.reset(d,Dy),r.notifyOnChanges()}return!0}return!1}function ZC(r,i,o,u){const c=Tt();if(c.firstCreatePass){const d=yn();(function(r,i,o){null===r.queries&&(r.queries=new Dw),r.queries.track(new Tw(i,o))})(c,new Xy(i,o,u),d.index),function(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function(r,i,o){const u=new Dg(4==(4&o));Lm(r,i,u,u.destroy),null===i[19]&&(i[19]=new Cw),i[19].queries.push(new Jy(u))}(c,Se(),o)}function YC(){return r=Se(),i=Co(),r[19].queries[i].queryList;var r,i}function JC(r,i){return r.queries.getByIndex(i)}const Bw=new cn("Application Initializer");let $f=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Cy,this.reject=Cy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(gf(d))o.push(d);else if(Yp(d)){const g=new Promise((y,w)=>{d.subscribe({complete:y,error:w})});o.push(g)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Pn(Bw,8))},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();const oD=new cn("AppId"),WS={provide:oD,useFactory:function(){return`${jw()}${jw()}${jw()}`},deps:[]};function jw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const aD=new cn("Platform Initializer"),zS=new cn("Platform ID"),uD=new cn("appBootstrapListener");let a_=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();const Og=new cn("LocaleId"),$w=new cn("DefaultCurrencyCode");class YS{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}const $u=function(r){return new Ky(r)},ao=$u,lD=function(r){return Promise.resolve($u(r))},Hf=function(r){const i=$u(r),u=Xi(Bn(r).declarations).reduce((c,d)=>{const g=Qn(d);return g&&c.push(new PC(g)),c},[]);return new YS(i,u)},Pi=Hf,Gf=function(r){return Promise.resolve(Hf(r))};let jo=(()=>{class r{constructor(){this.compileModuleSync=ao,this.compileModuleAsync=lD,this.compileModuleAndAllComponentsSync=Pi,this.compileModuleAndAllComponentsAsync=Gf}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();const ex=(()=>Promise.resolve(0))();function Gw(r){"undefined"==typeof Zone?ex.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Ss{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dn(!1),this.onMicrotaskEmpty=new Dn(!1),this.onStable=new Dn(!1),this.onError=new Dn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let r=j.requestAnimationFrame,i=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(r){const i=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(j,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Ww(r),r.isCheckStableRunning=!0,qw(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Ww(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,d,g,y)=>{try{return zw(r),o.invokeTask(c,d,g,y)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||r.shouldCoalesceRunChangeDetection)&&i(),hD(r)}},onInvoke:(o,u,c,d,g,y,w)=>{try{return zw(r),o.invoke(c,d,g,y,w)}finally{r.shouldCoalesceRunChangeDetection&&i(),hD(r)}},onHasTask:(o,u,c,d)=>{o.hasTask(c,d),u===c&&("microTask"==d.change?(r._hasPendingMicrotasks=d.microTask,Ww(r),qw(r)):"macroTask"==d.change&&(r.hasPendingMacrotasks=d.macroTask))},onHandleError:(o,u,c,d)=>(o.handleError(c,d),r.runOutsideAngular(()=>r.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const d=this._inner,g=d.scheduleEventTask("NgZoneEvent: "+c,i,Pg,Cy,Cy);try{return d.runTask(g,o,u)}finally{d.cancelTask(g)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const Pg={};function qw(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Ww(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function zw(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function hD(r){r._nesting--,qw(r)}class fD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dn,this.onMicrotaskEmpty=new Dn,this.onStable=new Dn,this.onError=new Dn}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let l_=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ss.assertNotInAngularZone(),Gw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gw(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let d=-1;u&&u>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(g=>g.timeoutId!==d),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:d,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(Pn(Ss))},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})(),Kw=(()=>{class r{constructor(){this._applications=new Map,pD.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return pD.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();class d_{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function ix(r){pD=r}let pD=new d_,gD=!0,h_=!1;function mD(){return h_=!0,gD}function KR(){if(h_)throw new Error("Cannot enable prod mode after platform setup.");gD=!1}let $o;const Zw=new cn("AllowMultipleToken");class ox{constructor(i,o){this.name=i,this.token=o}}function wi(r,i,o=[]){const u=`Platform: ${i}`,c=new cn(u);return(d=[])=>{let g=Qw();if(!g||g.injector.get(Zw,!1))if(r)r(o.concat(d).concat({provide:c,useValue:!0}));else{const y=o.concat(d).concat({provide:c,useValue:!0},{provide:nd,useValue:"platform"});!function(r){if($o&&!$o.destroyed&&!$o.injector.get(Zw,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$o=r.get(yD);const i=r.get(aD,null);i&&i.forEach(o=>o())}(Sn.create({providers:y,name:u}))}return function(r){const i=Qw();if(!i)throw new Error("No platform exists!");if(!i.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(c)}}function Qw(){return $o&&!$o.destroyed?$o:null}let yD=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const y=function(r,i){let o;return o="noop"===r?new fD:("zone.js"===r?void 0:r)||new Ss({enableLongStackTrace:mD(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Ss,useValue:y}];return y.run(()=>{const C=Sn.create({providers:w,parent:this.injector,name:o.moduleType.name}),T=o.create(C),R=T.injector.get(_e,null);if(!R)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const O=y.onError.subscribe({next:B=>{R.handleError(B)}});T.onDestroy(()=>{Jw(this._modules,T),O.unsubscribe()})}),function(r,i,o){try{const u=o();return gf(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(R,y,()=>{const O=T.injector.get($f);return O.runInitializers(),O.donePromise.then(()=>(vE(T.injector.get(Og,Ds)||Ds),this._moduleDoBootstrap(T),T))})})}bootstrapModule(o,u=[]){const c=vD({},u);return function(r,i,o){const u=new Ky(o);return Promise.resolve(u)}(0,0,o).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(o){const u=o.injector.get(kg);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${K(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Pn(Sn))},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();function vD(r,i){return Array.isArray(i)?i.reduce(vD,r):Object.assign(Object.assign({},r),i)}let kg=(()=>{class r{constructor(o,u,c,d,g){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),w=new F.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Ss.assertNotInAngularZone(),Gw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ce.T)(y,w.pipe(r=>(0,le.x)()(function(r,i){return function(u){let c;c="function"==typeof r?r:function(){return r};const d=Object.create(u,te.N);return d.source=u,d.subjectFactory=c,d}}(W)(r))))}bootstrap(o,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=o instanceof ME?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const d=function(r){return r.isBoundToModule}(c)?void 0:this._injector.get(Kc),y=c.create(Sn.NULL,[],u||c.selector,d),w=y.location.nativeElement,C=y.injector.get(l_,null),T=C&&y.injector.get(Kw);return C&&T&&T.registerApplication(w,C),y.onDestroy(()=>{this.detachView(y.hostView),Jw(this.components,y),T&&T.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Jw(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(uD,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(Pn(Ss),Pn(Sn),Pn(_e),Pn(Nu),Pn($f))},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();function Jw(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}class wD{}class dx{}const Fg={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let DD=(()=>{class r{constructor(o,u){this._compiler=o,this._config=u||Fg}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[u,c]=o.split("#");return void 0===c&&(c="default"),V(8255)(u).then(d=>d[c]).then(d=>Lg(d,u,c)).then(d=>this._compiler.compileModuleAsync(d))}loadFactory(o){let[u,c]=o.split("#"),d="NgFactory";return void 0===c&&(c="default",d=""),V(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(g=>g[c+d]).then(g=>Lg(g,u,c))}}return r.\u0275fac=function(o){return new(o||r)(Pn(jo),Pn(dx,8))},r.\u0275prov=rn({token:r,factory:r.\u0275fac}),r})();function Lg(r,i,o){if(!r)throw new Error(`Cannot find '${o}' in '${i}'`);return r}const r0=function(r){return null},yx=wi(null,"core",[{provide:zS,useValue:"unknown"},{provide:yD,deps:[Sn]},{provide:Kw,deps:[]},{provide:a_,deps:[]}]),s0=[{provide:kg,useClass:kg,deps:[Ss,Sn,_e,Nu,$f]},{provide:lS,deps:[Ss],useFactory:function(r){let i=[];return r.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(o){i.push(o)}}},{provide:$f,useClass:$f,deps:[[new Ki,Bw]]},{provide:jo,useClass:jo,deps:[]},WS,{provide:Ny,useFactory:function(){return jE},deps:[]},{provide:Pf,useFactory:function(){return iC},deps:[]},{provide:Og,useFactory:function(r){return vE(r=r||"undefined"!=typeof $localize&&$localize.locale||Ds),r},deps:[[new zr(Og),new Ki,new Ro]]},{provide:$w,useValue:"USD"}];let bx=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Pn(kg))},r.\u0275mod=$a({type:r}),r.\u0275inj=bi({providers:s0}),r})()},8939:(et,Te,V)=>{"use strict";V.d(Te,{hO:()=>K,xv:()=>W,Dh:()=>le,GT:()=>ie,cc:()=>re,on:()=>k,pX:()=>te});var m=V(3018),ee=V(7841),F=V(6643);et=V.hmd(et);const ce=["ngOnDestroy"],te=(ye,ve,he,Ce={})=>new Proxy(ye,{get:(Fe,Le)=>he.runOutsideAngular(()=>{var gt;if(ye[Le])return(null===(gt=null==Ce?void 0:Ce.spy)||void 0===gt?void 0:gt.get)&&Ce.spy.get(Le,ye[Le]),ye[Le];if(ce.indexOf(Le)>-1)return()=>{};const dt=ve.toPromise().then(De=>{const ne=De&&De[Le];return"function"==typeof ne?ne.bind(De):ne&&ne.then?ne.then(oe=>he.run(()=>oe)):he.run(()=>ne)});return new Proxy(()=>{},{get:(De,ne)=>dt[ne],apply:(De,ne,oe)=>dt.then(fe=>{var ue;const Pe=fe&&fe(...oe);return(null===(ue=null==Ce?void 0:Ce.spy)||void 0===ue?void 0:ue.apply)&&Ce.spy.apply(Le,oe,Pe),Pe})})})}),ie=(ye,ve)=>{ve.forEach(he=>{Object.getOwnPropertyNames(he.prototype||he).forEach(Ce=>{Object.defineProperty(ye.prototype,Ce,Object.getOwnPropertyDescriptor(he.prototype||he,Ce))})})};class Ee{constructor(ve){return ve}}const le=new m.OlP("angularfire2.app.options"),W=new m.OlP("angularfire2.app.name");function k(ye,ve,he){const Fe="object"==typeof he&&he||{};Fe.name=Fe.name||"string"==typeof he&&he||"[DEFAULT]";const gt=ee.Z.apps.filter(dt=>dt&&dt.name===Fe.name)[0]||ve.runOutsideAngular(()=>ee.Z.initializeApp(ye,Fe));try{JSON.stringify(ye)!==JSON.stringify(gt.options)&&L("error",`${gt.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(dt){}return new Ee(gt)}const L=(ye,...ve)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[ye](...ve)},Q={provide:Ee,useFactory:k,deps:[le,m.R0b,[new m.FiY,W]]};let K=(()=>{class ye{constructor(he){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,he.toString())}static initializeApp(he,Ce){return{ngModule:ye,providers:[{provide:le,useValue:he},{provide:W,useValue:Ce}]}}}return ye.\u0275fac=function(he){return new(he||ye)(m.LFG(m.Lbi))},ye.\u0275mod=m.oAB({type:ye}),ye.\u0275inj=m.cJS({providers:[Q]}),ye})();function re(ye,ve,he,Ce,Fe){const[,Le,gt]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===ye)||[];if(Le)return function(ye,ve){try{return ye.toString()===ve.toString()}catch(he){return ye===ve}}(Fe,gt)||(q("error",`${ve} was already initialized on the ${he} Firebase App with different settings.${de?" You may need to reload as Firebase is not HMR aware.":""}`),q("warn",{is:Fe,was:gt})),Le;{const dt=Ce();return globalThis.\u0275AngularfireInstanceCache.push([ye,dt,Fe]),dt}}const de=!!et.hot,q=(ye,...ve)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[ye](...ve)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6643:(et,Te,V)=>{"use strict";V.d(Te,{q4:()=>pc,iC:()=>Th,HU:()=>di,vb:()=>pa,JM:()=>fa});var m=V(3018),ee=V(2329),F=V(8239),ce=V(5452),te=V(3854),ie=V(6034),Ee=V(5601),le=V(6676);const W="@firebase/installations",k="0.5.2",Q=`w:${k}`,K="FIS_v2",ve=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function Ce({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Fe(I){return{token:I.token,requestStatus:2,expiresIn:fe(I.expiresIn),creationTime:Date.now()}}function Le(I,D){return gt.apply(this,arguments)}function gt(){return(gt=(0,F.Z)(function*(I,D){const U=(yield D.json()).error;return ve.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function dt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function De(I,{refreshToken:D}){const x=dt(I);return x.append("Authorization",function(I){return`${K} ${I}`}(D)),x}function ne(I){return oe.apply(this,arguments)}function oe(){return(oe=(0,F.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function fe(I){return Number(I.replace("s","000"))}function Pe(I,D){return ge.apply(this,arguments)}function ge(){return(ge=(0,F.Z)(function*(I,{fid:D}){const x=Ce(I),pe={method:"POST",headers:dt(I),body:JSON.stringify({fid:D,authVersion:K,appId:I.appId,sdkVersion:Q})},Ne=yield ne(()=>fetch(x,pe));if(Ne.ok){const We=yield Ne.json();return{fid:We.fid||D,registrationStatus:2,refreshToken:We.refreshToken,authToken:Fe(We.authToken)}}throw yield Le("Create Installation",Ne)})).apply(this,arguments)}function it(I){return new Promise(D=>{setTimeout(D,I)})}const Mn=/^[cdef][\w-]{21}$/;function Gt(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Mn.test(x)?x:""}catch(I){return""}}function Wt(I){return`${I.appName}!${I.appId}`}const Un=new Map;function Vr(I,D){const x=Wt(I);xt(x,D),function(I,D){const x=(!cr&&"BroadcastChannel"in self&&(cr=new BroadcastChannel("[Firebase] FID Change"),cr.onmessage=I=>{xt(I.data.key,I.data.fid)}),cr);x&&x.postMessage({key:I,fid:D}),0===Un.size&&cr&&(cr.close(),cr=null)}(x,D)}function xt(I,D){const x=Un.get(I);if(x)for(const U of x)U(D)}let cr=null;const oi="firebase-installations-store";let Li=null;function cs(){return Li||(Li=(0,le.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(oi)}})),Li}function ai(I,D){return wn.apply(this,arguments)}function wn(){return(wn=(0,F.Z)(function*(I,D){const x=Wt(I),Z=(yield cs()).transaction(oi,"readwrite"),pe=Z.objectStore(oi),Ne=yield pe.get(x);return yield pe.put(D,x),yield Z.complete,(!Ne||Ne.fid!==D.fid)&&Vr(I,D.fid),D})).apply(this,arguments)}function lr(I){return lo.apply(this,arguments)}function lo(){return(lo=(0,F.Z)(function*(I){const D=Wt(I),U=(yield cs()).transaction(oi,"readwrite");yield U.objectStore(oi).delete(D),yield U.complete})).apply(this,arguments)}function ot(I,D){return Re.apply(this,arguments)}function Re(){return(Re=(0,F.Z)(function*(I,D){const x=Wt(I),Z=(yield cs()).transaction(oi,"readwrite"),pe=Z.objectStore(oi),Ne=yield pe.get(x),We=D(Ne);return void 0===We?yield pe.delete(x):yield pe.put(We,x),yield Z.complete,We&&(!Ne||Ne.fid!==We.fid)&&Vr(I,We.fid),We})).apply(this,arguments)}function jt(I){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,F.Z)(function*(I){let D;const x=yield ot(I,U=>{const Z=hn(U),pe=Pt(I,Z);return D=pe.registrationPromise,pe.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function hn(I){return fn(I||{fid:Gt(),registrationStatus:0})}function Pt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ve.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:x,registrationPromise:function(I,D){return Qe.apply(this,arguments)}(I,x)}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:mn(I)}:{installationEntry:D}}function Qe(){return(Qe=(0,F.Z)(function*(I,D){try{return ai(I,yield Pe(I,D))}catch(x){throw he(x)&&409===x.customData.serverCode?yield lr(I):yield ai(I,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function mn(I){return ls.apply(this,arguments)}function ls(){return(ls=(0,F.Z)(function*(I){let D=yield Ii(I);for(;1===D.registrationStatus;)yield it(100),D=yield Ii(I);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:U}=yield jt(I);return U||x}return D})).apply(this,arguments)}function Ii(I){return ot(I,D=>{if(!D)throw ve.create("installation-not-found");return fn(D)})}function fn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function ho(I,D){return $.apply(this,arguments)}function $(){return($=(0,F.Z)(function*({appConfig:I,platformLoggerProvider:D},x){const U=G(I,x),Z=De(I,x),pe=D.getImmediate({optional:!0});pe&&Z.append("x-firebase-client",pe.getPlatformInfoString());const We={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:Q}})},Ge=yield ne(()=>fetch(U,We));if(Ge.ok)return Fe(yield Ge.json());throw yield Le("Generate Auth Token",Ge)})).apply(this,arguments)}function G(I,{fid:D}){return`${Ce(I)}/${D}/authTokens:generate`}function j(I){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(I,D=!1){let x;const U=yield ot(I.appConfig,pe=>{if(!Zt(pe))throw ve.create("not-registered");const Ne=pe.authToken;if(!D&&Ur(Ne))return pe;if(1===Ne.requestStatus)return x=se(I,D),pe;{if(!navigator.onLine)throw ve.create("app-offline");const We=Xt(pe);return x=kt(I,We),We}});return x?yield x:U.authToken})).apply(this,arguments)}function se(I,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,F.Z)(function*(I,D){let x=yield He(I.appConfig);for(;1===x.authToken.requestStatus;)yield it(100),x=yield He(I.appConfig);const U=x.authToken;return 0===U.requestStatus?j(I,D):U})).apply(this,arguments)}function He(I){return ot(I,D=>{if(!Zt(D))throw ve.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function kt(I,D){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,F.Z)(function*(I,D){try{const x=yield ho(I,D),U=Object.assign(Object.assign({},D),{authToken:x});return yield ai(I.appConfig,U),x}catch(x){if(!he(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ai(I.appConfig,U)}else yield lr(I.appConfig);throw x}})).apply(this,arguments)}function Zt(I){return void 0!==I&&2===I.registrationStatus}function Ur(I){return 2===I.requestStatus&&!function(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Xt(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Ho(){return(Ho=(0,F.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:U}=yield jt(D.appConfig);return U?U.catch(console.error):j(D).catch(console.error),x.fid})).apply(this,arguments)}function ja(){return(ja=(0,F.Z)(function*(I,D=!1){const x=I;return yield qu(x.appConfig),(yield j(x,D)).token})).apply(this,arguments)}function qu(I){return xs.apply(this,arguments)}function xs(){return(xs=(0,F.Z)(function*(I){const{registrationPromise:D}=yield jt(I);D&&(yield D)})).apply(this,arguments)}function Bn(I){return ve.create("missing-app-config-values",{valueName:I})}const th="installations";(0,ce._registerComponent)(new ie.wA(th,I=>{const D=I.getProvider("app").getImmediate();return{app:D,appConfig:function(I){if(!I||!I.options)throw Bn("App Configuration");if(!I.name)throw Bn("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw Bn(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D),platformLoggerProvider:(0,ce._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new ie.wA("installations-internal",I=>{const D=I.getProvider("app").getImmediate(),x=(0,ce._getProvider)(D,th).getImmediate();return{getId:()=>function(I){return Ho.apply(this,arguments)}(x),getToken:Z=>function(I){return ja.apply(this,arguments)}(x,Z)}},"PRIVATE")),(0,ce.registerVersion)(W,k),(0,ce.registerVersion)(W,k,"esm2017");const dr="@firebase/remote-config",An=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pl{constructor(D,x,U,Z){this.client=D,this.storage=x,this.storageCache=U,this.logger=Z}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-x,Z=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var x=this;return(0,F.Z)(function*(){const[U,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(D.cacheMaxAgeMillis,U))return Z;D.eTag=Z&&Z.eTag;const pe=yield x.client.fetch(D),Ne=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Ne.push(x.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Ne),pe})()}}function jr(I=navigator){return I.languages&&I.languages[0]||I.language}class Ht{constructor(D,x,U,Z,pe,Ne){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=U,this.projectId=Z,this.apiKey=pe,this.appId=Ne}fetch(D){var x=this;return(0,F.Z)(function*(){const[U,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,We={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ge={sdk_version:x.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:x.appId,language_code:jr()},Rt={method:"POST",headers:We,body:JSON.stringify(Ge)},Ft=fetch(Ne,Rt),qn=new Promise((zi,$s)=>{D.signal.addEventListener(()=>{const Fl=new Error("The operation was aborted.");Fl.name="AbortError",$s(Fl)})});let gr;try{yield Promise.race([Ft,qn]),gr=yield Ft}catch(zi){let $s="fetch-client-network";throw"AbortError"===zi.name&&($s="fetch-timeout"),An.create($s,{originalErrorMessage:zi.message})}let nr=gr.status;const Ni=gr.headers.get("ETag")||void 0;let ma,fi;if(200===gr.status){let zi;try{zi=yield gr.json()}catch($s){throw An.create("fetch-client-parse",{originalErrorMessage:$s.message})}ma=zi.entries,fi=zi.state}if("INSTANCE_STATE_UNSPECIFIED"===fi?nr=500:"NO_CHANGE"===fi?nr=304:("NO_TEMPLATE"===fi||"EMPTY_CONFIG"===fi)&&(ma={}),304!==nr&&200!==nr)throw An.create("fetch-status",{httpStatus:nr});return{status:nr,eTag:Ni,config:ma}})()}}class $r{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,F.Z)(function*(){const U=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:U}){var Z=this;return(0,F.Z)(function*(){yield function(I,D){return new Promise((x,U)=>{const Z=Math.max(D-Date.now(),0),pe=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(pe),U(An.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const pe=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function(I){if(!(I instanceof te.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(pe))throw pe;const Ne={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(Ne),Z.attemptFetch(D,Ne)}})()}}class zg{constructor(D,x,U,Z,pe){this.app=D,this._client=x,this._storageCache=U,this._storage=Z,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qo(I,D){const x=I.target.error||void 0;return An.create(D,{originalErrorMessage:x&&x.message})}const mo="app_namespace_store";class sh{constructor(D,x,U,Z=function(){return new Promise((I,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=U=>{D(qo(U,"storage-open"))},x.onsuccess=U=>{I(U.target.result)},x.onupgradeneeded=U=>{const Z=U.target.result;switch(U.oldVersion){case 0:Z.createObjectStore(mo,{keyPath:"compositeKey"})}}}catch(x){D(An.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,F.Z)(function*(){const U=yield x.openDbPromise;return new Promise((Z,pe)=>{const We=U.transaction([mo],"readonly").objectStore(mo),Ge=x.createCompositeKey(D);try{const Rt=We.get(Ge);Rt.onerror=Ft=>{pe(qo(Ft,"storage-get"))},Rt.onsuccess=Ft=>{const qn=Ft.target.result;Z(qn?qn.value:void 0)}}catch(Rt){pe(An.create("storage-get",{originalErrorMessage:Rt&&Rt.message}))}})})()}set(D,x){var U=this;return(0,F.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((pe,Ne)=>{const Ge=Z.transaction([mo],"readwrite").objectStore(mo),Rt=U.createCompositeKey(D);try{const Ft=Ge.put({compositeKey:Rt,value:x});Ft.onerror=qn=>{Ne(qo(qn,"storage-set"))},Ft.onsuccess=()=>{pe()}}catch(Ft){Ne(An.create("storage-set",{originalErrorMessage:Ft&&Ft.message}))}})})()}delete(D){var x=this;return(0,F.Z)(function*(){const U=yield x.openDbPromise;return new Promise((Z,pe)=>{const We=U.transaction([mo],"readwrite").objectStore(mo),Ge=x.createCompositeKey(D);try{const Rt=We.delete(Ge);Rt.onerror=Ft=>{pe(qo(Ft,"storage-delete"))},Rt.onsuccess=()=>{Z()}}catch(Rt){pe(An.create("storage-delete",{originalErrorMessage:Rt&&Rt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Wo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const x=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),pe=yield x;pe&&(D.lastFetchStatus=pe);const Ne=yield U;Ne&&(D.lastSuccessfulFetchTimestampMillis=Ne);const We=yield Z;We&&(D.activeConfig=We)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Qg(){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,F.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new ie.wA("remote-config",function(D,{instanceIdentifier:x}){const U=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw An.create("registration-window");if(!(0,te.hl)())throw An.create("indexed-db-unavailable");const{projectId:pe,apiKey:Ne,appId:We}=U.options;if(!pe)throw An.create("registration-project-id");if(!Ne)throw An.create("registration-api-key");if(!We)throw An.create("registration-app-id");const Ge=new sh(We,U.name,x=x||"firebase"),Rt=new Wo(Ge),Ft=new Ee.Yd(dr);Ft.logLevel=Ee.in.ERROR;const qn=new Ht(Z,ce.SDK_VERSION,x,pe,Ne,We),gr=new $r(qn,Ge),nr=new pl(gr,Ge,Rt,Ft),Ni=new zg(U,nr,Rt,Ge,Ft);return function(I){const D=(0,te.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ni),Ni},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(dr,"0.3.1"),(0,ce.registerVersion)(dr,"0.3.1","esm2017");const yo="/firebase-messaging-sw.js",za="/firebase-cloud-messaging-push-scope",Ps="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Zu="google.c.a.c_id",yl="google.c.a.c_l",Jg="google.c.a.ts",Ko="google.c.a.e";var Cr=(()=>{return(I=Cr||(Cr={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Cr;var I})();function Ai(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _l(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(x),Z=new Uint8Array(U.length);for(let pe=0;pe<U.length;++pe)Z[pe]=U.charCodeAt(pe);return Z}const _o="fcm_token_details_db",oh="fcm_token_object_Store";function Yf(I){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(_o))return null;let D=null;return(yield(0,le.openDb)(_o,5,function(){var U=(0,F.Z)(function*(Z){var pe;if(Z.oldVersion<2||!Z.objectStoreNames.contains(oh))return;const Ne=Z.transaction.objectStore(oh),We=yield Ne.index("fcmSenderId").get(I);if(yield Ne.clear(),We)if(2===Z.oldVersion){const Ge=We;if(!Ge.auth||!Ge.p256dh||!Ge.endpoint)return;D={token:Ge.fcmToken,createTime:null!==(pe=Ge.createTime)&&void 0!==pe?pe:Date.now(),subscriptionOptions:{auth:Ge.auth,p256dh:Ge.p256dh,endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:"string"==typeof Ge.vapidKey?Ge.vapidKey:Ai(Ge.vapidKey)}}}else if(3===Z.oldVersion){const Ge=We;D={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:Ai(Ge.auth),p256dh:Ai(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:Ai(Ge.vapidKey)}}}else if(4===Z.oldVersion){const Ge=We;D={token:Ge.fcmToken,createTime:Ge.createTime,subscriptionOptions:{auth:Ai(Ge.auth),p256dh:Ai(Ge.p256dh),endpoint:Ge.endpoint,swScope:Ge.swScope,vapidKey:Ai(Ge.vapidKey)}}}});return function(Z){return U.apply(this,arguments)}}())).close(),yield(0,le.deleteDb)(_o),yield(0,le.deleteDb)("fcm_vapid_details_db"),yield(0,le.deleteDb)("undefined"),Yu(D)?D:null})).apply(this,arguments)}function Yu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const $n="firebase-messaging-store";let Zo=null;function Yo(){return Zo||(Zo=(0,le.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore($n)}})),Zo}function ks(I){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,F.Z)(function*(I){const D=Jo(I),U=yield(yield Yo()).transaction($n).objectStore($n).get(D);if(U)return U;{const Z=yield Yf(I.appConfig.senderId);if(Z)return yield Eo(I,Z),Z}})).apply(this,arguments)}function Eo(I,D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(I,D){const x=Jo(I),Z=(yield Yo()).transaction($n,"readwrite");return yield Z.objectStore($n).put(D,x),yield Z.complete,D})).apply(this,arguments)}function sn(I){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(I){const D=Jo(I),U=(yield Yo()).transaction($n,"readwrite");yield U.objectStore($n).delete(D),yield U.complete})).apply(this,arguments)}function Jo({appConfig:I}){return I.appId}const bt=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function uh(I,D){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,F.Z)(function*(I,D){const x=yield Hn(I),U=Xo(D),Z={method:"POST",headers:x,body:JSON.stringify(U)};let pe;try{pe=yield(yield fetch(wo(I.appConfig),Z)).json()}catch(Ne){throw bt.create("token-subscribe-failed",{errorInfo:Ne})}if(pe.error)throw bt.create("token-subscribe-failed",{errorInfo:pe.error.message});if(!pe.token)throw bt.create("token-subscribe-no-token");return pe.token})).apply(this,arguments)}function Za(I,D){return hr.apply(this,arguments)}function hr(){return(hr=(0,F.Z)(function*(I,D){const x=yield Hn(I),U=Xo(D.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(U)};let pe;try{pe=yield(yield fetch(`${wo(I.appConfig)}/${D.token}`,Z)).json()}catch(Ne){throw bt.create("token-update-failed",{errorInfo:Ne})}if(pe.error)throw bt.create("token-update-failed",{errorInfo:pe.error.message});if(!pe.token)throw bt.create("token-update-no-token");return pe.token})).apply(this,arguments)}function Qf(I,D){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,F.Z)(function*(I,D){const U={method:"DELETE",headers:yield Hn(I)};try{const pe=yield(yield fetch(`${wo(I.appConfig)}/${D}`,U)).json();if(pe.error)throw bt.create("token-unsubscribe-failed",{errorInfo:pe.error.message})}catch(Z){throw bt.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function wo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Hn(I){return bo.apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Xo({p256dh:I,auth:D,endpoint:x,vapidKey:U}){const Z={web:{endpoint:x,auth:D,p256dh:I}};return U!==Ps&&(Z.web.applicationPubKey=U),Z}const Ya=6048e5;function Fs(I){return ea.apply(this,arguments)}function ea(){return(ea=(0,F.Z)(function*(I){const D=yield vl(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Ai(D.getKey("auth")),p256dh:Ai(D.getKey("p256dh"))},U=yield ks(I.firebaseDependencies);if(U){if(ch(U.subscriptionOptions,x))return Date.now()>=U.createTime+Ya?Xg(I,{token:U.token,createTime:Date.now(),subscriptionOptions:x}):U.token;try{yield Qf(I.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return ta(I.firebaseDependencies,x)}return ta(I.firebaseDependencies,x)})).apply(this,arguments)}function ec(I){return ut.apply(this,arguments)}function ut(){return(ut=(0,F.Z)(function*(I){const D=yield ks(I.firebaseDependencies);D&&(yield Qf(I.firebaseDependencies,D.token),yield sn(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Xg(I,D){return ps.apply(this,arguments)}function ps(){return(ps=(0,F.Z)(function*(I,D){try{const x=yield Za(I.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Eo(I.firebaseDependencies,U),x}catch(x){throw yield ec(I),x}})).apply(this,arguments)}function ta(I,D){return Io.apply(this,arguments)}function Io(){return(Io=(0,F.Z)(function*(I,D){const U={token:yield uh(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Eo(I,U),U.token})).apply(this,arguments)}function vl(I,D){return gs.apply(this,arguments)}function gs(){return(gs=(0,F.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_l(D)})})).apply(this,arguments)}function ch(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Se(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const U=D.notification.body;U&&(I.notification.body=U);const Z=D.notification.image;Z&&(I.notification.image=Z)}(D,I),function(I,D){!D.data||(I.data=D.data)}(D,I),function(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const x=D.fcmOptions.link;x&&(I.fcmOptions.link=x);const U=D.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(D,I),D}function dh(I){return"object"==typeof I&&!!I&&Zu in I}function na(I,D){const x=[];for(let U=0;U<I.length;U++)x.push(I.charAt(U)),U<D.length&&x.push(D.charAt(U));return x.join("")}function Qa(I){return bt.create("missing-app-config-values",{valueName:I})}na("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),na("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ls{constructor(D,x,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function(I){if(!I||!I.options)throw Qa("App Configuration Object");if(!I.name)throw Qa("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const U of D)if(!x[U])throw Qa(U);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:x,analyticsProvider:U}}_delete(){return Promise.resolve()}}function hh(I){return tc.apply(this,arguments)}function tc(){return(tc=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(yo,{scope:za}),I.swRegistration.update().catch(()=>{})}catch(D){throw bt.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function ra(I,D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,F.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield hh(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw bt.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function Dr(I,D){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,F.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Ps)})).apply(this,arguments)}function ji(){return(ji=(0,F.Z)(function*(I,D){if(!navigator)throw bt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw bt.create("permission-blocked");return yield Dr(I,null==D?void 0:D.vapidKey),yield ra(I,null==D?void 0:D.serviceWorkerRegistration),Fs(I)})).apply(this,arguments)}function ms(I,D,x){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,F.Z)(function*(I,D,x){const U=fh(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:x[Zu],message_name:x[yl],message_time:x[Jg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function fh(I){switch(I){case Cr.NOTIFICATION_CLICKED:return"notification_open";case Cr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xa(){return(Xa=(0,F.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===Cr.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Se(x)):I.onMessageHandler.next(Se(x)));const U=x.data;dh(U)&&"1"===U[Ko]&&(yield ms(I,x.messageType,U))})).apply(this,arguments)}const ia="@firebase/messaging";function ph(){return Do.apply(this,arguments)}function Do(){return(Do=(0,F.Z)(function*(){return"undefined"!=typeof window&&(0,te.hl)()&&(yield(0,te.eu)())&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new ie.wA("messaging",I=>{const D=new Ls(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function(I,D){return Xa.apply(this,arguments)}(D,x)),D},"PUBLIC")),(0,ce._registerComponent)(new ie.wA("messaging-internal",I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:U=>function(I,D){return ji.apply(this,arguments)}(D,U)}},"PRIVATE")),(0,ce.registerVersion)(ia,"0.9.2"),(0,ce.registerVersion)(ia,"0.9.2","esm2017");const $i="analytics",on="firebase_id",Il="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yh="https://www.googletagmanager.com/gtag/js",Gn=new Ee.Yd("@firebase/analytics");function _h(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function sa(I,D){const x=document.createElement("script");x.src=`${yh}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function Cl(I,D,x,U,Z,pe){return To.apply(this,arguments)}function To(){return(To=(0,F.Z)(function*(I,D,x,U,Z,pe){const Ne=U[Z];try{if(Ne)yield D[Ne];else{const Ge=(yield _h(x)).find(Rt=>Rt.measurementId===Z);Ge&&(yield D[Ge.appId])}}catch(We){Gn.error(We)}I("config",Z,pe)})).apply(this,arguments)}function Dl(I,D,x,U,Z){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,F.Z)(function*(I,D,x,U,Z){try{let pe=[];if(Z&&Z.send_to){let Ne=Z.send_to;Array.isArray(Ne)||(Ne=[Ne]);const We=yield _h(x);for(const Ge of Ne){const Rt=We.find(qn=>qn.measurementId===Ge),Ft=Rt&&D[Rt.appId];if(!Ft){pe=[];break}pe.push(Ft)}}0===pe.length&&(pe=Object.values(D)),yield Promise.all(pe),I("event",U,Z||{})}catch(pe){Gn.error(pe)}})).apply(this,arguments)}function M_(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(yh))return D;return null}const fr=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tu=new class{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function em(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function an(I){return nu.apply(this,arguments)}function nu(){return(nu=(0,F.Z)(function*(I){var D;const{appId:x,apiKey:U}=I,Z={method:"GET",headers:em(U)},pe=Il.replace("{app-id}",x),Ne=yield fetch(pe,Z);if(200!==Ne.status&&304!==Ne.status){let We="";try{const Ge=yield Ne.json();(null===(D=Ge.error)||void 0===D?void 0:D.message)&&(We=Ge.error.message)}catch(Ge){}throw fr.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:We})}return Ne.json()})).apply(this,arguments)}function oc(I){return ru.apply(this,arguments)}function ru(){return(ru=(0,F.Z)(function*(I,D=tu,x){const{appId:U,apiKey:Z,measurementId:pe}=I.options;if(!U)throw fr.create("no-app-id");if(!Z){if(pe)return{measurementId:pe,appId:U};throw fr.create("no-api-key")}const Ne=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},We=new su;return setTimeout((0,F.Z)(function*(){We.abort()}),void 0!==x?x:6e4),ac({appId:U,apiKey:Z,measurementId:pe},Ne,We,D)})).apply(this,arguments)}function ac(I,D,x){return uc.apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},U,Z=tu){const{appId:pe,measurementId:Ne}=I;try{yield iu(U,D)}catch(We){if(Ne)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:pe,measurementId:Ne};throw We}try{const We=yield an(I);return Z.deleteThrottleMetadata(pe),We}catch(We){if(!vh(We)){if(Z.deleteThrottleMetadata(pe),Ne)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${We.message}]`),{appId:pe,measurementId:Ne};throw We}const Ge=503===Number(We.customData.httpStatus)?(0,te.$s)(x,Z.intervalMillis,30):(0,te.$s)(x,Z.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+Ge,backoffCount:x+1};return Z.setThrottleMetadata(pe,Rt),Gn.debug(`Calling attemptFetch again in ${Ge} millis`),ac(I,Rt,U,Z)}})).apply(this,arguments)}function iu(I,D){return new Promise((x,U)=>{const Z=Math.max(D-Date.now(),0),pe=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(pe),U(fr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function vh(I){if(!(I instanceof te.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class su{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ou(){return aa.apply(this,arguments)}function aa(){return(aa=(0,F.Z)(function*(){if(!(0,te.hl)())return Gn.warn(fr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(I){return Gn.warn(fr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ua(){return(ua=(0,F.Z)(function*(I,D,x,U,Z,pe,Ne){var We;const Ge=oc(I);Ge.then(nr=>{x[nr.measurementId]=nr.appId,I.options.measurementId&&nr.measurementId!==I.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${nr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(nr=>Gn.error(nr)),D.push(Ge);const Rt=ou().then(nr=>{if(nr)return U.getId()}),[Ft,qn]=yield Promise.all([Ge,Rt]);M_()||sa(pe,Ft.measurementId),Z("js",new Date);const gr=null!==(We=null==Ne?void 0:Ne.config)&&void 0!==We?We:{};return gr.origin="firebase",gr.update=!0,null!=qn&&(gr[on]=qn),Z("config",Ft.measurementId,gr),Ft.measurementId})).apply(this,arguments)}class Al{constructor(D){this.app=D}_delete(){return delete bn[this.app.options.appId],Promise.resolve()}}let bn={},un=[];const rt={};let er,vs,Gr="dataLayer",au=!1;function Eh(I,D,x){!function(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),x=fr.create("invalid-analytics-context",{errorInfo:D});Gn.warn(x.message)}}();const U=I.options.appId;if(!U)throw fr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw fr.create("no-api-key");Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=bn[U])throw fr.create("already-exists",{id:U});if(!au){!function(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Gr);const{wrappedGtag:pe,gtagCore:Ne}=function(I,D,x,U,Z){let pe=function(...Ne){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(pe=window[Z]),window[Z]=function(I,D,x,U){function pe(){return(pe=(0,F.Z)(function*(Ne,We,Ge){try{"event"===Ne?yield Dl(I,D,x,We,Ge):"config"===Ne?yield Cl(I,D,x,U,We,Ge):I("set",We)}catch(Rt){Gn.error(Rt)}})).apply(this,arguments)}return function(Ne,We,Ge){return pe.apply(this,arguments)}}(pe,I,D,x),{gtagCore:pe,wrappedGtag:window[Z]}}(bn,un,rt,Gr,"gtag");vs=pe,er=Ne,au=!0}return bn[U]=function(I,D,x,U,Z,pe,Ne){return ua.apply(this,arguments)}(I,un,rt,D,er,Gr,x),new Al(I)}function qr(){return(qr=(0,F.Z)(function*(I,D,x,U,Z){if(Z&&Z.global)I("event",x,U);else{const pe=yield D;I("event",x,Object.assign(Object.assign({},U),{send_to:pe}))}})).apply(this,arguments)}function Gi(){return pr.apply(this,arguments)}function pr(){return(pr=(0,F.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const np="@firebase/analytics";(0,ce._registerComponent)(new ie.wA($i,(D,{options:x})=>Eh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new ie.wA("analytics-internal",function(D){try{const x=D.getProvider($i).getImmediate();return{logEvent:(U,Z,pe)=>function(I,D,x,U){I=(0,te.m9)(I),function(I,D,x,U,Z){return qr.apply(this,arguments)}(vs,bn[I.app.options.appId],D,x,U).catch(Z=>Gn.error(Z))}(x,U,Z,pe)}}catch(x){throw fr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(np,"0.7.2"),(0,ce.registerVersion)(np,"0.7.2","esm2017");var fc=V(7771),cn=V(3637),Rl=V(3342),Ch=V(3101),cu=V(309);const pc=new m.GfV("7.1.1"),lu="__angularfire_symbol__analyticsIsSupported",Dh="__angularfire_symbol__remoteConfigIsSupported",ci="__angularfire_symbol__messagingIsSupported";function fa(I,D,x){if(D){if(1===D.length)return D[0];const pe=D.filter(Ne=>Ne.app===x);if(1===pe.length)return pe[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[lu]||(globalThis[lu]=Gi().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[ci]||(globalThis[ci]=ph().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[Dh]||(globalThis[Dh]=Qg().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const pa=(I,D)=>{const x=D?[D]:(0,ee.C6)(),U=[];return x.forEach(Z=>{Z.container.getProvider(I).instances.forEach(Ne=>{U.includes(Ne)||U.push(Ne)})}),U};function ga(){}class Ol{constructor(D,x=fc.N){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,U){const Z=this.zone;return this.delegate.schedule(function(Ne){Z.runGuarded(()=>{D.apply(this,[Ne])})},x,U)}}class li{constructor(D){this.zone=D,this.task=null}call(D,x){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ga,{},ga,ga)),x.pipe((0,Rl.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let di=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ol(Zone.current)),this.insideAngular=x.run(()=>new Ol(Zone.current,cn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(m.LFG(m.R0b))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function qi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Th(I){return qi(),function(I){return function(x){return(x=x.lift(new li(I.ngZone))).pipe((0,Ch.R)(I.outsideAngular),(0,cu.QV)(I.insideAngular))}}(qi())(I)}},4486:(et,Te,V)=>{"use strict";V.d(Te,{Z:()=>we});var m=V(3854),ee=V(6034),F=V(5452),ce=V(5601);class te{constructor(q,ye){this._delegate=q,this.firebase=ye,(0,F._addComponent)(q,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this._delegate.automaticDataCollectionEnabled=q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(q=>{this._delegate.checkDestroyed(),q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(q,ye=F._DEFAULT_ENTRY_NAME){var ve;this._delegate.checkDestroyed();const he=this._delegate.container.getProvider(q);return!he.isInitialized()&&"EXPLICIT"===(null===(ve=he.getComponent())||void 0===ve?void 0:ve.instantiationMode)&&he.initialize(),he.getImmediate({identifier:ye})}_removeServiceInstance(q,ye=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(q).clearInstance(ye)}_addComponent(q){(0,F._addComponent)(this._delegate,q)}_addOrOverwriteComponent(q){(0,F._addOrOverwriteComponent)(this._delegate,q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),k=function W(){const de=function(de){const q={},ye={__esModule:!0,initializeApp:function(dt,De={}){const ne=F.initializeApp(dt,De);if((0,m.r3)(q,ne.name))return q[ne.name];const oe=new de(ne,ye);return q[ne.name]=oe,oe},app:he,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(dt){const De=dt.name,ne=De.replace("-compat","");if(F._registerComponent(dt)&&"PUBLIC"===dt.type){const oe=(fe=he())=>{if("function"!=typeof fe[ne])throw Ee.create("invalid-app-argument",{appName:De});return fe[ne]()};void 0!==dt.serviceProps&&(0,m.ZB)(oe,dt.serviceProps),ye[ne]=oe,de.prototype[ne]=function(...fe){return this._getService.bind(this,De).apply(this,dt.multipleInstances?fe:[])}}return"PUBLIC"===dt.type?ye[ne]:null},removeApp:function(dt){delete q[dt]},useAsService:function(dt,De){return"serverAuth"===De?null:De},modularAPIs:F}};function he(dt){if(!(0,m.r3)(q,dt=dt||F._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:dt});return q[dt]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function(){return Object.keys(q).map(dt=>q[dt])}}),he.App=de,ye}(te);return de.INTERNAL=Object.assign(Object.assign({},de.INTERNAL),{createFirebaseNamespace:W,extendNamespace:function(ye){(0,m.ZB)(de,ye)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),de}(),L=new ce.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){L.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&L.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=k;(0,F.registerVersion)("@firebase/app-compat","0.1.6",undefined)},5452:(et,Te,V)=>{"use strict";V.r(Te),V.d(Te,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>si,_DEFAULT_ENTRY_NAME:()=>Mn,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>Un,_apps:()=>Gt,_clearComponents:()=>xt,_components:()=>On,_getProvider:()=>dn,_registerComponent:()=>Vr,_removeServiceInstance:()=>at,deleteApp:()=>Li,getApp:()=>br,getApps:()=>oi,initializeApp:()=>bi,onLog:()=>wn,registerVersion:()=>ai,setLogLevel:()=>lr});var m=V(8239),ee=V(6034),F=V(5601),ce=V(3854);class te{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(jt=>{if(function(ot){const Re=ot.getComponent();return"VERSION"===(null==Re?void 0:Re.type)}(jt)){const Qt=jt.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(jt=>jt).join(" ")}}const Ee="@firebase/app",W=new F.Yd("@firebase/app"),Mn="[DEFAULT]",mt={[Ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,On=new Map;function Wt(ot,Re){try{ot.container.addComponent(Re)}catch(jt){W.debug(`Component ${Re.name} failed to register with FirebaseApp ${ot.name}`,jt)}}function Un(ot,Re){ot.container.addOrOverwriteComponent(Re)}function Vr(ot){const Re=ot.name;if(On.has(Re))return W.debug(`There were multiple attempts to register component ${Re}.`),!1;On.set(Re,ot);for(const jt of Gt.values())Wt(jt,ot);return!0}function dn(ot,Re){return ot.container.getProvider(Re)}function at(ot,Re,jt=Mn){dn(ot,Re).clearInstance(jt)}function xt(){On.clear()}const cr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class rn{constructor(Re,jt,Qt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},jt),this._name=jt.name,this._automaticDataCollectionEnabled=jt.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const si="9.2.0";function bi(ot,Re={}){"object"!=typeof Re&&(Re={name:Re});const jt=Object.assign({name:Mn,automaticDataCollectionEnabled:!1},Re),Qt=jt.name;if("string"!=typeof Qt||!Qt)throw cr.create("bad-app-name",{appName:String(Qt)});const hn=Gt.get(Qt);if(hn){if((0,ce.vZ)(ot,hn.options)&&(0,ce.vZ)(jt,hn.config))return hn;throw cr.create("duplicate-app",{appName:Qt})}const Pt=new ee.H0(Qt);for(const Qe of On.values())Pt.addComponent(Qe);const Ye=new rn(ot,jt,Pt);return Gt.set(Qt,Ye),Ye}function br(ot=Mn){const Re=Gt.get(ot);if(!Re)throw cr.create("no-app",{appName:ot});return Re}function oi(){return Array.from(Gt.values())}function Li(ot){return cs.apply(this,arguments)}function cs(){return(cs=(0,m.Z)(function*(ot){const Re=ot.name;Gt.has(Re)&&(Gt.delete(Re),yield Promise.all(ot.container.getProviders().map(jt=>jt.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function ai(ot,Re,jt){var Qt;let hn=null!==(Qt=mt[ot])&&void 0!==Qt?Qt:ot;jt&&(hn+=`-${jt}`);const Pt=hn.match(/\s|\//),Ye=Re.match(/\s|\//);if(Pt||Ye){const Qe=[`Unable to register library "${hn}" with version "${Re}":`];return Pt&&Qe.push(`library name "${hn}" contains illegal characters (whitespace or "/")`),Pt&&Ye&&Qe.push("and"),Ye&&Qe.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void W.warn(Qe.join(" "))}Vr(new ee.wA(`${hn}-version`,()=>({library:hn,version:Re}),"VERSION"))}function wn(ot,Re){if(null!==ot&&"function"!=typeof ot)throw cr.create("invalid-log-argument");(0,F.Am)(ot,Re)}function lr(ot){(0,F.Ub)(ot)}Vr(new ee.wA("platform-logger",Re=>new te(Re),"PRIVATE")),ai(Ee,"0.7.5",""),ai(Ee,"0.7.5","esm2017"),ai("fire-js","")},6034:(et,Te,V)=>{"use strict";V.d(Te,{wA:()=>F,H0:()=>le});var m=V(4762),ee=V(3854),F=function(){function W(k,L,Q){this.name=k,this.instanceFactory=L,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return W.prototype.setInstantiationMode=function(k){return this.instantiationMode=k,this},W.prototype.setMultipleInstances=function(k){return this.multipleInstances=k,this},W.prototype.setServiceProps=function(k){return this.serviceProps=k,this},W.prototype.setInstanceCreatedCallback=function(k){return this.onInstanceCreated=k,this},W}(),ce="[DEFAULT]",te=function(){function W(k,L){this.name=k,this.container=L,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return W.prototype.get=function(k){var L=this.normalizeInstanceIdentifier(k);if(!this.instancesDeferred.has(L)){var Q=new ee.BH;if(this.instancesDeferred.set(L,Q),this.isInitialized(L)||this.shouldAutoInitialize())try{var K=this.getOrInitializeService({instanceIdentifier:L});K&&Q.resolve(K)}catch(re){}}return this.instancesDeferred.get(L).promise},W.prototype.getImmediate=function(k){var L,Q=this.normalizeInstanceIdentifier(null==k?void 0:k.identifier),K=null!==(L=null==k?void 0:k.optional)&&void 0!==L&&L;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(K)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(re){if(K)return null;throw re}},W.prototype.getComponent=function(){return this.component},W.prototype.setComponent=function(k){var L,Q;if(k.name!==this.name)throw Error("Mismatching Component "+k.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=k,this.shouldAutoInitialize()){if(function(W){return"EAGER"===W.instantiationMode}(k))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(he){}try{for(var K=(0,m.XA)(this.instancesDeferred.entries()),re=K.next();!re.done;re=K.next()){var we=(0,m.CR)(re.value,2),q=we[1],ye=this.normalizeInstanceIdentifier(we[0]);try{var ve=this.getOrInitializeService({instanceIdentifier:ye});q.resolve(ve)}catch(he){}}}catch(he){L={error:he}}finally{try{re&&!re.done&&(Q=K.return)&&Q.call(K)}finally{if(L)throw L.error}}}},W.prototype.clearInstance=function(k){void 0===k&&(k=ce),this.instancesDeferred.delete(k),this.instancesOptions.delete(k),this.instances.delete(k)},W.prototype.delete=function(){return(0,m.mG)(this,void 0,void 0,function(){var k;return(0,m.Jh)(this,function(L){switch(L.label){case 0:return k=Array.from(this.instances.values()),[4,Promise.all((0,m.ev)((0,m.ev)([],(0,m.CR)(k.filter(function(Q){return"INTERNAL"in Q}).map(function(Q){return Q.INTERNAL.delete()}))),(0,m.CR)(k.filter(function(Q){return"_delete"in Q}).map(function(Q){return Q._delete()}))))];case 1:return L.sent(),[2]}})})},W.prototype.isComponentSet=function(){return null!=this.component},W.prototype.isInitialized=function(k){return void 0===k&&(k=ce),this.instances.has(k)},W.prototype.getOptions=function(k){return void 0===k&&(k=ce),this.instancesOptions.get(k)||{}},W.prototype.initialize=function(k){var L,Q;void 0===k&&(k={});var K=k.options,re=void 0===K?{}:K,we=this.normalizeInstanceIdentifier(k.instanceIdentifier);if(this.isInitialized(we))throw Error(this.name+"("+we+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var de=this.getOrInitializeService({instanceIdentifier:we,options:re});try{for(var q=(0,m.XA)(this.instancesDeferred.entries()),ye=q.next();!ye.done;ye=q.next()){var ve=(0,m.CR)(ye.value,2),Ce=ve[1];we===this.normalizeInstanceIdentifier(ve[0])&&Ce.resolve(de)}}catch(Le){L={error:Le}}finally{try{ye&&!ye.done&&(Q=q.return)&&Q.call(q)}finally{if(L)throw L.error}}return de},W.prototype.onInit=function(k,L){var Q,K=this.normalizeInstanceIdentifier(L),re=null!==(Q=this.onInitCallbacks.get(K))&&void 0!==Q?Q:new Set;re.add(k),this.onInitCallbacks.set(K,re);var we=this.instances.get(K);return we&&k(we,K),function(){re.delete(k)}},W.prototype.invokeOnInitCallbacks=function(k,L){var Q,K,re=this.onInitCallbacks.get(L);if(re)try{for(var we=(0,m.XA)(re),de=we.next();!de.done;de=we.next()){var q=de.value;try{q(k,L)}catch(ye){}}}catch(ye){Q={error:ye}}finally{try{de&&!de.done&&(K=we.return)&&K.call(we)}finally{if(Q)throw Q.error}}},W.prototype.getOrInitializeService=function(k){var L=k.instanceIdentifier,Q=k.options,K=void 0===Q?{}:Q,re=this.instances.get(L);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:ie(L),options:K}),this.instances.set(L,re),this.instancesOptions.set(L,K),this.invokeOnInitCallbacks(re,L),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,L,re)}catch(we){}return re||null},W.prototype.normalizeInstanceIdentifier=function(k){return void 0===k&&(k=ce),this.component?this.component.multipleInstances?k:ce:k},W.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},W}();function ie(W){return W===ce?void 0:W}var le=function(){function W(k){this.name=k,this.providers=new Map}return W.prototype.addComponent=function(k){var L=this.getProvider(k.name);if(L.isComponentSet())throw new Error("Component "+k.name+" has already been registered with "+this.name);L.setComponent(k)},W.prototype.addOrOverwriteComponent=function(k){this.getProvider(k.name).isComponentSet()&&this.providers.delete(k.name),this.addComponent(k)},W.prototype.getProvider=function(k){if(this.providers.has(k))return this.providers.get(k);var L=new te(k,this);return this.providers.set(k,L),L},W.prototype.getProviders=function(){return Array.from(this.providers.values())},W}()},5601:(et,Te,V)=>{"use strict";V.d(Te,{in:()=>ee,Yd:()=>Ee,Ub:()=>le,Am:()=>W});const m=[];var ee=(()=>{return(k=ee||(ee={}))[k.DEBUG=0]="DEBUG",k[k.VERBOSE=1]="VERBOSE",k[k.INFO=2]="INFO",k[k.WARN=3]="WARN",k[k.ERROR=4]="ERROR",k[k.SILENT=5]="SILENT",ee;var k})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,te={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ie=(k,L,...Q)=>{if(L<k.logLevel)return;const K=(new Date).toISOString(),re=te[L];if(!re)throw new Error(`Attempted to log a message with an invalid logType (value: ${L})`);console[re](`[${K}]  ${k.name}:`,...Q)};class Ee{constructor(L){this.name=L,this._logLevel=ce,this._logHandler=ie,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(L){if(!(L in ee))throw new TypeError(`Invalid value "${L}" assigned to \`logLevel\``);this._logLevel=L}setLogLevel(L){this._logLevel="string"==typeof L?F[L]:L}get logHandler(){return this._logHandler}set logHandler(L){if("function"!=typeof L)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=L}get userLogHandler(){return this._userLogHandler}set userLogHandler(L){this._userLogHandler=L}debug(...L){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...L),this._logHandler(this,ee.DEBUG,...L)}log(...L){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...L),this._logHandler(this,ee.VERBOSE,...L)}info(...L){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...L),this._logHandler(this,ee.INFO,...L)}warn(...L){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...L),this._logHandler(this,ee.WARN,...L)}error(...L){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...L),this._logHandler(this,ee.ERROR,...L)}}function le(k){m.forEach(L=>{L.setLogLevel(k)})}function W(k,L){for(const Q of m){let K=null;L&&L.level&&(K=F[L.level]),Q.userLogHandler=null===k?null:(re,we,...de)=>{const q=de.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch(ve){return null}}).filter(ye=>ye).join(" ");we>=(null!=K?K:re.logLevel)&&k({level:ee[we].toLowerCase(),message:q,args:de,type:re.name})}}}},3854:(et,Te,V)=>{"use strict";V.d(Te,{BH:()=>K,LL:()=>ge,ZR:()=>Pe,zI:()=>oe,US:()=>ie,tV:()=>W,$s:()=>Ii,r3:()=>dn,Sg:()=>re,ne:()=>Li,vZ:()=>cr,ZB:()=>L,pd:()=>br,m9:()=>ho,z$:()=>we,jU:()=>ye,ru:()=>ve,d:()=>Ce,xb:()=>xt,w1:()=>Fe,hl:()=>De,uI:()=>de,UG:()=>q,b$:()=>he,G6:()=>dt,Mn:()=>Le,xO:()=>si,zd:()=>bi,eu:()=>ne});const ce=function($){const G=[];let j=0;for(let Ae=0;Ae<$.length;Ae++){let se=$.charCodeAt(Ae);se<128?G[j++]=se:se<2048?(G[j++]=se>>6|192,G[j++]=63&se|128):55296==(64512&se)&&Ae+1<$.length&&56320==(64512&$.charCodeAt(Ae+1))?(se=65536+((1023&se)<<10)+(1023&$.charCodeAt(++Ae)),G[j++]=se>>18|240,G[j++]=se>>12&63|128,G[j++]=se>>6&63|128,G[j++]=63&se|128):(G[j++]=se>>12|224,G[j++]=se>>6&63|128,G[j++]=63&se|128)}return G},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,G){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ae=[];for(let se=0;se<$.length;se+=3){const qe=$[se],He=se+1<$.length,kt=He?$[se+1]:0,Jt=se+2<$.length,Zt=Jt?$[se+2]:0;let Xt=(15&kt)<<2|Zt>>6,Yn=63&Zt;Jt||(Yn=64,He||(Xt=64)),Ae.push(j[qe>>2],j[(3&qe)<<4|kt>>4],j[Xt],j[Yn])}return Ae.join("")},encodeString($,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa($):this.encodeByteArray(ce($),G)},decodeString($,G){return this.HAS_NATIVE_SUPPORT&&!G?atob($):function($){const G=[];let j=0,Ae=0;for(;j<$.length;){const se=$[j++];if(se<128)G[Ae++]=String.fromCharCode(se);else if(se>191&&se<224){const qe=$[j++];G[Ae++]=String.fromCharCode((31&se)<<6|63&qe)}else if(se>239&&se<365){const Jt=((7&se)<<18|(63&$[j++])<<12|(63&$[j++])<<6|63&$[j++])-65536;G[Ae++]=String.fromCharCode(55296+(Jt>>10)),G[Ae++]=String.fromCharCode(56320+(1023&Jt))}else{const qe=$[j++],He=$[j++];G[Ae++]=String.fromCharCode((15&se)<<12|(63&qe)<<6|63&He)}}return G.join("")}(this.decodeStringToByteArray($,G))},decodeStringToByteArray($,G){this.init_();const j=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ae=[];for(let se=0;se<$.length;){const qe=j[$.charAt(se++)],kt=se<$.length?j[$.charAt(se)]:0;++se;const Zt=se<$.length?j[$.charAt(se)]:64;++se;const Dt=se<$.length?j[$.charAt(se)]:64;if(++se,null==qe||null==kt||null==Zt||null==Dt)throw Error();Ae.push(qe<<2|kt>>4),64!==Zt&&(Ae.push(kt<<4&240|Zt>>2),64!==Dt&&Ae.push(Zt<<6&192|Dt))}return Ae},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},le=function($){return function($){const G=ce($);return ie.encodeByteArray(G,!0)}($).replace(/\./g,"")},W=function($){try{return ie.decodeString($,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function L($,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return G}for(const j in G)!G.hasOwnProperty(j)||!Q(j)||($[j]=L($[j],G[j]));return $}function Q($){return"__proto__"!==$}class K{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,j)=>{this.resolve=G,this.reject=j})}wrapCallback(G){return(j,Ae)=>{j?this.reject(j):this.resolve(Ae),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(j):G(j,Ae))}}}function re($,G){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ae=G||"demo-project",se=$.iat||0,qe=$.sub||$.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const He=Object.assign({iss:`https://securetoken.google.com/${Ae}`,aud:Ae,iat:se,exp:se+3600,auth_time:se,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},$);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(He)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function ye(){return"object"==typeof self&&self.self===self}function ve(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return we().indexOf("Electron/")>=0}function Fe(){const $=we();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Le(){return we().indexOf("MSAppHost/")>=0}function dt(){return!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){return"object"==typeof indexedDB}function ne(){return new Promise(($,G)=>{try{let j=!0;const Ae="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(Ae);se.onsuccess=()=>{se.result.close(),j||self.indexedDB.deleteDatabase(Ae),$(!0)},se.onupgradeneeded=()=>{j=!1},se.onerror=()=>{var qe;G((null===(qe=se.error)||void 0===qe?void 0:qe.message)||"")}}catch(j){G(j)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Pe extends Error{constructor(G,j,Ae){super(j),this.code=G,this.customData=Ae,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ge.prototype.create)}}class ge{constructor(G,j,Ae){this.service=G,this.serviceName=j,this.errors=Ae}create(G,...j){const Ae=j[0]||{},se=`${this.service}/${G}`,qe=this.errors[G],He=qe?function($,G){return $.replace(Bt,(j,Ae)=>{const se=G[Ae];return null!=se?String(se):`<${Ae}?>`})}(qe,Ae):"Error";return new Pe(se,`${this.serviceName}: ${He} (${se}).`,Ae)}}const Bt=/\{\$([^}]+)}/g;function dn($,G){return Object.prototype.hasOwnProperty.call($,G)}function xt($){for(const G in $)if(Object.prototype.hasOwnProperty.call($,G))return!1;return!0}function cr($,G){if($===G)return!0;const j=Object.keys($),Ae=Object.keys(G);for(const se of j){if(!Ae.includes(se))return!1;const qe=$[se],He=G[se];if(rn(qe)&&rn(He)){if(!cr(qe,He))return!1}else if(qe!==He)return!1}for(const se of Ae)if(!j.includes(se))return!1;return!0}function rn($){return null!==$&&"object"==typeof $}function si($){const G=[];for(const[j,Ae]of Object.entries($))Array.isArray(Ae)?Ae.forEach(se=>{G.push(encodeURIComponent(j)+"="+encodeURIComponent(se))}):G.push(encodeURIComponent(j)+"="+encodeURIComponent(Ae));return G.length?"&"+G.join("&"):""}function bi($){const G={};return $.replace(/^\?/,"").split("&").forEach(Ae=>{if(Ae){const[se,qe]=Ae.split("=");G[decodeURIComponent(se)]=decodeURIComponent(qe)}}),G}function br($){const G=$.indexOf("?");if(!G)return"";const j=$.indexOf("#",G);return $.substring(G,j>0?j:void 0)}function Li($,G){const j=new cs($,G);return j.subscribe.bind(j)}class cs{constructor(G,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{G(this)}).catch(Ae=>{this.error(Ae)})}next(G){this.forEachObserver(j=>{j.next(G)})}error(G){this.forEachObserver(j=>{j.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,j,Ae){let se;if(void 0===G&&void 0===j&&void 0===Ae)throw new Error("Missing Observer.");se=function($,G){if("object"!=typeof $||null===$)return!1;for(const j of["next","error","complete"])if(j in $&&"function"==typeof $[j])return!0;return!1}(G)?G:{next:G,error:j,complete:Ae},void 0===se.next&&(se.next=lr),void 0===se.error&&(se.error=lr),void 0===se.complete&&(se.complete=lr);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(He){}}),this.observers.push(se),qe}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,G)}sendOne(G,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{j(this.observers[G])}catch(Ae){"undefined"!=typeof console&&console.error&&console.error(Ae)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lr(){}function Ii($,G=1e3,j=2){const Ae=G*Math.pow(j,$),se=Math.round(.5*Ae*(Math.random()-.5)*2);return Math.min(144e5,Ae+se)}function ho($){return $&&$._delegate?$._delegate:$}},2329:(et,Te,V)=>{"use strict";V.d(Te,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=V(5452);(0,m.registerVersion)("firebase","9.2.0","app")},7841:(et,Te,V)=>{"use strict";V.d(Te,{Z:()=>m.Z});var m=V(4486);m.Z.registerVersion("firebase","9.2.0","app-compat")},6096:(et,Te,V)=>{"use strict";V.r(Te);var m=V(8239),ee=V(4486),F=V(3854),ce=V(5452),te=V(4762),ie=V(5601),Ee=V(6034);const we=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},de=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},q=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ve=new ie.Yd("@firebase/auth");function he(_,...h){ve.logLevel<=ie.in.ERROR&&ve.error(`Auth (${ce.SDK_VERSION}): ${_}`,...h)}function Ce(_,...h){throw dt(_,...h)}function Fe(_,...h){return dt(_,...h)}function Le(_,h,p){const E=Object.assign(Object.assign({},de()),{[h]:p});return new F.LL("auth","Firebase",E).create(h,{appName:_.name})}function gt(_,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ce(_,"argument-error"),Le(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dt(_,...h){if("string"!=typeof _){const p=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(p,...E)}return q.create(_,...h)}function De(_,h,...p){if(!_)throw dt(h,...p)}function ne(_){const h="INTERNAL ASSERTION FAILED: "+_;throw he(h),new Error(h)}function oe(_,h){_||ne(h)}const fe=new Map;function ue(_){oe(_ instanceof Function,"Expected a class definition");let h=fe.get(_);return h?(oe(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,fe.set(_,h),h)}function it(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Bt(){return"http:"===Mn()||"https:"===Mn()}function Mn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class On{constructor(h,p){this.shortDelay=h,this.longDelay=p,oe(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Bt()||(0,F.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Wt(_,h){oe(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Un{static initialize(h,p,E){this.fetchImpl=h,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},dn=new On(3e4,6e4);function at(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function xt(_,h,p,E){return co.apply(this,arguments)}function co(){return(co=(0,m.Z)(function*(_,h,p,E,A={}){return cr(_,A,()=>{let M={},z={};E&&("GET"===h?z=E:M={body:JSON.stringify(E)});const _e=(0,F.xO)(Object.assign({key:_.config.apiKey},z)).slice(1),Ue=new(Un.headers());return Ue.set("Content-Type","application/json"),Ue.set("X-Client-Version",_._getSdkClientVersion()),_.languageCode&&Ue.set("X-Firebase-Locale",_.languageCode),Un.fetch()(br(_,_.config.apiHost,p,_e),Object.assign({method:h,headers:Ue,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function cr(_,h,p){return rn.apply(this,arguments)}function rn(){return(rn=(0,m.Z)(function*(_,h,p){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},Vr),h);try{const A=new oi(_),M=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const z=yield M.json();if("needConfirmation"in z)throw Li(_,"account-exists-with-different-credential",z);if(M.ok&&!("errorMessage"in z))return z;{const _e=M.ok?z.errorMessage:z.error.message,[Ue,Je]=_e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ue)throw Li(_,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ue)throw Li(_,"email-already-in-use",z);const lt=E[Ue]||Ue.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw Le(_,lt,Je);Ce(_,lt)}}catch(A){if(A instanceof F.ZR)throw A;Ce(_,"network-request-failed")}})).apply(this,arguments)}function si(_,h,p,E){return bi.apply(this,arguments)}function bi(){return(bi=(0,m.Z)(function*(_,h,p,E,A={}){const M=yield xt(_,h,p,E,A);return"mfaPendingCredential"in M&&Ce(_,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function br(_,h,p,E){const A=`${h}${p}?${E}`;return _.config.emulator?Wt(_.config,A):`${_.config.apiScheme}://${A}`}class oi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"timeout")),dn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Li(_,h,p){const E={appName:_.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const A=Fe(_,h,E);return A.customData._tokenResponse=p,A}function ai(){return(ai=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function wn(_,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function lo(_,h){return ot.apply(this,arguments)}function ot(){return(ot=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Re(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function hn(){return(hn=(0,m.Z)(function*(_,h=!1){const p=(0,F.m9)(_),E=yield p.getIdToken(h),A=Ye(E);De(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,z=null==M?void 0:M.sign_in_provider;return{claims:A,token:E,authTime:Re(Pt(A.auth_time)),issuedAtTime:Re(Pt(A.iat)),expirationTime:Re(Pt(A.exp)),signInProvider:z||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Pt(_){return 1e3*Number(_)}function Ye(_){const[h,p,E]=_.split(".");if(void 0===h||void 0===p||void 0===E)return he("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(p);return A?JSON.parse(A):(he("Failed to decode base64 JWT payload"),null)}catch(A){return he("Caught error parsing JWT payload as JSON",A),null}}function mn(_,h){return ls.apply(this,arguments)}function ls(){return(ls=(0,m.Z)(function*(_,h,p=!1){if(p)return h;try{return yield h}catch(E){throw E instanceof F.ZR&&Ii(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Ii({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class fn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),E)}iteration(){var h=this;return(0,m.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class Ir{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Re(this.lastLoginAt),this.creationTime=Re(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ho(_){return $.apply(this,arguments)}function $(){return($=(0,m.Z)(function*(_){var h;const p=_.auth,E=yield _.getIdToken(),A=yield mn(_,lo(p,{idToken:E}));De(null==A?void 0:A.users.length,p,"internal-error");const M=A.users[0];_._notifyReloadListener(M);const z=(null===(h=M.providerUserInfo)||void 0===h?void 0:h.length)?se(M.providerUserInfo):[],_e=Ae(_.providerData,z),lt=!!_.isAnonymous&&!(_.email&&M.passwordHash||(null==_e?void 0:_e.length)),tt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:_e,metadata:new Ir(M.createdAt,M.lastLoginAt),isAnonymous:lt};Object.assign(_,tt)})).apply(this,arguments)}function j(){return(j=(0,m.Z)(function*(_){const h=(0,F.m9)(_);yield ho(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ae(_,h){return[..._.filter(E=>!h.some(A=>A.providerId===E.providerId)),...h]}function se(_){return _.map(h=>{var{providerId:p}=h,E=(0,te._T)(h,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function He(){return(He=(0,m.Z)(function*(_,h){const p=yield cr(_,{},()=>{const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:M}=_.config,z=br(_,A,"/v1/token",`key=${M}`);return Un.fetch()(z,{method:"POST",headers:{"X-Client-Version":_._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:E})});return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){De(h.idToken,"internal-error"),De(void 0!==h.idToken,"internal-error"),De(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(_){const h=Ye(_);return De(h,"internal-error"),De(void 0!==h.exp,"internal-error"),De(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var E=this;return(0,m.Z)(function*(){return De(!E.accessToken||E.refreshToken,h,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var E=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:z}=yield function(_,h){return He.apply(this,arguments)}(h,p);E.updateTokensAndExpiration(A,M,Number(z))})()}updateTokensAndExpiration(h,p,E){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,p){const{refreshToken:E,accessToken:A,expirationTime:M}=p,z=new kt;return E&&(De("string"==typeof E,"internal-error",{appName:h}),z.refreshToken=E),A&&(De("string"==typeof A,"internal-error",{appName:h}),z.accessToken=A),M&&(De("number"==typeof M,"internal-error",{appName:h}),z.expirationTime=M),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return ne("not implemented")}}function Jt(_,h){De("string"==typeof _||void 0===_,"internal-error",{appName:h})}class Zt{constructor(h){var{uid:p,auth:E,stsTokenManager:A}=h,M=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new fn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.metadata=new Ir(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,m.Z)(function*(){const E=yield mn(p,p.stsTokenManager.getToken(p.auth,h));return De(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(h){return function(_){return hn.apply(this,arguments)}(this,h)}reload(){return function(_){return j.apply(this,arguments)}(this)}_assign(h){this!==h&&(De(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Zt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var E=this;return(0,m.Z)(function*(){let A=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),A=!0),p&&(yield ho(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,m.Z)(function*(){const p=yield h.getIdToken();return yield mn(h,function(_,h){return ai.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var E,A,M,z,_e,Ue,Je,lt;const tt=null!==(E=p.displayName)&&void 0!==E?E:void 0,Wn=null!==(A=p.email)&&void 0!==A?A:void 0,pi=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,rr=null!==(z=p.photoURL)&&void 0!==z?z:void 0,Ep=null!==(_e=p.tenantId)&&void 0!==_e?_e:void 0,gu=null!==(Ue=p._redirectEventId)&&void 0!==Ue?Ue:void 0,Cm=null!==(Je=p.createdAt)&&void 0!==Je?Je:void 0,wp=null!==(lt=p.lastLoginAt)&&void 0!==lt?lt:void 0,{uid:wc,emailVerified:bp,isAnonymous:Dm,providerData:Ip,stsTokenManager:Tm}=p;De(wc&&Tm,h,"internal-error");const bc=kt.fromJSON(this.name,Tm);De("string"==typeof wc,h,"internal-error"),Jt(tt,h.name),Jt(Wn,h.name),De("boolean"==typeof bp,h,"internal-error"),De("boolean"==typeof Dm,h,"internal-error"),Jt(pi,h.name),Jt(rr,h.name),Jt(Ep,h.name),Jt(gu,h.name),Jt(Cm,h.name),Jt(wp,h.name);const Xi=new Zt({uid:wc,auth:h,email:Wn,emailVerified:bp,displayName:tt,isAnonymous:Dm,photoURL:rr,phoneNumber:pi,tenantId:Ep,stsTokenManager:bc,createdAt:Cm,lastLoginAt:wp});return Ip&&Array.isArray(Ip)&&(Xi.providerData=Ip.map(P0=>Object.assign({},P0))),gu&&(Xi._redirectEventId=gu),Xi}static _fromIdTokenResponse(h,p,E=!1){return(0,m.Z)(function*(){const A=new kt;A.updateFromServerResponse(p);const M=new Zt({uid:p.localId,auth:h,stsTokenManager:A,isAnonymous:E});return yield ho(M),M})()}}const Dt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,E){var A=this;return(0,m.Z)(function*(){A.storage[p]=E})()}_get(p){var E=this;return(0,m.Z)(function*(){const A=E.storage[p];return void 0===A?null:A})()}_remove(p){var E=this;return(0,m.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return _.type="NONE",_})();function Xt(_,h,p){return`firebase:${_}:${h}:${p}`}class Yn{constructor(h,p,E){this.persistence=h,this.auth=p,this.userKey=E;const{config:A,name:M}=this.auth;this.fullUserKey=Xt(this.userKey,A.apiKey,M),this.fullPersistenceKey=Xt("persistence",A.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,m.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Zt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,m.Z)(function*(){if(p.persistence===h)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,E="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Yn(ue(Dt),h,E);const A=(yield Promise.all(p.map(function(){var Je=(0,m.Z)(function*(lt){if(yield lt._isAvailable())return lt});return function(lt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let M=A[0]||ue(Dt);const z=Xt(E,h.config.apiKey,h.name);let _e=null;for(const Je of p)try{const lt=yield Je._get(z);if(lt){const tt=Zt._fromJSON(h,lt);Je!==M&&(_e=tt),M=Je;break}}catch(lt){}const Ue=A.filter(Je=>Je._shouldAllowMigration);return M._shouldAllowMigration&&Ue.length?(M=Ue[0],_e&&(yield M._set(z,_e.toJSON())),yield Promise.all(p.map(function(){var Je=(0,m.Z)(function*(lt){if(lt!==M)try{yield lt._remove(z)}catch(tt){}});return function(lt){return Je.apply(this,arguments)}}())),new Yn(M,h,E)):new Yn(M,h,E)})()}}function Gu(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(qu(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ho(h))return"Firefox";if(h.includes("silk/"))return"Silk";if($a(h))return"Blackberry";if(Rs(h))return"Webos";if(hl(h))return"Safari";if((h.includes("chrome/")||ja(h))&&!h.includes("edge/"))return"Chrome";if(xs(h))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ho(_=(0,F.z$)()){return/firefox\//i.test(_)}function hl(_=(0,F.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ja(_=(0,F.z$)()){return/crios\//i.test(_)}function qu(_=(0,F.z$)()){return/iemobile/i.test(_)}function xs(_=(0,F.z$)()){return/android/i.test(_)}function $a(_=(0,F.z$)()){return/blackberry/i.test(_)}function Rs(_=(0,F.z$)()){return/webos/i.test(_)}function Ci(_=(0,F.z$)()){return/iphone|ipad|ipod/i.test(_)}function ds(_=(0,F.z$)()){return Ci(_)||xs(_)||Rs(_)||$a(_)||/windows phone/i.test(_)||qu(_)}function Bn(_,h=[]){let p;switch(_){case"Browser":p=Gu((0,F.z$)());break;case"Worker":p=`${Gu((0,F.z$)())}-${_}`;break;default:p=_}const E=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ce.SDK_VERSION}/${E}`}class th{constructor(h,p){this.app=h,this.config=p,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=q,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=p.sdkClientVersion}_initializeWithPersistence(h,p){var E=this;return p&&(this._popupRedirectResolver=ue(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A;E._deleted||(E.persistenceManager=yield Yn.create(E,h),!E._deleted&&((null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)&&(yield E._popupRedirectResolver._initialize(E)),yield E.initializeCurrentUser(p),!E._deleted&&(E._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,m.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p)}})()}initializeCurrentUser(h){var p=this;return(0,m.Z)(function*(){var E;let A=yield p.assertedPersistence.getCurrentUser();if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const M=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,z=null==A?void 0:A._redirectEventId,_e=yield p.tryRedirectSignIn(h);(!M||M===z)&&(null==_e?void 0:_e.user)&&(A=_e.user)}return A?A._redirectEventId?(De(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===A._redirectEventId?p.directlySetCurrentUser(A):p.reloadAndSetCurrentUserOrClear(A)):p.reloadAndSetCurrentUserOrClear(A):p.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var p=this;return(0,m.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(A){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,m.Z)(function*(){try{yield ho(h)}catch(E){if("auth/network-request-failed"!==E.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,m.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){const E=h?(0,F.m9)(h):null;return E&&De(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(h){var p=this;return(0,m.Z)(function*(){if(!p._deleted)return h&&De(p.tenantId===h.tenantId,p,"tenant-id-mismatch"),p.queue((0,m.Z)(function*(){yield p.directlySetCurrentUser(h),p.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,m.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(ue(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new F.LL("auth","Firebase",h())}onAuthStateChanged(h,p,E){return this.registerStateListener(this.authStateSubscription,h,p,E)}onIdTokenChanged(h,p,E){return this.registerStateListener(this.idTokenSubscription,h,p,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var E=this;return(0,m.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(p);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const E=h&&ue(h)||p._popupRedirectResolver;De(E,p,"argument-error"),p.redirectPersistenceManager=yield Yn.create(p,[ue(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,m.Z)(function*(){var E,A;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===h?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,m.Z)(function*(){if(h===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,E,A){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return De(z,this,"internal-error"),z.then(()=>M(this.currentUser)),"function"==typeof p?h.addObserver(p,E,A):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Bn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function $t(_){return(0,F.m9)(_)}class je{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,F.ne)(p=>this.observer=p)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function en(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function hs(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class Jn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ne("not implemented")}_getIdTokenResponse(h){return ne("not implemented")}_linkToIdToken(h,p){return ne("not implemented")}_getReauthenticationResolver(h){return ne("not implemented")}}function pn(_,h){return An.apply(this,arguments)}function An(){return(An=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:resetPassword",at(_,h))})).apply(this,arguments)}function Go(_,h){return pt.apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ha(_,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:update",at(_,h))})).apply(this,arguments)}function Di(){return(Di=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithPassword",at(_,h))})).apply(this,arguments)}function jn(_,h){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:sendOobCode",at(_,h))})).apply(this,arguments)}function Ns(_,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,m.Z)(function*(_,h){return jn(_,h)})).apply(this,arguments)}function zt(_,h){return go.apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(_,h){return jn(_,h)})).apply(this,arguments)}function nh(_,h){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,m.Z)(function*(_,h){return jn(_,h)})).apply(this,arguments)}function rh(_,h){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(_,h){return jn(_,h)})).apply(this,arguments)}function Os(){return(Os=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithEmailLink",at(_,h))})).apply(this,arguments)}function pl(){return(pl=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithEmailLink",at(_,h))})).apply(this,arguments)}class jr extends Jn{constructor(h,p,E,A=null){super("password",E),this._email=h,this._password=p,this._tenantId=A}static _fromEmailAndPassword(h,p){return new jr(h,p,"password")}static _fromEmailAndCode(h,p,E=null){return new jr(h,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function(_,h){return Di.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(_,h){return Os.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ce(h,"internal-error")}})()}_linkToIdToken(h,p){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return Go(h,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(_,h){return pl.apply(this,arguments)}(h,{idToken:p,email:E._email,oobCode:E._password});default:Ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ht(_,h){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithIdp",at(_,h))})).apply(this,arguments)}class $r extends Jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new $r(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ce("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A}=p,M=(0,te._T)(p,["providerId","signInMethod"]);if(!E||!A)return null;const z=new $r(E,A);return z.idToken=M.idToken||void 0,z.accessToken=M.accessToken||void 0,z.secret=M.secret,z.nonce=M.nonce,z.pendingToken=M.pendingToken||null,z}_getIdTokenResponse(h){return Ht(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Ht(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Ht(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,F.xO)(p)}return h}}function Ti(_,h){return gl.apply(this,arguments)}function gl(){return(gl=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:sendVerificationCode",at(_,h))})).apply(this,arguments)}function qo(){return(qo=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithPhoneNumber",at(_,h))})).apply(this,arguments)}function ih(){return(ih=(0,m.Z)(function*(_,h){const p=yield si(_,"POST","/v1/accounts:signInWithPhoneNumber",at(_,h));if(p.temporaryProof)throw Li(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Kg={USER_NOT_FOUND:"user-not-found"};function sh(){return(sh=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithPhoneNumber",at(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Kg)})).apply(this,arguments)}class Wo extends Jn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Wo({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Wo({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function(_,h){return qo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function(_,h){return ih.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function(_,h){return sh.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:E,verificationCode:A}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:E,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:M}=h;return E||p||A||M?new Wo({verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:M}):null}}class zo{constructor(h){var p,E,A,M,z,_e;const Ue=(0,F.zd)((0,F.pd)(h)),Je=null!==(p=Ue.apiKey)&&void 0!==p?p:null,lt=null!==(E=Ue.oobCode)&&void 0!==E?E:null,tt=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ue.mode)&&void 0!==A?A:null);De(Je&&lt&&tt,"argument-error"),this.apiKey=Je,this.operation=tt,this.code=lt,this.continueUrl=null!==(M=Ue.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(z=Ue.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(_e=Ue.tenantId)&&void 0!==_e?_e:null}static parseLink(h){const p=function(_){const h=(0,F.zd)((0,F.pd)(_)).link,p=h?(0,F.zd)((0,F.pd)(h)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(_)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||p||h||_}(h);try{return new zo(p)}catch(E){return null}}}let Ku=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,E){return jr._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const A=zo.parseLink(E);return De(A,"argument-error"),jr._fromEmailAndCode(p,A.code,A.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class yo{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class za extends yo{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ps extends za{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return De("providerId"in p&&"signInMethod"in p,"argument-error"),$r._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return De(h.idToken||h.accessToken,"argument-error"),$r._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ps.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ps.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:M,nonce:z,providerId:_e}=h;if(!E&&!A&&!p&&!M||!_e)return null;try{return new Ps(_e)._credential({idToken:p,accessToken:E,nonce:z,pendingToken:M})}catch(Ue){return null}}}let ml=(()=>{class _ extends za{constructor(){super("facebook.com")}static credential(p){return $r._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Zu=(()=>{class _ extends za{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return $r._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:A}=p;if(!E&&!A)return null;try{return _.credential(E,A)}catch(M){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),yl=(()=>{class _ extends za{constructor(){super("github.com")}static credential(p){return $r._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ko extends Jn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Ht(h,this.buildRequest())}_linkToIdToken(h,p){const E=this.buildRequest();return E.idToken=p,Ht(h,E)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Ht(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A,pendingToken:M}=p;return E&&A&&M&&E===A?new Ko(E,M):null}static _create(h,p){return new Ko(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Ai=(()=>{class _ extends za{constructor(){super("twitter.com")}static credential(p,E){return $r._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=p;if(!E||!A)return null;try{return _.credential(E,A)}catch(M){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function _l(_,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signUp",at(_,h))})).apply(this,arguments)}class Si{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,E,A=!1){return(0,m.Z)(function*(){const M=yield Zt._fromIdTokenResponse(h,E,A),z=oh(E);return new Si({user:M,providerId:z,_tokenResponse:E,operationType:p})})()}static _forOperation(h,p,E){return(0,m.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const A=oh(E);return new Si({user:h,providerId:A,_tokenResponse:E,operationType:p})})()}}function oh(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function vo(){return(vo=(0,m.Z)(function*(_){var h;const p=$t(_);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Si({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield _l(p,{returnSecureToken:!0}),A=yield Si._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Yu extends F.ZR{constructor(h,p,E,A){var M;super(p.code,p.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Yu.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,p,E,A){return new Yu(h,p,E,A)}}function Ka(_,h,p,E){return("reauthenticate"===h?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Yu._fromErrorAndOperation(_,M,h,E):M})}function ah(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function Zo(){return(Zo=(0,m.Z)(function*(_,h){const p=(0,F.m9)(_);yield Vi(!0,p,h);const{providerUserInfo:E}=yield wn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),A=ah(E||[]);return p.providerData=p.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Yo(_,h){return ks.apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(_,h,p=!1){const E=yield mn(_,h._linkToIdToken(_.auth,yield _.getIdToken()),p);return Si._forOperation(_,"link",E)})).apply(this,arguments)}function Vi(_,h,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,m.Z)(function*(_,h,p){yield ho(h);const A=!1===_?"provider-already-linked":"no-such-provider";De(ah(h.providerData).has(p)===_,h.auth,A)})).apply(this,arguments)}function Qo(_,h){return sn.apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(_,h,p=!1){const{auth:E}=_,A="reauthenticate";try{const M=yield mn(_,Ka(E,A,h,_),p);De(M.idToken,E,"internal-error");const z=Ye(M.idToken);De(z,E,"internal-error");const{sub:_e}=z;return De(_.uid===_e,E,"user-mismatch"),Si._forOperation(_,A,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Ce(E,"user-mismatch"),M}})).apply(this,arguments)}function Qu(_,h){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,m.Z)(function*(_,h,p=!1){const E="signIn",A=yield Ka(_,E,h),M=yield Si._fromIdTokenResponse(_,E,A);return p||(yield _._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Ju(_,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,m.Z)(function*(_,h){return Qu($t(_),h)})).apply(this,arguments)}function uh(_,h){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,m.Z)(function*(_,h){const p=(0,F.m9)(_);return yield Vi(!1,p,h.providerId),Yo(p,h)})).apply(this,arguments)}function Za(_,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,m.Z)(function*(_,h){return Qo((0,F.m9)(_),h)})).apply(this,arguments)}function Qf(_,h){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,m.Z)(function*(_,h){return si(_,"POST","/v1/accounts:signInWithCustomToken",at(_,h))})).apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(_,h){const p=$t(_),E=yield Qf(p,{token:h,returnSecureToken:!0}),A=yield Si._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class bo{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Xo._fromServerResponse(h,p):Ce(h,"internal-error")}}class Xo extends bo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Xo(p)}}function Ya(_,h,p){var E;De((null===(E=p.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),De(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(De(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(De(p.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function ea(){return(ea=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_),A={requestType:"PASSWORD_RESET",email:h};p&&Ya(E,A,p),yield zt(E,A)})).apply(this,arguments)}function ut(){return(ut=(0,m.Z)(function*(_,h,p){yield pn((0,F.m9)(_),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ps(){return(ps=(0,m.Z)(function*(_,h){yield Ha((0,F.m9)(_),{oobCode:h})})).apply(this,arguments)}function ta(_,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,m.Z)(function*(_,h){const p=(0,F.m9)(_),E=yield pn(p,{oobCode:h}),A=E.requestType;switch(De(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":De(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":De(E.mfaInfo,p,"internal-error");default:De(E.email,p,"internal-error")}let M=null;return E.mfaInfo&&(M=bo._fromServerResponse($t(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function gs(){return(gs=(0,m.Z)(function*(_,h){const{data:p}=yield ta((0,F.m9)(_),h);return p.email})).apply(this,arguments)}function Se(){return(Se=(0,m.Z)(function*(_,h,p){const E=$t(_),A=yield _l(E,{returnSecureToken:!0,email:h,password:p}),M=yield Si._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}function yn(){return(yn=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_),A={requestType:"EMAIL_SIGNIN",email:h};De(p.handleCodeInApp,E,"argument-error"),p&&Ya(E,A,p),yield nh(E,A)})).apply(this,arguments)}function ui(){return(ui=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_),A=Ku.credentialWithLink(h,p||it());return De(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ju(E,A)})).apply(this,arguments)}function Qa(_,h){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:createAuthUri",at(_,h))})).apply(this,arguments)}function tc(){return(tc=(0,m.Z)(function*(_,h){const E={identifier:h,continueUri:Bt()?it():"http://localhost"},{signinMethods:A}=yield Qa((0,F.m9)(_),E);return A||[]})).apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(_,h){const p=(0,F.m9)(_),A={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Ya(p.auth,A,h);const{email:M}=yield Ns(p.auth,A);M!==_.email&&(yield _.reload())})).apply(this,arguments)}function Tr(){return(Tr=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};p&&Ya(E.auth,M,p);const{email:z}=yield rh(E.auth,M);z!==_.email&&(yield _.reload())})).apply(this,arguments)}function nc(_,h){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(_,h){return xt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ja(){return(Ja=(0,m.Z)(function*(_,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const E=(0,F.m9)(_),M={idToken:yield E.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},z=yield mn(E,nc(E.auth,M));E.displayName=z.displayName||null,E.photoURL=z.photoUrl||null;const _e=E.providerData.find(({providerId:Ue})=>"password"===Ue);_e&&(_e.displayName=E.displayName,_e.photoURL=E.photoURL),yield E._updateTokensIfNecessary(z)})).apply(this,arguments)}function Xa(_,h,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,m.Z)(function*(_,h,p){const{auth:E}=_,M={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(M.email=h),p&&(M.password=p);const z=yield mn(_,Go(E,M));yield _._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Co{constructor(h,p,E={}){this.isNewUser=h,this.providerId=p,this.profile=E}}class wl extends Co{constructor(h,p,E,A){super(h,p,E),this.username=A}}class Jf extends Co{constructor(h,p){super(h,"facebook.com",p)}}class ph extends wl{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class Do extends Co{constructor(h,p){super(h,"google.com",p)}}class gh extends wl{constructor(h,p,E){super(h,"twitter.com",p,E)}}function ic(_){const{user:h,_tokenResponse:p}=_;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(_){var h,p;if(!_)return null;const{providerId:E}=_,A=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},M=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const z=null===(p=null===(h=Ye(_.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new Co(M,"anonymous"!==z&&"custom"!==z?z:null)}if(!E)return null;switch(E){case"facebook.com":return new Jf(M,A);case"github.com":return new ph(M,A);case"google.com":return new Do(M,A);case"twitter.com":return new gh(M,A,_.screenName||null);case"custom":case"anonymous":return new Co(M,null);default:return new Co(M,E,A)}}(p)}class ys{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ys("enroll",h)}static _fromMfaPendingCredential(h){return new ys("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,E;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ys._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return ys._fromIdtoken(h.multiFactorSession.idToken)}return null}}class bl{constructor(h,p,E){this.session=h,this.hints=p,this.signInResolver=E}static _fromError(h,p){const E=$t(h),A=p.customData._serverResponse,M=(A.mfaInfo||[]).map(_e=>bo._fromServerResponse(E,_e));De(A.mfaPendingCredential,E,"internal-error");const z=ys._fromMfaPendingCredential(A.mfaPendingCredential);return new bl(z,M,function(){var _e=(0,m.Z)(function*(Ue){const Je=yield Ue._process(E,z);delete A.mfaInfo,delete A.mfaPendingCredential;const lt=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(p.operationType){case"signIn":const tt=yield Si._fromIdTokenResponse(E,p.operationType,lt);return yield E._updateCurrentUser(tt.user),tt;case"reauthenticate":return De(p.user,E,"internal-error"),Si._forOperation(p.user,p.operationType,lt);default:Ce(E,"internal-error")}});return function(Ue){return _e.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,m.Z)(function*(){return p.signInResolver(h)})()}}function yh(_,h){return xt(_,"POST","/v2/accounts/mfaEnrollment:start",at(_,h))}class sa{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>bo._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new sa(h)}getSession(){var h=this;return(0,m.Z)(function*(){return ys._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var E=this;return(0,m.Z)(function*(){const A=h,M=yield E.getSession(),z=yield mn(E.user,A._process(E.user.auth,M,p));return yield E.user._updateTokensIfNecessary(z),E.user.reload()})()}unenroll(h){var p=this;return(0,m.Z)(function*(){const E="string"==typeof h?h:h.uid,A=yield p.user.getIdToken(),M=yield mn(p.user,function(_,h){return xt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",at(_,h))}(p.user.auth,{idToken:A,mfaEnrollmentId:E}));p.enrolledFactors=p.enrolledFactors.filter(({uid:z})=>z!==E),yield p.user._updateTokensIfNecessary(M);try{yield p.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const oa=new WeakMap,To="__sak";class Dl{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(To,"1"),this.storage.removeItem(To),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const sc=(()=>{class _ extends Dl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,F.z$)();return hl(_)||Ci(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=ds(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),M=this.localCache[E];A!==M&&p(E,M,A)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((_e,Ue,Je)=>{this.notifyListeners(_e,Je)});const A=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _e=this.storage.getItem(A);if(p.newValue!==_e)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!E)return}const M=()=>{const _e=this.storage.getItem(A);!E&&this.localCache[A]===_e||this.notifyListeners(A,_e)},z=this.storage.getItem(A);(0,F.w1)()&&10===document.documentMode&&z!==p.newValue&&p.newValue!==p.oldValue?setTimeout(M,10):M()}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const M of Array.from(A))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var A=()=>super._set,M=this;return(0,m.Z)(function*(){yield A().call(M,p,E),M.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,A=this;return(0,m.Z)(function*(){const M=yield E().call(A,p);return A.localCache[p]=JSON.stringify(M),M})()}_remove(p){var E=()=>super._remove,A=this;return(0,m.Z)(function*(){yield E().call(A,p),delete A.localCache[p]})()}}return _.type="LOCAL",_})(),_s=(()=>{class _ extends Dl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return _.type="SESSION",_})();let Us=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(M=>M.isListeningto(p));if(E)return E;const A=new _(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,m.Z)(function*(){const A=p,{eventId:M,eventType:z,data:_e}=A.data,Ue=E.handlersMap[z];if(!(null==Ue?void 0:Ue.size))return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:z});const Je=Array.from(Ue).map(function(){var tt=(0,m.Z)(function*(Wn){return Wn(A.origin,_e)});return function(Wn){return tt.apply(this,arguments)}}()),lt=yield function(_){return Promise.all(_.map(function(){var h=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return h.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:M,eventType:z,response:lt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function tu(_="",h=10){let p="";for(let E=0;E<h;E++)p+=Math.floor(10*Math.random());return _+p}class em{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,E=50){var A=this;return(0,m.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let z,_e;return new Promise((Ue,Je)=>{const lt=tu("",20);M.port1.start();const tt=setTimeout(()=>{Je(new Error("unsupported_event"))},E);_e={messageChannel:M,onMessage(Wn){const pi=Wn;if(pi.data.eventId===lt)switch(pi.data.status){case"ack":clearTimeout(tt),z=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ue(pi.data.response);break;default:clearTimeout(tt),clearTimeout(z),Je(new Error("invalid_response"))}}},A.handlers.add(_e),M.port1.addEventListener("message",_e.onMessage),A.target.postMessage({eventType:h,eventId:lt,data:p},[M.port2])}).finally(()=>{_e&&A.removeMessageHandler(_e)})})()}}function an(){return window}function oc(){return void 0!==an().WorkerGlobalScope&&"function"==typeof an().importScripts}function ac(){return(ac=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const vh="firebaseLocalStorageDb",ou="firebaseLocalStorage",aa="fbase_key";class cc{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ua(_,h){return _.transaction([ou],h?"readwrite":"readonly").objectStore(ou)}function bn(){const _=indexedDB.open(vh,1);return new Promise((h,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(ou,{keyPath:aa})}catch(A){p(A)}}),_.addEventListener("success",(0,m.Z)(function*(){const E=_.result;E.objectStoreNames.contains(ou)?h(E):(E.close(),yield function(){const _=indexedDB.deleteDatabase(vh);return new cc(_).toPromise()}(),h(yield bn()))}))})}function un(_,h,p){return rt.apply(this,arguments)}function rt(){return(rt=(0,m.Z)(function*(_,h,p){const E=ua(_,!0).put({[aa]:h,value:p});return new cc(E).toPromise()})).apply(this,arguments)}function Ao(){return(Ao=(0,m.Z)(function*(_,h){const p=ua(_,!1).get(h),E=yield new cc(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function er(_,h){const p=ua(_,!0).delete(h);return new cc(p).toPromise()}const ca=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield bn()),p.db})()}_withRetries(p){var E=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const M=yield E._openDb();return yield p(M)}catch(M){if(A++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return oc()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=Us._getInstance(oc()?self:null),p.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(A,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(A,M){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var E,A;if(p.activeServiceWorker=yield function(){return ac.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new em(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);!M||(null===(E=M[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=M[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield bn();return yield un(p,To,"1"),yield er(p,To),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(M=>un(M,p,E)),A.localCache[p]=E,A.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,m.Z)(function*(){const A=yield E._withRetries(M=>function(_,h){return Ao.apply(this,arguments)}(M,p));return E.localCache[p]=A,A})()}_remove(p){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(A=>er(A,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const E=yield p._withRetries(z=>{const _e=ua(z,!1).getAll();return new cc(_e).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:z,value:_e}of E)M.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(_e)&&(p.notifyListeners(z,_e),A.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!M.has(z)&&(p.notifyListeners(z,null),A.push(z));return A})()}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const M of Array.from(A))M(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Eh(_,h){return xt(_,"POST","/v2/accounts/mfaSignIn:start",at(_,h))}function Sl(){return(Sl=(0,m.Z)(function*(_){return(yield xt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function So(_){return new Promise((h,p)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=h,E.onerror=A=>{const M=Fe("internal-error");M.customData=A,p(M)},E.type="text/javascript",E.charset="UTF-8",function(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(E)})}function lc(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Bs=1e12;class xo{constructor(h){this.auth=h,this.counter=Bs,this._widgets=new Map}render(h,p){const E=this.counter;return this._widgets.set(E,new uu(h,this.auth.name,p||{})),this.counter++,E}reset(h){var p;const E=h||Bs;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Bs))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,m.Z)(function*(){var E;return null===(E=p._widgets.get(h||Bs))||void 0===E||E.execute(),""})()}}class uu{constructor(h,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;De(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}();const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gi=lc("rcb"),pr=new On(3e4,6e4);class hc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!an().grecaptcha}load(h,p=""){return De((_=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(an().grecaptcha):new Promise((E,A)=>{const M=an().setTimeout(()=>{A(Fe(h,"network-request-failed"))},pr.get());an()[Gi]=()=>{an().clearTimeout(M),delete an()[Gi];const _e=an().grecaptcha;if(!_e)return void A(Fe(h,"internal-error"));const Ue=_e.render;_e.render=(Je,lt)=>{const tt=Ue(Je,lt);return this.counter++,tt},this.hostLanguage=p,E(_e)},So(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Gi,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),A(Fe(h,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!an().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xi{load(h){return(0,m.Z)(function*(){return new xo(h)})()}clearedOneInstance(){}}const tr="recaptcha",np={theme:"light",type:"image"};class Ih{constructor(h,p=Object.assign({},np),E){this.parameters=p,this.type=tr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$t(E),this.isInvisible="invisible"===this.parameters.size,De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;De(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xi:new hc,this.validateStartingState()}verify(){var h=this;return(0,m.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(p)||new Promise(M=>{const z=_e=>{!_e||(h.tokenChangeListeners.delete(z),M(_e))};h.tokenChangeListeners.add(z),h.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){De(!this.parameters.sitekey,this.auth,"argument-error"),De(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),De("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof h)h(p);else if("string"==typeof h){const E=an()[h];"function"==typeof E&&E(p)}}}assertNotDestroyed(){De(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,m.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,m.Z)(function*(){De(Bt()&&!oc(),h.auth,"internal-error"),yield function(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function(_){return Sl.apply(this,arguments)}(h.auth);De(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return De(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class fc{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Wo._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Rl(){return(Rl=(0,m.Z)(function*(_,h,p){const E=$t(_),A=yield lu(E,h,(0,F.m9)(p));return new fc(A,M=>Ju(E,M))})).apply(this,arguments)}function cu(){return(cu=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_);yield Vi(!1,E,"phone");const A=yield lu(E.auth,h,(0,F.m9)(p));return new fc(A,M=>uh(E,M))})).apply(this,arguments)}function Nl(){return(Nl=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_),A=yield lu(E.auth,h,(0,F.m9)(p));return new fc(A,M=>Za(E,M))})).apply(this,arguments)}function lu(_,h,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,m.Z)(function*(_,h,p){var E;const A=yield p.verify();try{let M;if(De("string"==typeof A,_,"argument-error"),De(p.type===tr,_,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const z=M.session;if("phoneNumber"in M)return De("enroll"===z.type,_,"internal-error"),(yield yh(_,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{De("signin"===z.type,_,"internal-error");const _e=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return De(_e,_,"missing-multi-factor-info"),(yield Eh(_,{mfaPendingCredential:z.credential,mfaEnrollmentId:_e,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Ti(_,{phoneNumber:M.phoneNumber,recaptchaToken:A});return z}}finally{p._reset()}})).apply(this,arguments)}function Ml(){return(Ml=(0,m.Z)(function*(_,h){yield Yo((0,F.m9)(_),h)})).apply(this,arguments)}let ci=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=$t(p)}verifyPhoneNumber(p,E){return lu(this.auth,p,(0,F.m9)(E))}static credential(p,E){return Wo._fromVerification(p,E)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:A}=p;return E&&A?Wo._fromTokenResponse(E,A):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function js(_,h){return h?ue(h):(De(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ha extends Jn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ht(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Ht(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Ht(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Wr(_){return Qu(_.auth,new ha(_),_.bypassAuthState)}function _n(_){const{auth:h,user:p}=_;return De(p,h,"internal-error"),Qo(p,new ha(_),_.bypassAuthState)}function fa(_){return pa.apply(this,arguments)}function pa(){return(pa=(0,m.Z)(function*(_){const{auth:h,user:p}=_;return De(p,h,"internal-error"),Yo(p,new ha(_),_.bypassAuthState)})).apply(this,arguments)}class ga{constructor(h,p,E,A,M=!1){this.auth=h,this.resolver=E,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,m.Z)(function*(E,A){h.pendingPromise={resolve:E,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(E,A){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:M,tenantId:z,error:_e,type:Ue}=h;if(_e)return void p.reject(_e);const Je={auth:p.auth,requestUri:E,sessionId:A,tenantId:z||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ue)(Je))}catch(lt){p.reject(lt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Wr;case"linkViaPopup":case"linkViaRedirect":return fa;case"reauthViaPopup":case"reauthViaRedirect":return _n;default:Ce(this.auth,"internal-error")}}resolve(h){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ol=new On(2e3,1e4);function di(){return(di=(0,m.Z)(function*(_,h,p){const E=$t(_);gt(_,h,yo);const A=js(E,p);return new kl(E,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Wi(){return(Wi=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_);gt(E.auth,h,yo);const A=js(E.auth,p);return new kl(E.auth,"reauthViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}function Pl(){return(Pl=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_);gt(E.auth,h,yo);const A=js(E.auth,p);return new kl(E.auth,"linkViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}let kl=(()=>{class _ extends ga{constructor(p,E,A,M,z){super(p,E,M,z),this.provider=A,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const E=yield p.execute();return De(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,m.Z)(function*(){oe(1===p.filter.length,"Popup operations only handle one event");const E=tu();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(Fe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ol.get())};p()}}return _.currentPopupAction=null,_})();const Es=new Map;class hi extends ga{constructor(h,p,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,m.Z)(function*(){let E=Es.get(p.auth._key());if(!E){try{const M=(yield function(_,h){return I.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;E=()=>Promise.resolve(M)}catch(A){E=()=>Promise.reject(A)}Es.set(p.auth._key(),E)}return p.bypassAuthState||Es.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(E,h);if("unknown"!==h.type){if(h.eventId){const A=yield E.auth._redirectUserForId(h.eventId);if(A)return E.user=A,p().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function I(){return(I=(0,m.Z)(function*(_,h){const p=pe(h),E=Z(_);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(p));return yield E._remove(p),A})).apply(this,arguments)}function D(_,h){return x.apply(this,arguments)}function x(){return(x=(0,m.Z)(function*(_,h){return Z(_)._set(pe(h),"true")})).apply(this,arguments)}function Z(_){return ue(_._redirectPersistence)}function pe(_){return Xt("pendingRedirect",_.config.apiKey,_.name)}function Ge(){return(Ge=(0,m.Z)(function*(_,h,p){const E=$t(_);gt(_,h,yo);const A=js(E,p);return yield D(A,E),A._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function qn(){return(qn=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_);gt(E.auth,h,yo);const A=js(E.auth,p);yield D(A,E.auth);const M=yield Fl(E);return A._openRedirect(E.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function Ni(){return(Ni=(0,m.Z)(function*(_,h,p){const E=(0,F.m9)(_);gt(E.auth,h,yo);const A=js(E.auth,p);yield Vi(!1,E,h.providerId),yield D(A,E.auth);const M=yield Fl(E);return A._openRedirect(E.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(_,h){return yield $t(_)._initializationPromise,zi(_,h,!1)})).apply(this,arguments)}function zi(_,h){return $s.apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(_,h,p=!1){const E=$t(_),A=js(E,h),z=yield new hi(E,A,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield E._persistUserIfCurrent(z.user),yield E._setRedirectUser(null,h)),z})).apply(this,arguments)}function Fl(_){return gc.apply(this,arguments)}function gc(){return(gc=(0,m.Z)(function*(_){const h=tu(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Ah{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(p=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ya(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var E;if(h.error&&!ya(h)){const A=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Fe(this.auth,A))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const E=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ws(h))}saveEventToCache(h){this.cachedEventUids.add(ws(h)),this.lastProcessedEventTime=Date.now()}}function ws(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function ya({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Pn(_){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,m.Z)(function*(_,h={}){return xt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const x0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sr=/^https?/;function xh(){return(xh=(0,m.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Pn(_);for(const p of h)try{if(sp(p))return}catch(E){}Ce(_,"unauthorized-domain")})).apply(this,arguments)}function sp(_){const h=it(),{protocol:p,hostname:E}=new URL(h);if(_.startsWith("chrome-extension://")){const z=new URL(_);return""===z.hostname&&""===E?"chrome-extension:"===p&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===E}if(!Sr.test(p))return!1;if(x0.test(_))return E===_;const A=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const P_=new On(3e4,6e4);function mr(){const _=an().___jsl;if(null==_?void 0:_.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Ki=null;function Rh(_){return Ki=Ki||function(_){return new Promise((h,p)=>{var E,A,M;function z(){mr(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{mr(),p(Fe(_,"network-request-failed"))},timeout:P_.get()})}if(null===(A=null===(E=an().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(M=an().gapi)||void 0===M?void 0:M.load)){const _e=lc("iframefcb");return an()[_e]=()=>{gapi.load?z():p(Fe(_,"network-request-failed"))},So(`https://apis.google.com/js/api.js?onload=${_e}`)}z()}}).catch(h=>{throw Ki=null,h})}(_),Ki}const Ro=new On(5e3,15e3),Nh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true"},Mh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function op(_){const h=_.config;De(h.authDomain,_,"auth-domain-config-required");const p=h.emulator?Wt(h,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:_.name,v:ce.SDK_VERSION},A=Mh.get(_.config.apiHost);A&&(E.eid=A);const M=_._getFrameworks();return M.length&&(E.fw=M.join(",")),`${p}?${(0,F.xO)(E).slice(1)}`}function yc(){return(yc=(0,m.Z)(function*(_){const h=yield Rh(_),p=an().gapi;return De(p,_,"internal-error"),h.open({where:document.body,url:op(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Nh,dontclear:!0},E=>new Promise(function(){var A=(0,m.Z)(function*(M,z){yield E.restyle({setHideOnLeave:!1});const _e=Fe(_,"network-request-failed"),Ue=an().setTimeout(()=>{z(_e)},Ro.get());function Je(){an().clearTimeout(Ue),M(E)}E.ping(Je).then(Je,()=>{z(_e)})});return function(M,z){return A.apply(this,arguments)}}()))})).apply(this,arguments)}const Zi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class im{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Hs(_,h,p,E,A,M){De(_.config.authDomain,_,"auth-domain-config-required"),De(_.config.apiKey,_,"invalid-api-key");const z={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:E,v:ce.SDK_VERSION,eventId:A};if(h instanceof yo){h.setDefaultLanguage(_.languageCode),z.providerId=h.providerId||"",(0,F.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ue,Je]of Object.entries(M||{}))z[Ue]=Je}if(h instanceof za){const Ue=h.getScopes().filter(Je=>""!==Je);Ue.length>0&&(z.scopes=Ue.join(","))}_.tenantId&&(z.tid=_.tenantId);const _e=z;for(const Ue of Object.keys(_e))void 0===_e[Ue]&&delete _e[Ue];return`${function({config:_}){return _.emulator?Wt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,F.xO)(_e).slice(1)}`}const bs="webStorageSupport";class du extends class{constructor(h){this.factorId=h}_process(h,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,E);case"signin":return this._finalizeSignIn(h,p.credential);default:return ne("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new du(h)}_finalizeEnroll(h,p,E){return function(_,h){return xt(_,"POST","/v2/accounts/mfaEnrollment:finalize",at(_,h))}(h,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function(_,h){return xt(_,"POST","/v2/accounts/mfaSignIn:finalize",at(_,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fh=(()=>{class _{constructor(){}static assertion(p){return du._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var _,up="@firebase/auth";class am{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(E=>{var A;h((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hu(){return window}function Yi(){return(Yi=(0,m.Z)(function*(_,h,p){var E;const{BuildInfo:A}=hu();oe(h.sessionId,"AuthEvent did not contain a session ID");const M=yield B_(h.sessionId),z={};return Ci()?z.ibi=A.packageName:xs()?z.apn=A.packageName:Ce(_,"operation-not-supported-in-this-environment"),A.displayName&&(z.appDisplayName=A.displayName),z.sessionId=M,Hs(_,p,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,z)})).apply(this,arguments)}function _c(){return(_c=(0,m.Z)(function*(_){const{BuildInfo:h}=hu(),p={};Ci()?p.iosBundleId=h.packageName:xs()?p.androidPackageName=h.packageName:Ce(_,"operation-not-supported-in-this-environment"),yield Pn(_,p)})).apply(this,arguments)}function Lh(){return(Lh=(0,m.Z)(function*(_,h,p){const{cordova:E}=hu();let A=()=>{};try{yield new Promise((M,z)=>{let _e=null;function Ue(){var tt;M();const Wn=null===(tt=E.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Wn&&Wn(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Je(){_e||(_e=window.setTimeout(()=>{z(Fe(_,"redirect-cancelled-by-user"))},2e3))}function lt(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Ue),document.addEventListener("resume",Je,!1),xs()&&document.addEventListener("visibilitychange",lt,!1),A=()=>{h.removePassiveListener(Ue),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",lt,!1),_e&&window.clearTimeout(_e)}})}finally{A()}})).apply(this,arguments)}function B_(_){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,m.Z)(function*(_){const h=cm(_),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function cm(_){if(oe(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),p=new Uint8Array(h);for(let E=0;E<_.length;E++)p[E]=_.charCodeAt(E);return p}_="Browser",(0,ce._registerComponent)(new Ee.wA("auth",(h,{options:p})=>{const E=h.getProvider("app").getImmediate(),{apiKey:A,authDomain:M}=E.options;return(z=>{De(A&&!A.includes(":"),"invalid-api-key",{appName:z.name}),De(!(null==M?void 0:M.includes(":")),"argument-error",{appName:z.name});const _e={apiKey:A,authDomain:M,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bn(_)},Ue=new th(z,_e);return function(_,h){const p=(null==h?void 0:h.persistence)||[],E=(Array.isArray(p)?p:[p]).map(ue);(null==h?void 0:h.errorMap)&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(Ue,p),Ue})(E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,E)=>{h.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new Ee.wA("auth-internal",h=>{const p=$t(h.getProvider("auth").getImmediate());return new am(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(up,"0.19.0",void 0),(0,ce.registerVersion)(up,"0.19.0","esm2017");class Vh extends Ah{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,m.Z)(function*(){yield h.initPromise})()}}function lp(_){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,m.Z)(function*(_){const h=yield Ws()._get(Ul(_));return h&&(yield Ws()._remove(Ul(_))),h})).apply(this,arguments)}function qs(){const _=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*h.length);_.push(h.charAt(E))}return _.join("")}function Ws(){return ue(sc)}function Ul(_){return Xt("authEvent",_.config.apiKey,_.name)}function dp(_){if(!(null==_?void 0:_.includes("?")))return{};const[h,...p]=_.split("?");return(0,F.zd)(p.join("?"))}function jl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fe("no-auth-event")}}function $h(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function fp(_=(0,F.z$)()){return!("file:"!==$h()&&"ionic:"!==$h()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function $l(){try{const _=self.localStorage,h=tu();if(_)return _.setItem(h,"1"),_.removeItem(h),!function(_=(0,F.z$)()){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,F.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,F.hl)()}catch(_){return Gh()&&(0,F.hl)()}return!1}function Gh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function vn(){return("http:"===$h()||"https:"===$h()||(0,F.ru)()||fp())&&!((0,F.b$)()||(0,F.UG)())&&$l()&&!Gh()}function _m(){return fp()&&"undefined"!=typeof document}function Hl(){return(Hl=(0,m.Z)(function*(){return!!_m()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const xr={LOCAL:"local",NONE:"none",SESSION:"session"},Qi=De,Em="persistence";function pp(_){return gp.apply(this,arguments)}function gp(){return(gp=(0,m.Z)(function*(_){yield _._initializationPromise;const h=H_(),p=Xt(Em,_.config.apiKey,_.name);(null==h?void 0:h.sessionStorage)&&h.sessionStorage.setItem(p,_._getPersistence())})).apply(this,arguments)}function H_(){return"undefined"!=typeof window?window:null}const Po=De;class ln{constructor(){this.browserResolver=ue(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_s,this._completeRedirectFn=zi}_openPopup(h,p,E,A){var M=this;return(0,m.Z)(function*(){var z;oe(null===(z=M.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const _e=Hs(h,p,E,it(),A);return function(_,h,p,E=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),z=Math.max((window.screen.availWidth-E)/2,0).toString();let _e="";const Ue=Object.assign(Object.assign({},Zi),{width:E.toString(),height:A.toString(),top:M,left:z}),Je=(0,F.z$)().toLowerCase();p&&(_e=ja(Je)?"_blank":p),Ho(Je)&&(h=h||"http://localhost",Ue.scrollbars="yes");const lt=Object.entries(Ue).reduce((Wn,[pi,rr])=>`${Wn}${pi}=${rr},`,"");if(function(_=(0,F.z$)()){var h;return Ci(_)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==_e)return function(_,h){const p=document.createElement("a");p.href=_,p.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(h||"",_e),new im(null);const tt=window.open(h||"",_e,lt);De(tt,_,"popup-blocked");try{tt.focus()}catch(Wn){}return new im(tt)}(h,_e,tu())})()}_openRedirect(h,p,E,A){var M=this;return(0,m.Z)(function*(){return yield M._originValidation(h),_=Hs(h,p,E,it(),A),an().location.href=_,new Promise(()=>{});var _})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:A,promise:M}=this.eventManagers[p];return A?Promise.resolve(A):(oe(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(h);return this.eventManagers[p]={promise:E},E}initAndGetManager(h){var p=this;return(0,m.Z)(function*(){const E=yield function(_){return yc.apply(this,arguments)}(h),A=new Ah(h);return E.register("authEvent",M=>(De(null==M?void 0:M.authEvent,h,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:A},p.iframes[h._key()]=E,A})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(bs,{type:bs},A=>{var M;const z=null===(M=null==A?void 0:A[0])||void 0===M?void 0:M[bs];void 0!==z&&p(!!z),Ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return xh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ds()||hl()||Ci()}}),this.cordovaResolver=ue(class{constructor(){this._redirectPersistence=_s,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=zi}_initialize(h){var p=this;return(0,m.Z)(function*(){const E=h._key();let A=p.eventManagers.get(E);return A||(A=new Vh(h),p.eventManagers.set(E,A),p.attachCallbackListeners(h,A)),A})()}_openPopup(h){Ce(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,E,A){var M=this;return(0,m.Z)(function*(){!function(_){var h,p,E,A,M,z,_e,Ue,Je,lt;const tt=hu();De("function"==typeof(null===(h=null==tt?void 0:tt.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),De(void 0!==(null===(p=null==tt?void 0:tt.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),De("function"==typeof(null===(M=null===(A=null===(E=null==tt?void 0:tt.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===M?void 0:M.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(Ue=null===(_e=null===(z=null==tt?void 0:tt.cordova)||void 0===z?void 0:z.plugins)||void 0===_e?void 0:_e.browsertab)||void 0===Ue?void 0:Ue.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),De("function"==typeof(null===(lt=null===(Je=null==tt?void 0:tt.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===lt?void 0:lt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield M._initialize(h);yield z.initialized(),z.resetRedirect(),Es.clear(),yield M._originValidation(h);const _e=function(_,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:qs(),postBody:null,tenantId:_.tenantId,error:Fe(_,"no-auth-event")}}(h,E,A);yield function(_,h){return Ws()._set(Ul(_),h)}(h,_e);const Ue=yield function(_,h,p){return Yi.apply(this,arguments)}(h,_e,p),Je=yield function(_){const{cordova:h}=hu();return new Promise(p=>{h.plugins.browsertab.isAvailable(E=>{let A=null;E?h.plugins.browsertab.openUrl(_):A=h.InAppBrowser.open(_,function(_=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(A)})})}(Ue);return function(_,h,p){return Lh.apply(this,arguments)}(h,z,Je)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return _c.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:E,handleOpenURL:A,BuildInfo:M}=hu(),z=setTimeout((0,m.Z)(function*(){yield lp(h),p.onEvent(jl())}),500),_e=function(){var lt=(0,m.Z)(function*(tt){clearTimeout(z);const Wn=yield lp(h);let pi=null;Wn&&(null==tt?void 0:tt.url)&&(pi=function(_,h){var p,E;const A=function(_){const h=dp(_),p=h.link?decodeURIComponent(h.link):void 0,E=dp(p).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return dp(A).link||A||E||p||_}(h);if(A.includes("/__/auth/callback")){const M=dp(A),z=M.firebaseError?function(_){try{return JSON.parse(_)}catch(h){return null}}(decodeURIComponent(M.firebaseError)):null,_e=null===(E=null===(p=null==z?void 0:z.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],Ue=_e?Fe(_e):null;return Ue?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:Ue,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:A,postBody:null}}return null}(Wn,tt.url)),p.onEvent(pi||jl())});return function(Wn){return lt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,_e);const Ue=A,Je=`${M.packageName.toLowerCase()}://`;hu().handleOpenURL=function(){var lt=(0,m.Z)(function*(tt){if(tt.toLowerCase().startsWith(Je)&&_e({url:tt}),"function"==typeof Ue)try{Ue(tt)}catch(Wn){console.error(Wn)}});return function(tt){return lt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=_s,this._completeRedirectFn=zi}_initialize(h){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,E,A){var M=this;return(0,m.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,p,E,A)})()}_openRedirect(h,p,E,A){var M=this;return(0,m.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,p,E,A)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return _m()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Po(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,m.Z)(function*(){if(h.underlyingResolver)return;const p=yield function(){return Hl.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Gl(_){return _.unwrap()}function wm(_){return Ea(_)}function Ea(_){const{_tokenResponse:h}=_ instanceof F.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof F.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ci.credentialFromResult(_);const p=h.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=Zu;break;case"facebook.com":E=ml;break;case"github.com":E=yl;break;case"twitter.com":E=Ai;break;default:const{oauthIdToken:A,oauthAccessToken:M,oauthTokenSecret:z,pendingToken:_e,nonce:Ue}=h;return M||z||A||_e?_e?p.startsWith("saml.")?Ko._create(p,_e):$r._fromParams({providerId:p,signInMethod:p,pendingToken:_e,idToken:A,accessToken:M}):new Ps(p).credential({idToken:A,accessToken:M,rawNonce:Ue}):null}return _ instanceof F.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function tn(_,h){return h.catch(p=>{throw p instanceof F.ZR&&function(_,h){var p;const E=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new ql(_,function(_,h){var p;const E=(0,F.m9)(_),A=h;return De(h.customData.operationType,E,"argument-error"),De(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),bl._fromError(E,A)}(_,h));else if(E){const A=Ea(h),M=h;A&&(M.credential=A,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(_,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:wm(p),additionalUserInfo:ic(p),user:Ji.getOrCreate(A)}})}function qh(_,h){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,m.Z)(function*(_,h){const p=yield h;return{verificationId:p.verificationId,confirm:E=>tn(_,p.confirm(E))}})).apply(this,arguments)}class ql{constructor(h,p){this.resolver=p,this.auth=function(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return tn(Gl(this.auth),this.resolver.resolveSignIn(h))}}class Ji{constructor(h){this._delegate=h,this.multiFactor=function(_){const h=(0,F.m9)(_);return oa.has(h)||oa.set(h,sa._fromUser(h)),oa.get(h)}(h)}static getOrCreate(h){return Ji.USER_MAP.has(h)||Ji.USER_MAP.set(h,new Ji(h)),Ji.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,m.Z)(function*(){return tn(p.auth,uh(p._delegate,h))})()}linkWithPhoneNumber(h,p){var E=this;return(0,m.Z)(function*(){return qh(E.auth,function(_,h,p){return cu.apply(this,arguments)}(E._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,m.Z)(function*(){return tn(p.auth,function(_,h,p){return Pl.apply(this,arguments)}(p._delegate,h,ln))})()}linkWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield pp($t(p.auth)),function(_,h,p){return function(_,h,p){return Ni.apply(this,arguments)}(_,h,p)}(p._delegate,h,ln)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,m.Z)(function*(){return tn(p.auth,Za(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return qh(this.auth,function(_,h,p){return Nl.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return tn(this.auth,function(_,h,p){return Wi.apply(this,arguments)}(this._delegate,h,ln))}reauthenticateWithRedirect(h){var p=this;return(0,m.Z)(function*(){return yield pp($t(p.auth)),function(_,h,p){return function(_,h,p){return qn.apply(this,arguments)}(_,h,p)}(p._delegate,h,ln)})()}sendEmailVerification(h){return function(_,h){return Bi.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,m.Z)(function*(){return yield function(_,h){return Zo.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function(_,h){return Xa((0,F.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function(_,h){return Xa((0,F.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function(_,h){return Ml.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function(_,h){return Ja.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function(_,h,p){return Tr.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ji.USER_MAP=new WeakMap;const Ec=De;let bm=(()=>{class _{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Ec(A,"invalid-api-key",{appName:p.name});let M=[Dt];if("undefined"!=typeof window){M=function(_,h){const p=H_();if(!(null==p?void 0:p.sessionStorage))return[];const E=Xt(Em,_,h);switch(p.sessionStorage.getItem(E)){case xr.NONE:return[Dt];case xr.LOCAL:return[ca,_s];case xr.SESSION:return[_s];default:return[]}}(A,p.name);for(const _e of[ca,sc,_s])M.includes(_e)||M.push(_e)}Ec(A,"invalid-api-key",{appName:p.name});const z="undefined"!=typeof window?ln:void 0;this._delegate=E.initialize({options:{persistence:M,popupRedirectResolver:z}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ji.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function(_,h,p){const E=$t(_);De(E._canInitEmulator,E,"emulator-config-failed"),De(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),M=en(h),{host:z,port:_e}=function(_){const h=en(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const M=A[1];return{host:M,port:hs(E.substr(M.length+1))}}{const[M,z]=E.split(":");return{host:M,port:hs(z)}}}(h);E.config.emulator={url:`${M}//${z}${null===_e?"":`:${_e}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:z,port:_e,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function(){function _(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,E)}applyActionCode(p){return function(_,h){return ps.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ta(this._delegate,p)}confirmPasswordReset(p,E){return function(_,h,p){return ut.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var A=this;return(0,m.Z)(function*(){return tn(A._delegate,function(_,h,p){return Se.apply(this,arguments)}(A._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(_,h){return tc.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(_,h){const p=zo.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){Ec(vn(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function(_,h){return fi.apply(this,arguments)}(p._delegate,ln);return E?tn(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(_,h){$t(_)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,E,A){const{next:M,error:z,complete:_e}=yp(p,E,A);return this._delegate.onAuthStateChanged(M,z,_e)}onIdTokenChanged(p,E,A){const{next:M,error:z,complete:_e}=yp(p,E,A);return this._delegate.onIdTokenChanged(M,z,_e)}sendSignInLinkToEmail(p,E){return function(_,h,p){return yn.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function(_,h,p){return ea.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,m.Z)(function*(){let A;switch(function(_,h){Qi(Object.values(xr).includes(h),_,"invalid-persistence-type"),(0,F.b$)()?Qi(h!==xr.SESSION,_,"unsupported-persistence-type"):(0,F.UG)()?Qi(h===xr.NONE,_,"unsupported-persistence-type"):Gh()?Qi(h===xr.NONE||h===xr.LOCAL&&(0,F.hl)(),_,"unsupported-persistence-type"):Qi(h===xr.NONE||$l(),_,"unsupported-persistence-type")}(E._delegate,p),p){case xr.SESSION:A=_s;break;case xr.LOCAL:A=(yield ue(ca)._isAvailable())?ca:sc;break;case xr.NONE:A=Dt;break;default:return Ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return tn(this._delegate,function(_){return vo.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return tn(this._delegate,Ju(this._delegate,p))}signInWithCustomToken(p){return tn(this._delegate,function(_,h){return Hn.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return tn(this._delegate,function(_,h,p){return Ju((0,F.m9)(_),Ku.credential(h,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return tn(this._delegate,function(_,h,p){return ui.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return qh(this._delegate,function(_,h,p){return Rl.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,m.Z)(function*(){return Ec(vn(),E._delegate,"operation-not-supported-in-this-environment"),tn(E._delegate,function(_,h,p){return di.apply(this,arguments)}(E._delegate,p,ln))})()}signInWithRedirect(p){var E=this;return(0,m.Z)(function*(){return Ec(vn(),E._delegate,"operation-not-supported-in-this-environment"),yield pp(E._delegate),function(_,h,p){return function(_,h,p){return Ge.apply(this,arguments)}(_,h,p)}(E._delegate,p,ln)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(_,h){return gs.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=xr,_})();function yp(_,h,p){let E=_;"function"!=typeof _&&({next:E,error:h,complete:p}=_);const A=E;return{next:z=>A(z&&Ji.getOrCreate(z)),error:h,complete:p}}class _p{constructor(){this.providerId="phone",this._delegate=new ci(Gl(ee.Z.auth()))}static credential(h,p){return ci.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}_p.PHONE_SIGN_IN_METHOD=ci.PHONE_SIGN_IN_METHOD,_p.PROVIDER_ID=ci.PROVIDER_ID;const zh=De;class Im{constructor(h,p,E=ee.Z.app()){var A;zh(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Ih(h,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new Ee.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new bm(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ku,FacebookAuthProvider:ml,GithubAuthProvider:yl,GoogleAuthProvider:Zu,OAuthProvider:Ps,PhoneAuthProvider:_p,PhoneMultiFactorGenerator:Fh,RecaptchaVerifier:Im,TwitterAuthProvider:Ai,Auth:bm,AuthCredential:Jn,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.0")}(ee.Z)},6676:function(et,Te){!function(V){"use strict";function m(q){return Array.prototype.slice.call(q)}function ee(q){return new Promise(function(ye,ve){q.onsuccess=function(){ye(q.result)},q.onerror=function(){ve(q.error)}})}function F(q,ye,ve){var he,Ce=new Promise(function(Fe,Le){ee(he=q[ye].apply(q,ve)).then(Fe,Le)});return Ce.request=he,Ce}function ce(q,ye,ve){var he=F(q,ye,ve);return he.then(function(Ce){if(Ce)return new k(Ce,he.request)})}function te(q,ye,ve){ve.forEach(function(he){Object.defineProperty(q.prototype,he,{get:function(){return this[ye][he]},set:function(Ce){this[ye][he]=Ce}})})}function ie(q,ye,ve,he){he.forEach(function(Ce){Ce in ve.prototype&&(q.prototype[Ce]=function(){return F(this[ye],Ce,arguments)})})}function Ee(q,ye,ve,he){he.forEach(function(Ce){Ce in ve.prototype&&(q.prototype[Ce]=function(){return this[ye][Ce].apply(this[ye],arguments)})})}function le(q,ye,ve,he){he.forEach(function(Ce){Ce in ve.prototype&&(q.prototype[Ce]=function(){return ce(this[ye],Ce,arguments)})})}function W(q){this._index=q}function k(q,ye){this._cursor=q,this._request=ye}function L(q){this._store=q}function Q(q){this._tx=q,this.complete=new Promise(function(ye,ve){q.oncomplete=function(){ye()},q.onerror=function(){ve(q.error)},q.onabort=function(){ve(q.error)}})}function K(q,ye,ve){this._db=q,this.oldVersion=ye,this.transaction=new Q(ve)}function re(q){this._db=q}te(W,"_index",["name","keyPath","multiEntry","unique"]),ie(W,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),le(W,"_index",IDBIndex,["openCursor","openKeyCursor"]),te(k,"_cursor",["direction","key","primaryKey","value"]),ie(k,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(q){q in IDBCursor.prototype&&(k.prototype[q]=function(){var ye=this,ve=arguments;return Promise.resolve().then(function(){return ye._cursor[q].apply(ye._cursor,ve),ee(ye._request).then(function(he){if(he)return new k(he,ye._request)})})})}),L.prototype.createIndex=function(){return new W(this._store.createIndex.apply(this._store,arguments))},L.prototype.index=function(){return new W(this._store.index.apply(this._store,arguments))},te(L,"_store",["name","keyPath","indexNames","autoIncrement"]),ie(L,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),le(L,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Ee(L,"_store",IDBObjectStore,["deleteIndex"]),Q.prototype.objectStore=function(){return new L(this._tx.objectStore.apply(this._tx,arguments))},te(Q,"_tx",["objectStoreNames","mode"]),Ee(Q,"_tx",IDBTransaction,["abort"]),K.prototype.createObjectStore=function(){return new L(this._db.createObjectStore.apply(this._db,arguments))},te(K,"_db",["name","version","objectStoreNames"]),Ee(K,"_db",IDBDatabase,["deleteObjectStore","close"]),re.prototype.transaction=function(){return new Q(this._db.transaction.apply(this._db,arguments))},te(re,"_db",["name","version","objectStoreNames"]),Ee(re,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(q){[L,W].forEach(function(ye){q in ye.prototype&&(ye.prototype[q.replace("open","iterate")]=function(){var ve=m(arguments),he=ve[ve.length-1],Ce=this._store||this._index,Fe=Ce[q].apply(Ce,ve.slice(0,-1));Fe.onsuccess=function(){he(Fe.result)}})})}),[W,L].forEach(function(q){q.prototype.getAll||(q.prototype.getAll=function(ye,ve){var he=this,Ce=[];return new Promise(function(Fe){he.iterateCursor(ye,function(Le){Le?(Ce.push(Le.value),void 0===ve||Ce.length!=ve?Le.continue():Fe(Ce)):Fe(Ce)})})})}),V.openDb=function(q,ye,ve){var he=F(indexedDB,"open",[q,ye]),Ce=he.request;return Ce&&(Ce.onupgradeneeded=function(Fe){ve&&ve(new K(Ce.result,Fe.oldVersion,Ce.transaction))}),he.then(function(Fe){return new re(Fe)})},V.deleteDb=function(q){return F(indexedDB,"deleteDatabase",[q])},Object.defineProperty(V,"__esModule",{value:!0})}(Te)},7574:(et,Te,V)=>{"use strict";V.d(Te,{y:()=>L});var m=V(7393),F=V(9181),ce=V(6490),ie=V(6554),Ee=V(4487);var k=V(2494);let L=(()=>{class K{constructor(we){this._isScalar=!1,we&&(this._subscribe=we)}lift(we){const de=new K;return de.source=this,de.operator=we,de}subscribe(we,de,q){const{operator:ye}=this,ve=function(K,re,we){if(K){if(K instanceof m.L)return K;if(K[F.b])return K[F.b]()}return K||re||we?new m.L(K,re,we):new m.L(ce.c)}(we,de,q);if(ve.add(ye?ye.call(ve,this.source):this.source||k.v.useDeprecatedSynchronousErrorHandling&&!ve.syncErrorThrowable?this._subscribe(ve):this._trySubscribe(ve)),k.v.useDeprecatedSynchronousErrorHandling&&ve.syncErrorThrowable&&(ve.syncErrorThrowable=!1,ve.syncErrorThrown))throw ve.syncErrorValue;return ve}_trySubscribe(we){try{return this._subscribe(we)}catch(de){k.v.useDeprecatedSynchronousErrorHandling&&(we.syncErrorThrown=!0,we.syncErrorValue=de),function(K){for(;K;){const{closed:re,destination:we,isStopped:de}=K;if(re||de)return!1;K=we&&we instanceof m.L?we:null}return!0}(we)?we.error(de):console.warn(de)}}forEach(we,de){return new(de=Q(de))((q,ye)=>{let ve;ve=this.subscribe(he=>{try{we(he)}catch(Ce){ye(Ce),ve&&ve.unsubscribe()}},ye,q)})}_subscribe(we){const{source:de}=this;return de&&de.subscribe(we)}[ie.L](){return this}pipe(...we){return 0===we.length?this:function(K){return 0===K.length?Ee.y:1===K.length?K[0]:function(we){return K.reduce((de,q)=>q(de),we)}}(we)(this)}toPromise(we){return new(we=Q(we))((de,q)=>{let ye;this.subscribe(ve=>ye=ve,ve=>q(ve),()=>de(ye))})}}return K.create=re=>new K(re),K})();function Q(K){if(K||(K=k.v.Promise||Promise),!K)throw new Error("no Promise impl found");return K}},6490:(et,Te,V)=>{"use strict";V.d(Te,{c:()=>F});var m=V(2494),ee=V(4449);const F={closed:!0,next(ce){},error(ce){if(m.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,ee.z)(ce)},complete(){}}},9765:(et,Te,V)=>{"use strict";V.d(Te,{Yc:()=>Ee,xQ:()=>le});var m=V(7574),ee=V(7393),F=V(5319),ce=V(7971),te=V(8858),ie=V(9181);class Ee extends ee.L{constructor(L){super(L),this.destination=L}}let le=(()=>{class k extends m.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ie.b](){return new Ee(this)}lift(Q){const K=new W(this,this);return K.operator=Q,K}next(Q){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:K}=this,re=K.length,we=K.slice();for(let de=0;de<re;de++)we[de].next(Q)}}error(Q){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=Q,this.isStopped=!0;const{observers:K}=this,re=K.length,we=K.slice();for(let de=0;de<re;de++)we[de].error(Q);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:Q}=this,K=Q.length,re=Q.slice();for(let we=0;we<K;we++)re[we].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(Q){if(this.closed)throw new ce.N;return super._trySubscribe(Q)}_subscribe(Q){if(this.closed)throw new ce.N;return this.hasError?(Q.error(this.thrownError),F.w.EMPTY):this.isStopped?(Q.complete(),F.w.EMPTY):(this.observers.push(Q),new te.W(this,Q))}asObservable(){const Q=new m.y;return Q.source=this,Q}}return k.create=(L,Q)=>new W(L,Q),k})();class W extends le{constructor(L,Q){super(),this.destination=L,this.source=Q}next(L){const{destination:Q}=this;Q&&Q.next&&Q.next(L)}error(L){const{destination:Q}=this;Q&&Q.error&&this.destination.error(L)}complete(){const{destination:L}=this;L&&L.complete&&this.destination.complete()}_subscribe(L){const{source:Q}=this;return Q?this.source.subscribe(L):F.w.EMPTY}}},8858:(et,Te,V)=>{"use strict";V.d(Te,{W:()=>ee});var m=V(5319);class ee extends m.w{constructor(ce,te){super(),this.subject=ce,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,te=ce.observers;if(this.subject=null,!te||0===te.length||ce.isStopped||ce.closed)return;const ie=te.indexOf(this.subscriber);-1!==ie&&te.splice(ie,1)}}},7393:(et,Te,V)=>{"use strict";V.d(Te,{L:()=>Ee});var m=V(9105),ee=V(6490),F=V(5319),ce=V(9181),te=V(2494),ie=V(4449);class Ee extends F.w{constructor(k,L,Q){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ee.c;break;case 1:if(!k){this.destination=ee.c;break}if("object"==typeof k){k instanceof Ee?(this.syncErrorThrowable=k.syncErrorThrowable,this.destination=k,k.add(this)):(this.syncErrorThrowable=!0,this.destination=new le(this,k));break}default:this.syncErrorThrowable=!0,this.destination=new le(this,k,L,Q)}}[ce.b](){return this}static create(k,L,Q){const K=new Ee(k,L,Q);return K.syncErrorThrowable=!1,K}next(k){this.isStopped||this._next(k)}error(k){this.isStopped||(this.isStopped=!0,this._error(k))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(k){this.destination.next(k)}_error(k){this.destination.error(k),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:k}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=k,this}}class le extends Ee{constructor(k,L,Q,K){super(),this._parentSubscriber=k;let re,we=this;(0,m.m)(L)?re=L:L&&(re=L.next,Q=L.error,K=L.complete,L!==ee.c&&(we=Object.create(L),(0,m.m)(we.unsubscribe)&&this.add(we.unsubscribe.bind(we)),we.unsubscribe=this.unsubscribe.bind(this))),this._context=we,this._next=re,this._error=Q,this._complete=K}next(k){if(!this.isStopped&&this._next){const{_parentSubscriber:L}=this;te.v.useDeprecatedSynchronousErrorHandling&&L.syncErrorThrowable?this.__tryOrSetError(L,this._next,k)&&this.unsubscribe():this.__tryOrUnsub(this._next,k)}}error(k){if(!this.isStopped){const{_parentSubscriber:L}=this,{useDeprecatedSynchronousErrorHandling:Q}=te.v;if(this._error)Q&&L.syncErrorThrowable?(this.__tryOrSetError(L,this._error,k),this.unsubscribe()):(this.__tryOrUnsub(this._error,k),this.unsubscribe());else if(L.syncErrorThrowable)Q?(L.syncErrorValue=k,L.syncErrorThrown=!0):(0,ie.z)(k),this.unsubscribe();else{if(this.unsubscribe(),Q)throw k;(0,ie.z)(k)}}}complete(){if(!this.isStopped){const{_parentSubscriber:k}=this;if(this._complete){const L=()=>this._complete.call(this._context);te.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?(this.__tryOrSetError(k,L),this.unsubscribe()):(this.__tryOrUnsub(L),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(k,L){try{k.call(this._context,L)}catch(Q){if(this.unsubscribe(),te.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,ie.z)(Q)}}__tryOrSetError(k,L,Q){if(!te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{L.call(this._context,Q)}catch(K){return te.v.useDeprecatedSynchronousErrorHandling?(k.syncErrorValue=K,k.syncErrorThrown=!0,!0):((0,ie.z)(K),!0)}return!1}_unsubscribe(){const{_parentSubscriber:k}=this;this._context=null,this._parentSubscriber=null,k.unsubscribe()}}},5319:(et,Te,V)=>{"use strict";V.d(Te,{w:()=>ie});var m=V(9796),ee=V(1555),F=V(9105);const te=(()=>{function le(W){return Error.call(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((k,L)=>`${L+1}) ${k.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W,this}return le.prototype=Object.create(Error.prototype),le})();class ie{constructor(W){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,W&&(this._ctorUnsubscribe=!0,this._unsubscribe=W)}unsubscribe(){let W;if(this.closed)return;let{_parentOrParents:k,_ctorUnsubscribe:L,_unsubscribe:Q,_subscriptions:K}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,k instanceof ie)k.remove(this);else if(null!==k)for(let re=0;re<k.length;++re)k[re].remove(this);if((0,F.m)(Q)){L&&(this._unsubscribe=void 0);try{Q.call(this)}catch(re){W=re instanceof te?Ee(re.errors):[re]}}if((0,m.k)(K)){let re=-1,we=K.length;for(;++re<we;){const de=K[re];if((0,ee.K)(de))try{de.unsubscribe()}catch(q){W=W||[],q instanceof te?W=W.concat(Ee(q.errors)):W.push(q)}}}if(W)throw new te(W)}add(W){let k=W;if(!W)return ie.EMPTY;switch(typeof W){case"function":k=new ie(W);case"object":if(k===this||k.closed||"function"!=typeof k.unsubscribe)return k;if(this.closed)return k.unsubscribe(),k;if(!(k instanceof ie)){const K=k;k=new ie,k._subscriptions=[K]}break;default:throw new Error("unrecognized teardown "+W+" added to Subscription.")}let{_parentOrParents:L}=k;if(null===L)k._parentOrParents=this;else if(L instanceof ie){if(L===this)return k;k._parentOrParents=[L,this]}else{if(-1!==L.indexOf(this))return k;L.push(this)}const Q=this._subscriptions;return null===Q?this._subscriptions=[k]:Q.push(k),k}remove(W){const k=this._subscriptions;if(k){const L=k.indexOf(W);-1!==L&&k.splice(L,1)}}}var le;function Ee(le){return le.reduce((W,k)=>W.concat(k instanceof te?k.errors:k),[])}ie.EMPTY=((le=new ie).closed=!0,le)},2494:(et,Te,V)=>{"use strict";V.d(Te,{v:()=>ee});let m=!1;const ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else m&&console.log("RxJS: Back to a better error behavior. Thank you. <3");m=F},get useDeprecatedSynchronousErrorHandling(){return m}}},5345:(et,Te,V)=>{"use strict";V.d(Te,{IY:()=>ce,Ds:()=>ie,ft:()=>le});var m=V(7393),ee=V(7574),F=V(7444);class ce extends m.L{constructor(k){super(),this.parent=k}_next(k){this.parent.notifyNext(k)}_error(k){this.parent.notifyError(k),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ie extends m.L{notifyNext(k){this.destination.next(k)}notifyError(k){this.destination.error(k)}notifyComplete(){this.destination.complete()}}function le(W,k){if(k.closed)return;if(W instanceof ee.y)return W.subscribe(k);let L;try{L=(0,F.s)(W)(k)}catch(Q){k.error(Q)}return L}},2441:(et,Te,V)=>{"use strict";V.d(Te,{c:()=>te,N:()=>ie});var m=V(9765),ee=V(7574),F=V(5319),ce=V(1307);class te extends ee.y{constructor(L,Q){super(),this.source=L,this.subjectFactory=Q,this._refCount=0,this._isComplete=!1}_subscribe(L){return this.getSubject().subscribe(L)}getSubject(){const L=this._subject;return(!L||L.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let L=this._connection;return L||(this._isComplete=!1,L=this._connection=new F.w,L.add(this.source.subscribe(new Ee(this.getSubject(),this))),L.closed&&(this._connection=null,L=F.w.EMPTY)),L}refCount(){return(0,ce.x)()(this)}}const ie=(()=>{const k=te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:k._subscribe},_isComplete:{value:k._isComplete,writable:!0},getSubject:{value:k.getSubject},connect:{value:k.connect},refCount:{value:k.refCount}}})();class Ee extends m.Yc{constructor(L,Q){super(L),this.connectable=Q}_error(L){this._unsubscribe(),super._error(L)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const L=this.connectable;if(L){this.connectable=null;const Q=L._connection;L._refCount=0,L._subject=null,L._connection=null,Q&&Q.unsubscribe()}}}},9193:(et,Te,V)=>{"use strict";V.d(Te,{E:()=>ee,c:()=>F});var m=V(7574);const ee=new m.y(te=>te.complete());function F(te){return te?function(te){return new m.y(ie=>te.schedule(()=>ie.complete()))}(te):ee}},4402:(et,Te,V)=>{"use strict";V.d(Te,{D:()=>we});var m=V(7574),ee=V(7444),F=V(5319),ce=V(6554),Ee=V(4087),le=V(377),L=V(4072),Q=V(9489);function we(de,q){return q?function(de,q){if(null!=de){if(function(de){return de&&"function"==typeof de[ce.L]}(de))return function(de,q){return new m.y(ye=>{const ve=new F.w;return ve.add(q.schedule(()=>{const he=de[ce.L]();ve.add(he.subscribe({next(Ce){ve.add(q.schedule(()=>ye.next(Ce)))},error(Ce){ve.add(q.schedule(()=>ye.error(Ce)))},complete(){ve.add(q.schedule(()=>ye.complete()))}}))})),ve})}(de,q);if((0,L.t)(de))return function(de,q){return new m.y(ye=>{const ve=new F.w;return ve.add(q.schedule(()=>de.then(he=>{ve.add(q.schedule(()=>{ye.next(he),ve.add(q.schedule(()=>ye.complete()))}))},he=>{ve.add(q.schedule(()=>ye.error(he)))}))),ve})}(de,q);if((0,Q.z)(de))return(0,Ee.r)(de,q);if(function(de){return de&&"function"==typeof de[le.hZ]}(de)||"string"==typeof de)return function(de,q){if(!de)throw new Error("Iterable cannot be null");return new m.y(ye=>{const ve=new F.w;let he;return ve.add(()=>{he&&"function"==typeof he.return&&he.return()}),ve.add(q.schedule(()=>{he=de[le.hZ](),ve.add(q.schedule(function(){if(ye.closed)return;let Ce,Fe;try{const Le=he.next();Ce=Le.value,Fe=Le.done}catch(Le){return void ye.error(Le)}Fe?ye.complete():(ye.next(Ce),this.schedule())}))})),ve})}(de,q)}throw new TypeError((null!==de&&typeof de||de)+" is not observable")}(de,q):de instanceof m.y?de:new m.y((0,ee.s)(de))}},6693:(et,Te,V)=>{"use strict";V.d(Te,{n:()=>ce});var m=V(7574),ee=V(5015),F=V(4087);function ce(te,ie){return ie?(0,F.r)(te,ie):new m.y((0,ee.V)(te))}},6682:(et,Te,V)=>{"use strict";V.d(Te,{T:()=>te});var m=V(7574),ee=V(4869),F=V(3282),ce=V(6693);function te(...ie){let Ee=Number.POSITIVE_INFINITY,le=null,W=ie[ie.length-1];return(0,ee.K)(W)?(le=ie.pop(),ie.length>1&&"number"==typeof ie[ie.length-1]&&(Ee=ie.pop())):"number"==typeof W&&(Ee=ie.pop()),null===le&&1===ie.length&&ie[0]instanceof m.y?ie[0]:(0,F.J)(Ee)((0,ce.n)(ie,le))}},5917:(et,Te,V)=>{"use strict";V.d(Te,{of:()=>ce});var m=V(4869),ee=V(6693),F=V(4087);function ce(...te){let ie=te[te.length-1];return(0,m.K)(ie)?(te.pop(),(0,F.r)(te,ie)):(0,ee.n)(te)}},8002:(et,Te,V)=>{"use strict";V.d(Te,{U:()=>ee});var m=V(7393);function ee(te,ie){return function(le){if("function"!=typeof te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return le.lift(new F(te,ie))}}class F{constructor(ie,Ee){this.project=ie,this.thisArg=Ee}call(ie,Ee){return Ee.subscribe(new ce(ie,this.project,this.thisArg))}}class ce extends m.L{constructor(ie,Ee,le){super(ie),this.project=Ee,this.count=0,this.thisArg=le||this}_next(ie){let Ee;try{Ee=this.project.call(this.thisArg,ie,this.count++)}catch(le){return void this.destination.error(le)}this.destination.next(Ee)}}},3282:(et,Te,V)=>{"use strict";V.d(Te,{J:()=>F});var m=V(9773),ee=V(4487);function F(ce=Number.POSITIVE_INFINITY){return(0,m.zg)(ee.y,ce)}},9773:(et,Te,V)=>{"use strict";V.d(Te,{zg:()=>ce});var m=V(8002),ee=V(4402),F=V(5345);function ce(le,W,k=Number.POSITIVE_INFINITY){return"function"==typeof W?L=>L.pipe(ce((Q,K)=>(0,ee.D)(le(Q,K)).pipe((0,m.U)((re,we)=>W(Q,re,K,we))),k)):("number"==typeof W&&(k=W),L=>L.lift(new te(le,k)))}class te{constructor(W,k=Number.POSITIVE_INFINITY){this.project=W,this.concurrent=k}call(W,k){return k.subscribe(new ie(W,this.project,this.concurrent))}}class ie extends F.Ds{constructor(W,k,L=Number.POSITIVE_INFINITY){super(W),this.project=k,this.concurrent=L,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(W){this.active<this.concurrent?this._tryNext(W):this.buffer.push(W)}_tryNext(W){let k;const L=this.index++;try{k=this.project(W,L)}catch(Q){return void this.destination.error(Q)}this.active++,this._innerSub(k)}_innerSub(W){const k=new F.IY(this),L=this.destination;L.add(k);const Q=(0,F.ft)(W,k);Q!==k&&L.add(Q)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(W){this.destination.next(W)}notifyComplete(){const W=this.buffer;this.active--,W.length>0?this._next(W.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(et,Te,V)=>{"use strict";V.d(Te,{ht:()=>L,QV:()=>W});var m=V(7393),ee=V(9193),F=V(5917),ce=V(7574);class le{constructor(re,we,de){this.kind=re,this.value=we,this.error=de,this.hasValue="N"===re}observe(re){switch(this.kind){case"N":return re.next&&re.next(this.value);case"E":return re.error&&re.error(this.error);case"C":return re.complete&&re.complete()}}do(re,we,de){switch(this.kind){case"N":return re&&re(this.value);case"E":return we&&we(this.error);case"C":return de&&de()}}accept(re,we,de){return re&&"function"==typeof re.next?this.observe(re):this.do(re,we,de)}toObservable(){switch(this.kind){case"N":return(0,F.of)(this.value);case"E":return K=this.error,new ce.y(we=>we.error(K));case"C":return(0,ee.c)()}var K;throw new Error("unexpected notification kind value")}static createNext(re){return void 0!==re?new le("N",re):le.undefinedValueNotification}static createError(re){return new le("E",void 0,re)}static createComplete(){return le.completeNotification}}function W(K,re=0){return function(de){return de.lift(new k(K,re))}}le.completeNotification=new le("C"),le.undefinedValueNotification=new le("N",void 0);class k{constructor(re,we=0){this.scheduler=re,this.delay=we}call(re,we){return we.subscribe(new L(re,this.scheduler,this.delay))}}class L extends m.L{constructor(re,we,de=0){super(re),this.scheduler=we,this.delay=de}static dispatch(re){const{notification:we,destination:de}=re;we.observe(de),this.unsubscribe()}scheduleMessage(re){this.destination.add(this.scheduler.schedule(L.dispatch,this.delay,new Q(re,this.destination)))}_next(re){this.scheduleMessage(le.createNext(re))}_error(re){this.scheduleMessage(le.createError(re)),this.unsubscribe()}_complete(){this.scheduleMessage(le.createComplete()),this.unsubscribe()}}class Q{constructor(re,we){this.notification=re,this.destination=we}}},1307:(et,Te,V)=>{"use strict";V.d(Te,{x:()=>ee});var m=V(7393);function ee(){return function(ie){return ie.lift(new F(ie))}}class F{constructor(ie){this.connectable=ie}call(ie,Ee){const{connectable:le}=this;le._refCount++;const W=new ce(ie,le),k=Ee.subscribe(W);return W.closed||(W.connection=le.connect()),k}}class ce extends m.L{constructor(ie,Ee){super(ie),this.connectable=Ee}_unsubscribe(){const{connectable:ie}=this;if(!ie)return void(this.connection=null);this.connectable=null;const Ee=ie._refCount;if(Ee<=0)return void(this.connection=null);if(ie._refCount=Ee-1,Ee>1)return void(this.connection=null);const{connection:le}=this,W=ie._connection;this.connection=null,W&&(!le||W===le)&&W.unsubscribe()}}},3101:(et,Te,V)=>{"use strict";V.d(Te,{R:()=>q});var m=V(7574);let ee=1;const F=Promise.resolve(),ce={};function te(ve){return ve in ce&&(delete ce[ve],!0)}const ie={setImmediate(ve){const he=ee++;return ce[he]=!0,F.then(()=>te(he)&&ve()),he},clearImmediate(ve){te(ve)}};var le=V(6465),k=V(6102);const K=new class extends k.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:Ce}=this;let Fe,Le=-1,gt=Ce.length;he=he||Ce.shift();do{if(Fe=he.execute(he.state,he.delay))break}while(++Le<gt&&(he=Ce.shift()));if(this.active=!1,Fe){for(;++Le<gt&&(he=Ce.shift());)he.unsubscribe();throw Fe}}}(class extends le.o{constructor(he,Ce){super(he,Ce),this.scheduler=he,this.work=Ce}requestAsyncId(he,Ce,Fe=0){return null!==Fe&&Fe>0?super.requestAsyncId(he,Ce,Fe):(he.actions.push(this),he.scheduled||(he.scheduled=ie.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,Ce,Fe=0){if(null!==Fe&&Fe>0||null===Fe&&this.delay>0)return super.recycleAsyncId(he,Ce,Fe);0===he.actions.length&&(ie.clearImmediate(Ce),he.scheduled=void 0)}});var re=V(9796);class de extends m.y{constructor(he,Ce=0,Fe=K){var ve;super(),this.source=he,this.delayTime=Ce,this.scheduler=Fe,(!(!(0,re.k)(ve=Ce)&&ve-parseFloat(ve)+1>=0)||Ce<0)&&(this.delayTime=0),(!Fe||"function"!=typeof Fe.schedule)&&(this.scheduler=K)}static create(he,Ce=0,Fe=K){return new de(he,Ce,Fe)}static dispatch(he){const{source:Ce,subscriber:Fe}=he;return this.add(Ce.subscribe(Fe))}_subscribe(he){return this.scheduler.schedule(de.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function q(ve,he=0){return function(Fe){return Fe.lift(new ye(ve,he))}}class ye{constructor(he,Ce){this.scheduler=he,this.delay=Ce}call(he,Ce){return new de(Ce,this.delay,this.scheduler).subscribe(he)}}},3342:(et,Te,V)=>{"use strict";V.d(Te,{b:()=>ce});var m=V(7393);function ee(){}var F=V(9105);function ce(Ee,le,W){return function(L){return L.lift(new te(Ee,le,W))}}class te{constructor(le,W,k){this.nextOrObserver=le,this.error=W,this.complete=k}call(le,W){return W.subscribe(new ie(le,this.nextOrObserver,this.error,this.complete))}}class ie extends m.L{constructor(le,W,k,L){super(le),this._tapNext=ee,this._tapError=ee,this._tapComplete=ee,this._tapError=k||ee,this._tapComplete=L||ee,(0,F.m)(W)?(this._context=this,this._tapNext=W):W&&(this._context=W,this._tapNext=W.next||ee,this._tapError=W.error||ee,this._tapComplete=W.complete||ee)}_next(le){try{this._tapNext.call(this._context,le)}catch(W){return void this.destination.error(W)}this.destination.next(le)}_error(le){try{this._tapError.call(this._context,le)}catch(W){return void this.destination.error(W)}this.destination.error(le)}_complete(){try{this._tapComplete.call(this._context)}catch(le){return void this.destination.error(le)}return this.destination.complete()}}},4087:(et,Te,V)=>{"use strict";V.d(Te,{r:()=>F});var m=V(7574),ee=V(5319);function F(ce,te){return new m.y(ie=>{const Ee=new ee.w;let le=0;return Ee.add(te.schedule(function(){le!==ce.length?(ie.next(ce[le++]),ie.closed||Ee.add(this.schedule())):ie.complete()})),Ee})}},6465:(et,Te,V)=>{"use strict";V.d(Te,{o:()=>F});var m=V(5319);class ee extends m.w{constructor(te,ie){super()}schedule(te,ie=0){return this}}class F extends ee{constructor(te,ie){super(te,ie),this.scheduler=te,this.work=ie,this.pending=!1}schedule(te,ie=0){if(this.closed)return this;this.state=te;const Ee=this.id,le=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(le,Ee,ie)),this.pending=!0,this.delay=ie,this.id=this.id||this.requestAsyncId(le,this.id,ie),this}requestAsyncId(te,ie,Ee=0){return setInterval(te.flush.bind(te,this),Ee)}recycleAsyncId(te,ie,Ee=0){if(null!==Ee&&this.delay===Ee&&!1===this.pending)return ie;clearInterval(ie)}execute(te,ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(te,ie);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,ie){let le,Ee=!1;try{this.work(te)}catch(W){Ee=!0,le=!!W&&W||new Error(W)}if(Ee)return this.unsubscribe(),le}_unsubscribe(){const te=this.id,ie=this.scheduler,Ee=ie.actions,le=Ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==le&&Ee.splice(le,1),null!=te&&(this.id=this.recycleAsyncId(ie,te,null)),this.delay=null}}},6102:(et,Te,V)=>{"use strict";V.d(Te,{v:()=>ee});let m=(()=>{class F{constructor(te,ie=F.now){this.SchedulerAction=te,this.now=ie}schedule(te,ie=0,Ee){return new this.SchedulerAction(this,te).schedule(Ee,ie)}}return F.now=()=>Date.now(),F})();class ee extends m{constructor(ce,te=m.now){super(ce,()=>ee.delegate&&ee.delegate!==this?ee.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,te=0,ie){return ee.delegate&&ee.delegate!==this?ee.delegate.schedule(ce,te,ie):super.schedule(ce,te,ie)}flush(ce){const{actions:te}=this;if(this.active)return void te.push(ce);let ie;this.active=!0;do{if(ie=ce.execute(ce.state,ce.delay))break}while(ce=te.shift());if(this.active=!1,ie){for(;ce=te.shift();)ce.unsubscribe();throw ie}}}},3637:(et,Te,V)=>{"use strict";V.d(Te,{z:()=>F});var m=V(6465);const F=new(V(6102).v)(m.o)},7771:(et,Te,V)=>{"use strict";V.d(Te,{c:()=>ie,N:()=>te});var m=V(6465),F=V(6102);const te=new class extends F.v{}(class extends m.o{constructor(le,W){super(le,W),this.scheduler=le,this.work=W}schedule(le,W=0){return W>0?super.schedule(le,W):(this.delay=W,this.state=le,this.scheduler.flush(this),this)}execute(le,W){return W>0||this.closed?super.execute(le,W):this._execute(le,W)}requestAsyncId(le,W,k=0){return null!==k&&k>0||null===k&&this.delay>0?super.requestAsyncId(le,W,k):le.flush(this)}}),ie=te},377:(et,Te,V)=>{"use strict";V.d(Te,{hZ:()=>ee});const ee="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(et,Te,V)=>{"use strict";V.d(Te,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(et,Te,V)=>{"use strict";V.d(Te,{b:()=>m});const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(et,Te,V)=>{"use strict";V.d(Te,{N:()=>ee});const ee=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(et,Te,V)=>{"use strict";function m(ee){setTimeout(()=>{throw ee},0)}V.d(Te,{z:()=>m})},4487:(et,Te,V)=>{"use strict";function m(ee){return ee}V.d(Te,{y:()=>m})},9796:(et,Te,V)=>{"use strict";V.d(Te,{k:()=>m});const m=Array.isArray||(ee=>ee&&"number"==typeof ee.length)},9489:(et,Te,V)=>{"use strict";V.d(Te,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},9105:(et,Te,V)=>{"use strict";function m(ee){return"function"==typeof ee}V.d(Te,{m:()=>m})},1555:(et,Te,V)=>{"use strict";function m(ee){return null!==ee&&"object"==typeof ee}V.d(Te,{K:()=>m})},4072:(et,Te,V)=>{"use strict";function m(ee){return!!ee&&"function"!=typeof ee.subscribe&&"function"==typeof ee.then}V.d(Te,{t:()=>m})},4869:(et,Te,V)=>{"use strict";function m(ee){return ee&&"function"==typeof ee.schedule}V.d(Te,{K:()=>m})},7444:(et,Te,V)=>{"use strict";V.d(Te,{s:()=>L});var m=V(5015),ee=V(4449),ce=V(377),ie=V(6554),le=V(9489),W=V(4072),k=V(1555);const L=Q=>{if(Q&&"function"==typeof Q[ie.L])return(Q=>K=>{const re=Q[ie.L]();if("function"!=typeof re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return re.subscribe(K)})(Q);if((0,le.z)(Q))return(0,m.V)(Q);if((0,W.t)(Q))return(Q=>K=>(Q.then(re=>{K.closed||(K.next(re),K.complete())},re=>K.error(re)).then(null,ee.z),K))(Q);if(Q&&"function"==typeof Q[ce.hZ])return(Q=>K=>{const re=Q[ce.hZ]();for(;;){let we;try{we=re.next()}catch(de){return K.error(de),K}if(we.done){K.complete();break}if(K.next(we.value),K.closed)break}return"function"==typeof re.return&&K.add(()=>{re.return&&re.return()}),K})(Q);{const re=`You provided ${(0,k.K)(Q)?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(re)}}},5015:(et,Te,V)=>{"use strict";V.d(Te,{V:()=>m});const m=ee=>F=>{for(let ce=0,te=ee.length;ce<te&&!F.closed;ce++)F.next(ee[ce]);F.complete()}},9486:(et,Te,V)=>{"use strict";var m=V(3018);let ee=null;function F(){return ee}const Ee=new m.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:W,token:n,providedIn:"platform"}),n})();function W(){return(0,m.LFG)(L)}const k=new m.OlP("Location Initialized");let L=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const s=F().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=F().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,a){Q()?this._history.pushState(t,s,a):this.location.hash=a}replaceState(t,s,a){Q()?this._history.replaceState(t,s,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ee))},n.\u0275prov=(0,m.Yz7)({factory:K,token:n,providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function K(){return new L((0,m.LFG)(Ee))}function re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function de(n){return n&&"?"!==n[0]?"?"+n:n}let q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:ye,token:n,providedIn:"root"}),n})();function ye(n){const e=(0,m.LFG)(Ee).location;return new he((0,m.LFG)(le),e&&e.origin||"")}const ve=new m.OlP("appBaseHref");let he=(()=>{class n extends q{constructor(t,s){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return re(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+de(this._platformLocation.search),a=this._platformLocation.hash;return a&&t?`${s}${a}`:s}pushState(t,s,a,l){const f=this.prepareExternalUrl(a+de(l));this._platformLocation.pushState(t,s,f)}replaceState(t,s,a,l){const f=this.prepareExternalUrl(a+de(l));this._platformLocation.replaceState(t,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le),m.LFG(ve,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n extends q{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=re(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,a,l){let f=this.prepareExternalUrl(a+de(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,s,f)}replaceState(t,s,a,l){let f=this.prepareExternalUrl(a+de(l));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformLocation).historyGo)||void 0===a||a.call(s,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(le),m.LFG(ve,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t,s){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const a=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=we(dt(a)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+de(s))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,s="",a=null){this._platformStrategy.pushState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(s)),a)}replaceState(t,s="",a=null){this._platformStrategy.replaceState(a,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+de(s)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var s,a;null===(a=(s=this._platformStrategy).historyGo)||void 0===a||a.call(s,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(a=>a(t,s))}subscribe(t,s,a){return this._subject.subscribe({next:t,error:s,complete:a})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(q),m.LFG(le))},n.normalizeQueryParams=de,n.joinWithSlash=re,n.stripTrailingSlash=we,n.\u0275prov=(0,m.Yz7)({factory:Le,token:n,providedIn:"root"}),n})();function Le(){return new Fe((0,m.LFG)(q),(0,m.LFG)(le))}function dt(n){return n.replace(/\/index.html$/,"")}var oe=(()=>((oe=oe||{})[oe.Zero=0]="Zero",oe[oe.One=1]="One",oe[oe.Two=2]="Two",oe[oe.Few=3]="Few",oe[oe.Many=4]="Many",oe[oe.Other=5]="Other",oe))();const br=m.kL8;class Jn{}let An=(()=>{class n extends Jn{constructor(t){super(),this.locale=t}getPluralCategory(t,s){switch(br(s||this.locale)(t)){case oe.Zero:return"zero";case oe.One:return"one";case oe.Two:return"two";case oe.Few:return"few";case oe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.soG))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ha=(()=>{class n{constructor(t,s,a,l){this._iterableDiffers=t,this._keyValueDiffers=s,this._ngEl=a,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),t.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),t.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(s.item)}`);this._toggleClass(s.item,!0)}),t.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(s=>this._toggleClass(s,!0)):Object.keys(t).forEach(s=>this._toggleClass(s,!!t[s])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(s=>this._toggleClass(s,!1)):Object.keys(t).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(t,s){(t=t.trim())&&t.split(/\s+/g).forEach(a=>{s?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class fl{constructor(e,t,s,a){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Di=(()=>{class n{constructor(t,s,a){this._viewContainer=t,this._template=s,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=[];t.forEachOperation((a,l,f)=>{if(null==a.previousIndex){const v=this._viewContainer.createEmbeddedView(this._template,new fl(null,this._ngForOf,-1,-1),null===f?void 0:f),b=new jn(a,v);s.push(b)}else if(null==f)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const v=this._viewContainer.get(l);this._viewContainer.move(v,f);const b=new jn(a,v);s.push(b)}});for(let a=0;a<s.length;a++)this._perViewChange(s[a].view,s[a].record);for(let a=0,l=this._viewContainer.length;a<l;a++){const f=this._viewContainer.get(a);f.context.index=a,f.context.count=l,f.context.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(t,s){t.context.$implicit=s.item}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class jn{constructor(e,t){this.record=e,this.view=t}}let Jg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[{provide:Jn,useClass:An}]}),n})();function _o(n){return"server"===n}let vo=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Yu((0,m.LFG)(Ee),window)}),n})();class Yu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=s.currentNode;for(;a;){const l=a.shadowRoot;if(l){const f=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(f)return f}a=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,a=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(s-l[0],a-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ka(this.window.history)||Ka(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ka(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ks extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new ks,ee||(ee=n)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Vi=Vi||document.querySelector("base"),Vi?Vi.getAttribute("href"):null);return null==t?null:function(n){Qo=Qo||document.createElement("a"),Qo.setAttribute("href",n);const e=Qo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Vi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[a,l]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(a.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let Qo,Vi=null;const Qu=new m.OlP("TRANSITION_ID"),Ju=[{provide:m.ip1,useFactory:function(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const s=F(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[Qu,Ee,m.zs3],multi:!0}];class bt{static init(){(0,m.VLi)(new bt)}addToWindow(e){m.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(s=>{const a=m.dqk.getAllAngularTestabilities();let l=a.length,f=!1;const v=function(b){f=f||b,l--,0==l&&s(f)};a.forEach(function(b){b.whenStable(v)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let uh=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ps=new m.OlP("EventManagerPlugins");let ta=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const f=a[l];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ps),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Io{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=F().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let vl=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),gs=(()=>{class n extends vl{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const f=this._doc.createElement("style");f.textContent=l,a.push(s.appendChild(f))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(ch),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ch))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ee))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ch(n){F().remove(n)}const Se={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Tt=/%COMP%/g;function Ls(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?Ls(n,a,t):(a=a.replace(Tt,n),t.push(a))}return t}function hh(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ra=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Bi(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case m.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new ji(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case m.ifc.ShadowDom:return new ms(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=Ls(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ta),m.LFG(gs),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Bi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Se[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=Se[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=Se[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,s,a&m.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,hh(s)):this.eventManager.addEventListener(e,t,hh(s))}}class ji extends Bi{constructor(e,t,s,a){super(e),this.component=s;const l=Ls(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Tt,a+"-"+s.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(Tt,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class ms extends Bi{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=Ls(a.id,a.styles,[]);for(let f=0;f<l.length;f++){const v=document.createElement("style");v.textContent=l[f],this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ja=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ee))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Do=["alt","control","meta","shift"],ic={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hr={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $i=(()=>{class n extends Io{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),f=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,l.domEventName,f))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let f="";if(Do.forEach(b=>{const S=s.indexOf(b);S>-1&&(s.splice(S,1),f+=b+".")}),f+=l,0!=s.length||0===l.length)return null;const v={};return v.domEventName=a,v.fullKey=f,v}static getEventFullKey(t){let s="",a=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&mh.hasOwnProperty(e)&&(e=mh[e]))}return ic[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Do.forEach(l=>{l!=a&&Hr[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ee))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Tl=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function(){ks.makeCurrent(),bt.init()},multi:!0},{provide:Ee,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),Vs=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:ps,useClass:Ja,multi:!0,deps:[Ee,m.R0b,m.Lbi]},{provide:ps,useClass:$i,multi:!0,deps:[Ee]},[],{provide:ra,useClass:ra,deps:[ta,gs,m.AFp]},{provide:m.FYo,useExisting:ra},{provide:vl,useExisting:gs},{provide:gs,useClass:gs,deps:[Ee]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ta,useClass:ta,deps:[ps,m.R0b]},{provide:class{},useClass:uh,deps:[]},[]];let eu=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:Qu,useExisting:m.AFp},Ju]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:Vs,imports:[Jg,m.hGG]}),n})();"undefined"!=typeof window&&window;const Al_firebase={apiKey:"AIzaSyAaiF03WGAZnnhNN2He0pnSr6XN1zIN3i4",authDomain:"firechat-ex1.firebaseapp.com",databaseURL:"https://firechat-ex1-default-rtdb.firebaseio.com",projectId:"firechat-ex1",storageBucket:"firechat-ex1.appspot.com",messagingSenderId:"813785645896",appId:"1:813785645896:web:c53ee91b9fd5700612297d"};var bn=V(8939),un=V(4402),rt=V(5917),Gr=V(9765),Ao=V(7971);class er extends Gr.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ao.N;return this._value}next(e){super.next(this._value=e)}}var vs=V(4869),au=V(9796),Hi=V(7393);class ca extends Hi.L{notifyNext(e,t,s,a,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Eh extends Hi.L{constructor(e,t,s){super(),this.parent=e,this.outerValue=t,this.outerIndex=s,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var wh=V(7444),qr=V(7574);function Sl(n,e,t,s,a=new Eh(n,t,s)){if(!a.closed)return e instanceof qr.y?e.subscribe(a):(0,wh.s)(e)(a)}var la=V(6693);const So={};class bh{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new dc(e,this.resultSelector))}}class dc extends ca{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(So),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let s=0;s<t;s++)this.add(Sl(this,e[s],void 0,s))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,s){const a=this.values,f=this.toRespond?a[s]===So?--this.toRespond:this.toRespond:0;a[s]=t,0===f&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(s){return void this.destination.error(s)}this.destination.next(t)}}const xo=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var uu=V(3282);function Gi(...n){return(0,uu.J)(1)((0,rt.of)(...n))}var pr=V(9193);function da(n){return new qr.y(e=>{let t;try{t=n()}catch(a){return void e.error(a)}return(t?(0,un.D)(t):(0,pr.c)()).subscribe(e)})}var hc=V(2441),vt=V(8002),xi=V(5345);function tr(n,e){return"function"==typeof e?t=>t.pipe(tr((s,a)=>(0,un.D)(n(s,a)).pipe((0,vt.U)((l,f)=>e(s,l,a,f))))):t=>t.lift(new np(n))}class np{constructor(e){this.project=e}call(e,t){return t.subscribe(new Ih(e,this.project))}}class Ih extends xi.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const s=this.index++;try{t=this.project(e,s)}catch(a){return void this.destination.error(a)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const s=new xi.IY(this),a=this.destination;a.add(s),this.innerSubscription=(0,xi.ft)(e,s),this.innerSubscription!==s&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const fc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function cn(n){return e=>0===n?(0,pr.c)():e.lift(new Rl(n))}class Rl{constructor(e){if(this.total=e,this.total<0)throw new fc}call(e,t){return t.subscribe(new Ch(e,this.total))}}class Ch extends Hi.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,s=++this.count;s<=t&&(this.destination.next(e),s===t&&(this.destination.complete(),this.unsubscribe()))}}function cu(...n){const e=n[n.length-1];return(0,vs.K)(e)?(n.pop(),t=>Gi(n,t,e)):t=>Gi(n,t)}function pc(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(a){return a.lift(new Nl(n,e,t))}}class Nl{constructor(e,t,s=!1){this.accumulator=e,this.seed=t,this.hasSeed=s}call(e,t){return t.subscribe(new lu(e,this.accumulator,this.seed,this.hasSeed))}}class lu extends Hi.L{constructor(e,t,s,a){super(e),this.accumulator=t,this._seed=s,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let s;try{s=this.accumulator(this.seed,e,t)}catch(a){this.destination.error(a)}this.seed=s,this.destination.next(s)}}function Ri(n,e){return function(s){return s.lift(new Dh(n,e))}}class Dh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ml(e,this.predicate,this.thisArg))}}class Ml extends Hi.L{constructor(e,t,s){super(e),this.predicate=t,this.thisArg=s,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(s){return void this.destination.error(s)}t&&this.destination.next(e)}}function ci(n){return function(t){const s=new js(n),a=t.lift(s);return s.caught=a}}class js{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ha(e,this.selector,this.caught))}}class ha extends xi.Ds{constructor(e,t,s){super(e),this.selector=t,this.caught=s}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const s=new xi.IY(this);this.add(s);const a=(0,xi.ft)(t,s);a!==s&&this.add(a)}}}var Wr=V(9773);function _n(n,e){return(0,Wr.zg)(n,e,1)}function fa(n){return function(t){return 0===n?(0,pr.c)():t.lift(new pa(n))}}class pa{constructor(e){if(this.total=e,this.total<0)throw new fc}call(e,t){return t.subscribe(new ga(e,this.total))}}class ga extends Hi.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,s=this.total,a=this.count++;t.length<s?t.push(e):t[a%s]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const s=this.count>=this.total?this.total:this.count,a=this.ring;for(let l=0;l<s;l++){const f=t++%s;e.next(a[f])}}e.complete()}}function Ol(n=qi){return e=>e.lift(new li(n))}class li{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new di(e,this.errorFactory))}}class di extends Hi.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function qi(){return new xo}function Wi(n=null){return e=>e.lift(new Ar(n))}class Ar{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new Pl(e,this.defaultValue))}}class Pl extends Hi.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var kl=V(4487);function Es(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Ri((a,l)=>n(a,l,s)):kl.y,cn(1),t?Wi(e):Ol(()=>new xo))}var hi=V(3342),rp=V(1307),I=V(5319);class x{constructor(e){this.callback=e}call(e,t){return t.subscribe(new U(e,this.callback))}}class U extends Hi.L{constructor(e,t){super(e),this.add(new I.w(t))}}class Z{constructor(e,t){this.id=e,this.url=t}}class pe extends Z{constructor(e,t,s="imperative",a=null){super(e,t),this.navigationTrigger=s,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ne extends Z{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class We extends Z{constructor(e,t,s){super(e,t),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ge extends Z{constructor(e,t,s){super(e,t),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rt extends Z{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ft extends Z{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qn extends Z{constructor(e,t,s,a,l){super(e,t),this.urlAfterRedirects=s,this.state=a,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class gr extends Z{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr extends Z{constructor(e,t,s,a){super(e,t),this.urlAfterRedirects=s,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ni{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ma{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fi{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zi{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $s{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gc{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class Ah{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ws(n){return new Ah(n)}const ya="ngNavigationCancelingError";function ip(n){const e=Error("NavigationCancelingError: "+n);return e[ya]=!0,e}function Sh(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const a={};for(let l=0;l<s.length;l++){const f=s[l],v=n[l];if(f.startsWith(":"))a[f.substring(1)]=v;else if(f!==v.path)return null}return{consumed:n.slice(0,s.length),posParams:a}}function Sr(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let a;for(let l=0;l<t.length;l++)if(a=t[l],!mc(n[a],e[a]))return!1;return!0}function mc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((a,l)=>s[l]===a)}return n===e}function xh(n){return Array.prototype.concat.apply([],n)}function sp(n){return n.length>0?n[n.length-1]:null}function mr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zr(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,un.D)(Promise.resolve(n)):(0,rt.of)(n)}const Rh={exact:function Nh(n,e,t){if(!_a(n.segments,e.segments)||!yc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!Nh(n.children[s],e.children[s],t))return!1;return!0},subset:op},Ro={exact:function(n,e){return Sr(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>mc(n[t],e[t]))},ignored:()=>!0};function tm(n,e,t){return Rh[t.paths](n.root,e.root,t.matrixParams)&&Ro[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function op(n,e,t){return rm(n,e,e.segments,t)}function rm(n,e,t,s){if(n.segments.length>t.length){const a=n.segments.slice(0,t.length);return!(!_a(a,t)||e.hasChildren()||!yc(a,t,s))}if(n.segments.length===t.length){if(!_a(n.segments,t)||!yc(n.segments,t,s))return!1;for(const a in e.children)if(!n.children[a]||!op(n.children[a],e.children[a],s))return!1;return!0}{const a=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(_a(n.segments,a)&&yc(n.segments,a,s)&&n.children[At])&&rm(n.children[At],e,l,s)}}function yc(n,e,t){return e.every((s,a)=>Ro[t](n[a].parameters,s.parameters))}class Zi{constructor(e,t,s){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ws(this.queryParams)),this._queryParamMap}toString(){return k_.serialize(this)}}class Ct{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mr(t,(s,a)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oh(this)}}class Ll{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ws(this.parameters)),this._parameterMap}toString(){return Fh(this)}}function _a(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}class sm{}class om{parse(e){const t=new U_(e);return new Zi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${Hs(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(a=>`${bs(t)}=${bs(a)}`).join("&"):`${bs(t)}=${bs(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const k_=new om;function Oh(n){return n.segments.map(e=>Fh(e)).join("/")}function Hs(n,e){if(!n.hasChildren())return Oh(n);if(e){const t=n.children[At]?Hs(n.children[At],!1):"",s=[];return mr(n.children,(a,l)=>{l!==At&&s.push(`${l}:${Hs(a,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function(n,e){let t=[];return mr(n.children,(s,a)=>{a===At&&(t=t.concat(e(s,a)))}),mr(n.children,(s,a)=>{a!==At&&(t=t.concat(e(s,a)))}),t}(n,(s,a)=>a===At?[Hs(n.children[At],!1)]:[`${a}:${Hs(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${Oh(n)}/${t[0]}`:`${Oh(n)}/(${t.join("//")})`}}function Ph(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bs(n){return Ph(n).replace(/%3B/gi,";")}function kh(n){return Ph(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ap(n){return decodeURIComponent(n)}function du(n){return ap(n.replace(/\+/g,"%20"))}function Fh(n){return`${kh(n.path)}${function(n){return Object.keys(n).map(e=>`;${kh(e)}=${kh(n[e])}`).join("")}(n.parameters)}`}const am=/^[^\/()?;=#]+/;function Gs(n){const e=n.match(am);return e?e[0]:""}const L_=/^[^=?&#]+/,hu=/^[^?&#]+/;class U_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ct([],{}):new Ct([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[At]=new Ct(e,t)),s}parseSegment(){const e=Gs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ll(ap(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Gs(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const a=Gs(this.remaining);a&&(s=a,this.capture(s))}e[ap(t)]=ap(s)}parseQueryParam(e){const t=function(n){const e=n.match(L_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(hu);return e?e[0]:""}(this.remaining);f&&(s=f,this.capture(s))}const a=du(t),l=du(s);if(e.hasOwnProperty(a)){let f=e[a];Array.isArray(f)||(f=[f],e[a]=f),f.push(l)}else e[a]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=Gs(this.remaining),a=this.remaining[s.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let l;s.indexOf(":")>-1?(l=s.substr(0,s.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=At);const f=this.parseChildren();t[l]=1===Object.keys(f).length?f[At]:new Ct([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Yi{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=va(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=va(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=_c(e,this._root);return t.length<2?[]:t[t.length-2].children.map(a=>a.value).filter(a=>a!==e)}pathFromRoot(e){return _c(e,this._root).map(t=>t.value)}}function va(n,e){if(n===e.value)return e;for(const t of e.children){const s=va(n,t);if(s)return s}return null}function _c(n,e){if(n===e.value)return[e];for(const t of e.children){const s=_c(n,t);if(s.length)return s.unshift(e),s}return[]}class No{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Lh extends Yi{constructor(e,t){super(e),this.snapshot=t,dm(this,e)}toString(){return this.snapshot.toString()}}function um(n,e){const t=function(n,e){const f=new Vh([],{},{},"",{},At,e,null,n.root,-1,{});return new lm("",new No(f,[]))}(n,e),s=new er([new Ll("",{})]),a=new er({}),l=new er({}),f=new er({}),v=new er(""),b=new Mo(s,a,f,v,l,At,e,t.root);return b.snapshot=t.root,new Lh(new No(b,[]),t)}class Mo{constructor(e,t,s,a,l,f,v,b){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=f,this.component=v,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>ws(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>ws(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cm(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const a=t[s],l=t[s-1];if(a.routeConfig&&""===a.routeConfig.path)s--;else{if(l.component)break;s--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(s))}class Vh{constructor(e,t,s,a,l,f,v,b,S,N,P){this.url=e,this.params=t,this.queryParams=s,this.fragment=a,this.data=l,this.outlet=f,this.component=v,this.routeConfig=b,this._urlSegment=S,this._lastPathIndex=N,this._resolve=P}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ws(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ws(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lm extends Yi{constructor(e,t){super(t),this.url=e,dm(this,t)}toString(){return lp(this._root)}}function dm(n,e){e.value._routerState=n,e.children.forEach(t=>dm(n,t))}function lp(n){const e=n.children.length>0?` { ${n.children.map(lp).join(", ")} } `:"";return`${n.value}${e}`}function Oo(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Sr(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Sr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Uh(n,e){return Sr(n.params,e.params)&&function(n,e){return _a(n,e)&&n.every((t,s)=>Sr(t.parameters,e[s].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Uh(n.parent,e.parent))}function Ws(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const a=function(n,e,t){return e.children.map(s=>{for(const a of t.children)if(n.shouldReuseRoute(s.value,a.value.snapshot))return Ws(n,s,a);return Ws(n,s)})}(n,e,t);return new No(s,a)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const f=l.route;return Ul(e,f),f}}const s=function(n){return new Mo(new er(n.url),new er(n.params),new er(n.queryParams),new er(n.fragment),new er(n.data),n.outlet,n.component,n)}(e.value),a=e.children.map(l=>Ws(n,l));return new No(s,a)}}function Ul(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)Ul(n.children[t],e.children[t])}function hp(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bh(n){return"object"==typeof n&&null!=n&&n.outlets}function Bl(n,e,t,s,a){let l={};return s&&mr(s,(f,v)=>{l[v]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),new Zi(t.root===n?e:jl(t.root,n,e),l,a)}function jl(n,e,t){const s={};return mr(n.children,(a,l)=>{s[l]=a===e?t:jl(a,e,t)}),new Ct(n.segments,s)}class jh{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&hp(s[0]))throw new Error("Root segment cannot have matrix parameters");const a=s.find(Bh);if(a&&a!==sp(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pm{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function fp(n,e,t){if(n||(n=new Ct([],{})),0===n.segments.length&&n.hasChildren())return Hh(n,e,t);const s=function(n,e,t){let s=0,a=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(s>=t.length)return l;const f=n.segments[a],v=t[s];if(Bh(v))break;const b=`${v}`,S=s<t.length-1?t[s+1]:null;if(a>0&&void 0===b)break;if(b&&S&&"object"==typeof S&&void 0===S.outlets){if(!Gh(b,S,f))return l;s+=2}else{if(!Gh(b,{},f))return l;s++}a++}return{match:!0,pathIndex:a,commandIndex:s}}(n,e,t),a=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const l=new Ct(n.segments.slice(0,s.pathIndex),{});return l.children[At]=new Ct(n.segments.slice(s.pathIndex),n.children),Hh(l,0,a)}return s.match&&0===a.length?new Ct(n.segments,{}):s.match&&!n.hasChildren()?vc(n,e,t):s.match?Hh(n,0,a):vc(n,e,t)}function Hh(n,e,t){if(0===t.length)return new Ct(n.segments,{});{const s=function(n){return Bh(n[0])?n[0].outlets:{[At]:n}}(t),a={};return mr(s,(l,f)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[f]=fp(n.children[f],e,l))}),mr(n.children,(l,f)=>{void 0===s[f]&&(a[f]=l)}),new Ct(n.segments,a)}}function vc(n,e,t){const s=n.segments.slice(0,e);let a=0;for(;a<t.length;){const l=t[a];if(Bh(l)){const b=ym(l.outlets);return new Ct(s,b)}if(0===a&&hp(t[0])){s.push(new Ll(n.segments[e].path,$l(t[0]))),a++;continue}const f=Bh(l)?l.outlets[At]:`${l}`,v=a<t.length-1?t[a+1]:null;f&&v&&hp(v)?(s.push(new Ll(f,$l(v))),a+=2):(s.push(new Ll(f,{})),a++)}return new Ct(s,{})}function ym(n){const e={};return mr(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=vc(new Ct([],{}),0,t))}),e}function $l(n){const e={};return mr(n,(t,s)=>e[s]=`${t}`),e}function Gh(n,e,t){return n==t.path&&Sr(e,t.parameters)}class _m{constructor(e,t,s,a){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=a}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),Oo(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const a=Vl(t);e.children.forEach(l=>{const f=l.value.outlet;this.deactivateRoutes(l,a[f],s),delete a[f]}),mr(a,(l,f)=>{this.deactivateRouteAndItsChildren(l,s)})}deactivateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(a===l)if(a.component){const f=s.getContext(a.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,s);else l&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet);if(s&&s.outlet){const a=s.outlet.detach(),l=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),a=s&&e.value.component?s.children:t,l=Vl(e);for(const f of Object.keys(l))this.deactivateRouteAndItsChildren(l[f],a);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const a=Vl(t);e.children.forEach(l=>{this.activateRoutes(l,a[l.value.outlet],s),this.forwardEvent(new Fl(l.value.snapshot))}),e.children.length&&this.forwardEvent(new zi(e.value.snapshot))}activateRoutes(e,t,s){const a=e.value,l=t?t.value:null;if(Oo(a),a===l)if(a.component){const f=s.getOrCreateContext(a.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,s);else if(a.component){const f=s.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const v=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),f.children.onOutletReAttached(v.contexts),f.attachRef=v.componentRef,f.route=v.route.value,f.outlet&&f.outlet.attach(v.componentRef,v.route.value),vm(v.route)}else{const v=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(a.snapshot),b=v?v.module.componentFactoryResolver:null;f.attachRef=null,f.route=a,f.resolver=b,f.outlet&&f.outlet.activateWith(a,b),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,s)}}function vm(n){Oo(n.value),n.children.forEach(vm)}class xr{constructor(e,t){this.routes=e,this.module=t}}function Qi(n){return"function"==typeof n}function fu(n){return n instanceof Zi}const Po=Symbol("INITIAL_VALUE");function ln(){return tr(n=>function(...n){let e,t;return(0,vs.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,au.k)(n[0])&&(n=n[0]),(0,la.n)(n,t).lift(new bh(e))}(n.map(e=>e.pipe(cn(1),cu(Po)))).pipe(pc((e,t)=>{let s=!1;return t.reduce((a,l,f)=>a!==Po?a:(l===Po&&(s=!0),s||!1!==l&&f!==t.length-1&&!fu(l)?a:l),e)},Po),Ri(e=>e!==Po),(0,vt.U)(e=>fu(e)?e:!0===e),cn(1)))}let Gl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,s){1&t&&m._UZ(0,"router-outlet")},directives:function(){return[X_]},encapsulation:2}),n})();function mp(n,e=""){for(let t=0;t<n.length;t++){const s=n[t];wm(s,Rr(e,s))}}function wm(n,e){n.children&&mp(n.children,e)}function Rr(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ea(n){const e=n.children&&n.children.map(Ea),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=Gl),t}function tn(n){return n.outlet||At}function qh(n,e){const t=n.filter(s=>tn(s)===e);return t.push(...n.filter(s=>tn(s)!==e)),t}const Wh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ql(n,e,t){var s;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Wh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||Sh)(t,n,e);if(!l)return Object.assign({},Wh);const f={};mr(l.posParams,(b,S)=>{f[S]=b.path});const v=l.consumed.length>0?Object.assign(Object.assign({},f),l.consumed[l.consumed.length-1].parameters):f;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:v,positionalParamSegments:null!==(s=l.posParams)&&void 0!==s?s:{}}}function Ji(n,e,t,s,a="corrected"){if(t.length>0&&function(n,e,t){return t.some(s=>zh(n,e,s)&&tn(s)!==At)}(n,t,s)){const f=new Ct(e,function(n,e,t,s){const a={};a[At]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&tn(l)!==At){const f=new Ct([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[tn(l)]=f}return a}(n,e,s,new Ct(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(s=>zh(n,e,s))}(n,t,s)){const f=new Ct(n.segments,function(n,e,t,s,a,l){const f={};for(const v of s)if(zh(n,t,v)&&!a[tn(v)]){const b=new Ct([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===l?n.segments.length:e.length,f[tn(v)]=b}return Object.assign(Object.assign({},a),f)}(n,e,t,s,n.children,a));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const l=new Ct(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function zh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Im(n,e,t,s){return!!(tn(n)===s||s!==At&&zh(e,t,n))&&("**"===n.path||ql(e,n,t).matched)}function vp(n,e,t){return 0===e.length&&!n.children[t]}class pu{constructor(e){this.segmentGroup=e||null}}class _{constructor(e){this.urlTree=e}}function h(n){return new qr.y(e=>e.error(new pu(n)))}function p(n){return new qr.y(e=>e.error(new _(n)))}function E(n){return new qr.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class z{constructor(e,t,s,a,l){this.configLoader=t,this.urlSerializer=s,this.urlTree=a,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=Ji(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ct(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,At).pipe((0,vt.U)(l=>this.createUrlTree(Ue(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ci(l=>{if(l instanceof _)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof pu?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,At).pipe((0,vt.U)(a=>this.createUrlTree(Ue(a),e.queryParams,e.fragment))).pipe(ci(a=>{throw a instanceof pu?this.noMatchError(a):a}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,s){const a=e.segments.length>0?new Ct([],{[At]:e}):e;return new Zi(a,t,s)}expandSegmentGroup(e,t,s,a){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe((0,vt.U)(l=>new Ct([],l))):this.expandSegment(e,s,t,s.segments,a,!0)}expandChildren(e,t,s){const a=[];for(const l of Object.keys(s.children))"primary"===l?a.unshift(l):a.push(l);return(0,un.D)(a).pipe(_n(l=>{const f=s.children[l],v=qh(t,l);return this.expandSegmentGroup(e,v,f,l).pipe((0,vt.U)(b=>({segment:b,outlet:l})))}),pc((l,f)=>(l[f.outlet]=f.segment,l),{}),function(n,e){const t=arguments.length>=2;return s=>s.pipe(n?Ri((a,l)=>n(a,l,s)):kl.y,fa(1),t?Wi(e):Ol(()=>new xo))}())}expandSegment(e,t,s,a,l,f){return(0,un.D)(s).pipe(_n(v=>this.expandSegmentAgainstRoute(e,t,s,v,a,l,f).pipe(ci(S=>{if(S instanceof pu)return(0,rt.of)(null);throw S}))),Es(v=>!!v),ci((v,b)=>{if(v instanceof xo||"EmptyError"===v.name){if(vp(t,a,l))return(0,rt.of)(new Ct([],{}));throw new pu(t)}throw v}))}expandSegmentAgainstRoute(e,t,s,a,l,f,v){return Im(a,t,l,f)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(e,t,a,l,f):v&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,f):h(t):h(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,a,l,f){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,a,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,a){const l=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?p(l):this.lineralizeSegments(s,l).pipe((0,Wr.zg)(f=>{const v=new Ct(f,{});return this.expandSegment(e,v,t,f,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,a,l,f){const{matched:v,consumedSegments:b,lastChild:S,positionalParamSegments:N}=ql(t,a,l);if(!v)return h(t);const P=this.applyRedirectCommands(b,a.redirectTo,N);return a.redirectTo.startsWith("/")?p(P):this.lineralizeSegments(a,P).pipe((0,Wr.zg)(Y=>this.expandSegment(e,t,s,Y.concat(l.slice(S)),f,!1)))}matchSegmentAgainstRoute(e,t,s,a,l){if("**"===s.path)return s.loadChildren?(s._loadedConfig?(0,rt.of)(s._loadedConfig):this.configLoader.load(e.injector,s)).pipe((0,vt.U)(Y=>(s._loadedConfig=Y,new Ct(a,{})))):(0,rt.of)(new Ct(a,{}));const{matched:f,consumedSegments:v,lastChild:b}=ql(t,s,a);if(!f)return h(t);const S=a.slice(b);return this.getChildConfig(e,s,a).pipe((0,Wr.zg)(P=>{const Y=P.module,J=P.routes,{segmentGroup:xe,slicedSegments:$e}=Ji(t,v,S,J),Ze=new Ct(xe.segments,xe.children);if(0===$e.length&&Ze.hasChildren())return this.expandChildren(Y,J,Ze).pipe((0,vt.U)(Ut=>new Ct(v,Ut)));if(0===J.length&&0===$e.length)return(0,rt.of)(new Ct(v,{}));const Ot=tn(s)===l;return this.expandSegment(Y,Ze,J,$e,Ot?At:l,!0).pipe((0,vt.U)(Nn=>new Ct(v.concat(Nn.segments),Nn.children)))}))}getChildConfig(e,t,s){return t.children?(0,rt.of)(new xr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,rt.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,s).pipe((0,Wr.zg)(a=>{return a?this.configLoader.load(e.injector,t).pipe((0,vt.U)(l=>(t._loadedConfig=l,l))):(n=t,new qr.y(e=>e.error(ip(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,rt.of)(new xr([],e))}runCanLoadGuards(e,t,s){const a=t.canLoad;if(!a||0===a.length)return(0,rt.of)(!0);const l=a.map(f=>{const v=e.get(f);let b;if((n=v)&&Qi(n.canLoad))b=v.canLoad(t,s);else{if(!Qi(v))throw new Error("Invalid CanLoad guard");b=v(t,s)}var n;return zr(b)});return(0,rt.of)(l).pipe(ln(),(0,hi.b)(f=>{if(!fu(f))return;const v=ip(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw v.url=f,v}),(0,vt.U)(f=>!0===f))}lineralizeSegments(e,t){let s=[],a=t.root;for(;;){if(s=s.concat(a.segments),0===a.numberOfChildren)return(0,rt.of)(s);if(a.numberOfChildren>1||!a.children[At])return E(e.redirectTo);a=a.children[At]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreatreUrlTree(e,t,s,a){const l=this.createSegmentGroup(e,t.root,s,a);return new Zi(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return mr(e,(a,l)=>{if("string"==typeof a&&a.startsWith(":")){const v=a.substring(1);s[l]=t[v]}else s[l]=a}),s}createSegmentGroup(e,t,s,a){const l=this.createSegments(e,t.segments,s,a);let f={};return mr(t.children,(v,b)=>{f[b]=this.createSegmentGroup(e,v,s,a)}),new Ct(l,f)}createSegments(e,t,s,a){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,a):this.findOrReturn(l,s))}findPosParam(e,t,s){const a=s[t.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return a}findOrReturn(e,t){let s=0;for(const a of t){if(a.path===e.path)return t.splice(s),a;s++}return e}}function Ue(n){const e={};for(const s of Object.keys(n.children)){const l=Ue(n.children[s]);(l.segments.length>0||l.hasChildren())&&(e[s]=l)}return function(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new Ct(n.segments.concat(e.segments),e.children)}return n}(new Ct(n.segments,e))}class lt{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tt{constructor(e,t){this.component=e,this.route=t}}function Wn(n,e,t){const s=n._root;return gu(s,e?e._root:null,t,[s.value])}function rr(n,e,t){const s=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(s?s.module.injector:t).get(n)}function gu(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=Vl(e);return n.children.forEach(f=>{(function(n,e,t,s,a={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,f=e?e.value:null,v=t?t.getContext(n.value.outlet):null;if(f&&l.routeConfig===f.routeConfig){const b=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!_a(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_a(n.url,e.url)||!Sr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uh(n,e)||!Sr(n.queryParams,e.queryParams);case"paramsChange":default:return!Uh(n,e)}}(f,l,l.routeConfig.runGuardsAndResolvers);b?a.canActivateChecks.push(new lt(s)):(l.data=f.data,l._resolvedData=f._resolvedData),gu(n,e,l.component?v?v.children:null:t,s,a),b&&v&&v.outlet&&v.outlet.isActivated&&a.canDeactivateChecks.push(new tt(v.outlet.component,f))}else f&&wc(e,v,a),a.canActivateChecks.push(new lt(s)),gu(n,null,l.component?v?v.children:null:t,s,a)})(f,l[f.value.outlet],t,s.concat([f.value]),a),delete l[f.value.outlet]}),mr(l,(f,v)=>wc(f,t.getContext(v),a)),a}function wc(n,e,t){const s=Vl(n),a=n.value;mr(s,(l,f)=>{wc(l,a.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new tt(a.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,a))}class k0{}function oT(n){return new qr.y(e=>e.error(n))}class G_{constructor(e,t,s,a,l,f){this.rootComponentType=e,this.config=t,this.urlTree=s,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=f}recognize(){const e=Ji(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,At);if(null===t)return null;const s=new Vh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new No(s,t),l=new lm(this.url,a);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,s=cm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(e,t,s){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,s)}processChildren(e,t){const s=[];for(const l of Object.keys(t.children)){const f=t.children[l],v=qh(e,l),b=this.processSegmentGroup(v,f,l);if(null===b)return null;s.push(...b)}const a=Kh(s);return a.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet)),a}processSegment(e,t,s,a){for(const l of e){const f=this.processSegmentAgainstRoute(l,t,s,a);if(null!==f)return f}return vp(t,s,a)?[]:null}processSegmentAgainstRoute(e,t,s,a){if(e.redirectTo||!Im(e,t,s,a))return null;let l,f=[],v=[];if("**"===e.path){const J=s.length>0?sp(s).parameters:{};l=new Vh(s,J,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sm(e),tn(e),e.component,e,W_(t),Am(t)+s.length,z_(e))}else{const J=ql(t,e,s);if(!J.matched)return null;f=J.consumedSegments,v=s.slice(J.lastChild),l=new Vh(f,J.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sm(e),tn(e),e.component,e,W_(t),Am(t)+f.length,z_(e))}const b=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:S,slicedSegments:N}=Ji(t,f,v,b.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);var n;if(0===N.length&&S.hasChildren()){const J=this.processChildren(b,S);return null===J?null:[new No(l,J)]}if(0===b.length&&0===N.length)return[new No(l,[])];const P=tn(e)===a,Y=this.processSegment(b,S,N,P?At:a);return null===Y?null:[new No(l,Y)]}}function F0(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Kh(n){const e=[],t=new Set;for(const s of n){if(!F0(s)){e.push(s);continue}const a=e.find(l=>s.value.routeConfig===l.value.routeConfig);void 0!==a?(a.children.push(...s.children),t.add(a)):e.push(s)}for(const s of t){const a=Kh(s.children);e.push(new No(s.value,a))}return e.filter(s=>!t.has(s))}function W_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Am(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Sm(n){return n.data||{}}function z_(n){return n.resolve||{}}function Cp(n){return tr(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,vt.U)(()=>e)):(0,rt.of)(e)})}class hT extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Z_=new m.OlP("ROUTES");class V0{constructor(e,t,s,a){this.loader=e,this.compiler=t,this.onLoadStartListener=s,this.onLoadEndListener=a}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const a=this.loadModuleFactory(t.loadChildren).pipe((0,vt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=l.create(e);return new xr(xh(f.injector.get(Z_,void 0,m.XFs.Self|m.XFs.Optional)).map(Ea),f)}),ci(l=>{throw t._loader$=void 0,l}));return t._loader$=new hc.c(a,()=>new Gr.xQ).pipe((0,rp.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,un.D)(this.loader.load(e)):zr(e()).pipe((0,Wr.zg)(t=>t instanceof m.YKP?(0,rt.of)(t):(0,un.D)(this.compiler.compileModuleAsync(t))))}}class fT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wl,this.attachRef=null}}class Wl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const s=this.getOrCreateContext(e);s.outlet=t,this.contexts.set(e,s)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new fT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class U0{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Q_(n){throw n}function pT(n,e,t){return e.parse("/")}function B0(n,e){return(0,rt.of)(null)}const j0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ir=(()=>{class n{constructor(t,s,a,l,f,v,b,S){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=a,this.location=l,this.config=S,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Gr.xQ,this.errorHandler=Q_,this.malformedUriErrorHandler=pT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:B0,afterPreactivation:B0},this.urlHandlingStrategy=new U0,this.routeReuseStrategy=new hT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(m.h0i),this.console=f.get(m.c2e);const Y=f.get(m.R0b);this.isNgZoneEnabled=Y instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(S),this.currentUrlTree=new Zi(new Ct([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new V0(v,b,J=>this.triggerEvent(new Ni(J)),J=>this.triggerEvent(new ma(J))),this.routerState=um(this.currentUrlTree,this.rootComponentType),this.transitions=new er({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const s=this.events;return t.pipe(Ri(a=>0!==a.id),(0,vt.U)(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),tr(a=>{let l=!1,f=!1;return(0,rt.of)(a).pipe((0,hi.b)(v=>{this.currentNavigation={id:v.id,initialUrl:v.currentRawUrl,extractedUrl:v.extractedUrl,trigger:v.source,extras:v.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),tr(v=>{const b=this.browserUrlTree.toString(),S=!this.navigated||v.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(v.rawUrl))return Dp(v.source)&&(this.browserUrlTree=v.extractedUrl),(0,rt.of)(v).pipe(tr(P=>{const Y=this.transitions.getValue();return s.next(new pe(P.id,this.serializeUrl(P.extractedUrl),P.source,P.restoredState)),Y!==this.transitions.getValue()?pr.E:Promise.resolve(P)}),function(n,e,t,s){return tr(a=>function(n,e,t,s,a){return new z(n,e,t,s,a).apply()}(n,e,t,a.extractedUrl,s).pipe((0,vt.U)(l=>Object.assign(Object.assign({},a),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,hi.b)(P=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:P.urlAfterRedirects})}),function(n,e,t,s,a){return(0,Wr.zg)(l=>function(n,e,t,s,a="emptyOnly",l="legacy"){try{const f=new G_(n,e,t,s,a,l).recognize();return null===f?oT(new k0):(0,rt.of)(f)}catch(f){return oT(f)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),s,a).pipe((0,vt.U)(f=>Object.assign(Object.assign({},l),{targetSnapshot:f}))))}(this.rootComponentType,this.config,P=>this.serializeUrl(P),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,hi.b)(P=>{"eager"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(P.urlAfterRedirects,P),this.browserUrlTree=P.urlAfterRedirects);const Y=new Rt(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);s.next(Y)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Y,extractedUrl:J,source:xe,restoredState:$e,extras:Ze}=v,Ot=new pe(Y,this.serializeUrl(J),xe,$e);s.next(Ot);const nn=um(J,this.rootComponentType).snapshot;return(0,rt.of)(Object.assign(Object.assign({},v),{targetSnapshot:nn,urlAfterRedirects:J,extras:Object.assign(Object.assign({},Ze),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=v.rawUrl,this.browserUrlTree=v.urlAfterRedirects,v.resolve(null),pr.E}),Cp(v=>{const{targetSnapshot:b,id:S,extractedUrl:N,rawUrl:P,extras:{skipLocationChange:Y,replaceUrl:J}}=v;return this.hooks.beforePreactivation(b,{navigationId:S,appliedUrlTree:N,rawUrlTree:P,skipLocationChange:!!Y,replaceUrl:!!J})}),(0,hi.b)(v=>{const b=new Ft(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),(0,vt.U)(v=>Object.assign(Object.assign({},v),{guards:Wn(v.targetSnapshot,v.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Wr.zg)(t=>{const{targetSnapshot:s,currentSnapshot:a,guards:{canActivateChecks:l,canDeactivateChecks:f}}=t;return 0===f.length&&0===l.length?(0,rt.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,s){return(0,un.D)(n).pipe((0,Wr.zg)(a=>function(n,e,t,s,a){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,rt.of)(!0);const f=l.map(v=>{const b=rr(v,e,a);let S;if(function(n){return n&&Qi(n.canDeactivate)}(b))S=zr(b.canDeactivate(n,e,t,s));else{if(!Qi(b))throw new Error("Invalid CanDeactivate guard");S=zr(b(n,e,t,s))}return S.pipe(Es())});return(0,rt.of)(f).pipe(ln())}(a.component,a.route,t,e,s)),Es(a=>!0!==a,!0))}(f,s,a,n).pipe((0,Wr.zg)(v=>v&&function(n){return"boolean"==typeof n}(v)?function(n,e,t,s){return(0,un.D)(e).pipe(_n(a=>Gi(function(n,e){return null!==n&&e&&e(new fi(n)),(0,rt.of)(!0)}(a.route.parent,s),function(n,e){return null!==n&&e&&e(new $s(n)),(0,rt.of)(!0)}(a.route,s),function(n,e,t){const s=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>da(()=>{const v=f.guards.map(b=>{const S=rr(b,f.node,t);let N;if(function(n){return n&&Qi(n.canActivateChild)}(S))N=zr(S.canActivateChild(s,n));else{if(!Qi(S))throw new Error("Invalid CanActivateChild guard");N=zr(S(s,n))}return N.pipe(Es())});return(0,rt.of)(v).pipe(ln())}));return(0,rt.of)(l).pipe(ln())}(n,a.path,t),function(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return(0,rt.of)(!0);const a=s.map(l=>da(()=>{const f=rr(l,e,t);let v;if(function(n){return n&&Qi(n.canActivate)}(f))v=zr(f.canActivate(e,n));else{if(!Qi(f))throw new Error("Invalid CanActivate guard");v=zr(f(e,n))}return v.pipe(Es())}));return(0,rt.of)(a).pipe(ln())}(n,a.route,t))),Es(a=>!0!==a,!0))}(s,l,n,e):(0,rt.of)(v)),(0,vt.U)(v=>Object.assign(Object.assign({},t),{guardsResult:v})))})}(this.ngModule.injector,v=>this.triggerEvent(v)),(0,hi.b)(v=>{if(fu(v.guardsResult)){const S=ip(`Redirecting to "${this.serializeUrl(v.guardsResult)}"`);throw S.url=v.guardsResult,S}const b=new qn(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot,!!v.guardsResult);this.triggerEvent(b)}),Ri(v=>!!v.guardsResult||(this.restoreHistory(v),this.cancelNavigationTransition(v,""),!1)),Cp(v=>{if(v.guards.canActivateChecks.length)return(0,rt.of)(v).pipe((0,hi.b)(b=>{const S=new gr(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(S)}),tr(b=>{let S=!1;return(0,rt.of)(b).pipe(function(n,e){return(0,Wr.zg)(t=>{const{targetSnapshot:s,guards:{canActivateChecks:a}}=t;if(!a.length)return(0,rt.of)(t);let l=0;return(0,un.D)(a).pipe(_n(f=>function(n,e,t,s){return function(n,e,t,s){const a=Object.keys(n);if(0===a.length)return(0,rt.of)({});const l={};return(0,un.D)(a).pipe((0,Wr.zg)(f=>function(n,e,t,s){const a=rr(n,e,s);return zr(a.resolve?a.resolve(e,t):a(e,t))}(n[f],e,t,s).pipe((0,hi.b)(v=>{l[f]=v}))),fa(1),(0,Wr.zg)(()=>Object.keys(l).length===a.length?(0,rt.of)(l):pr.E))}(n._resolve,n,e,s).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),cm(n,t).resolve),null)))}(f.route,s,n,e)),(0,hi.b)(()=>l++),fa(1),(0,Wr.zg)(f=>l===a.length?(0,rt.of)(t):pr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,hi.b)({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,hi.b)(b=>{const S=new nr(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(S)}))}),Cp(v=>{const{targetSnapshot:b,id:S,extractedUrl:N,rawUrl:P,extras:{skipLocationChange:Y,replaceUrl:J}}=v;return this.hooks.afterPreactivation(b,{navigationId:S,appliedUrlTree:N,rawUrlTree:P,skipLocationChange:!!Y,replaceUrl:!!J})}),(0,vt.U)(v=>{const b=function(n,e,t){const s=Ws(n,e._root,t?t._root:void 0);return new Lh(s,e)}(this.routeReuseStrategy,v.targetSnapshot,v.currentRouterState);return Object.assign(Object.assign({},v),{targetRouterState:b})}),(0,hi.b)(v=>{this.currentUrlTree=v.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(v.urlAfterRedirects,v.rawUrl),this.routerState=v.targetRouterState,"deferred"===this.urlUpdateStrategy&&(v.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,v),this.browserUrlTree=v.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(s=>(new _m(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.rootContexts,this.routeReuseStrategy,v=>this.triggerEvent(v)),(0,hi.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new x(n))}(()=>{var v;if(!l&&!f){const b=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,b)):this.cancelNavigationTransition(a,b)}(null===(v=this.currentNavigation)||void 0===v?void 0:v.id)===a.id&&(this.currentNavigation=null)}),ci(v=>{if(f=!0,function(n){return n&&n[ya]}(v)){const b=fu(v.url);b||(this.navigated=!0,this.restoreHistory(a,!0));const S=new We(a.id,this.serializeUrl(a.extractedUrl),v.message);s.next(S),b?setTimeout(()=>{const N=this.urlHandlingStrategy.merge(v.url,this.rawUrlTree),P={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Dp(a.source)};this.scheduleNavigation(N,"imperative",null,P,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const b=new Ge(a.id,this.serializeUrl(a.extractedUrl),v);s.next(b);try{a.resolve(this.errorHandler(v))}catch(S){a.reject(S)}}return pr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,s)&&setTimeout(()=>{const{source:a,state:l,urlTree:f}=s,v={replaceUrl:!0};if(l){const b=Object.assign({},l);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(v.state=b)}this.scheduleNavigation(f,a,l,v)},0),this.lastLocationChangeInfo=s}))}extractLocationChangeInfoFromEvent(t){var s;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,s){if(!t)return!0;const a=s.urlTree.toString()===t.urlTree.toString();return s.transitionId!==t.transitionId||!a||!("hashchange"===s.source&&"popstate"===t.source||"popstate"===s.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){mp(t),this.config=t.map(Ea),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:a,queryParams:l,fragment:f,queryParamsHandling:v,preserveFragment:b}=s,S=a||this.routerState.root,N=b?this.currentUrlTree.fragment:f;let P=null;switch(v){case"merge":P=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":P=this.currentUrlTree.queryParams;break;default:P=l||null}return null!==P&&(P=this.removeEmptyProps(P)),function(n,e,t,s,a){if(0===t.length)return Bl(e.root,e.root,e,s,a);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jh(!0,0,n);let e=0,t=!1;const s=n.reduce((a,l,f)=>{if("object"==typeof l&&null!=l){if(l.outlets){const v={};return mr(l.outlets,(b,S)=>{v[S]="string"==typeof b?b.split("/"):b}),[...a,{outlets:v}]}if(l.segmentPath)return[...a,l.segmentPath]}return"string"!=typeof l?[...a,l]:0===f?(l.split("/").forEach((v,b)=>{0==b&&"."===v||(0==b&&""===v?t=!0:".."===v?e++:""!=v&&a.push(v))}),a):[...a,l]},[]);return new jh(t,e,s)}(t);if(l.toRoot())return Bl(e.root,new Ct([],{}),e,s,a);const f=function(n,e,t){if(n.isAbsolute)return new pm(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new pm(l,l===e.root,0)}const s=hp(n.commands[0])?0:1;return function(n,e,t){let s=n,a=e,l=t;for(;l>a;){if(l-=a,s=s.parent,!s)throw new Error("Invalid number of '../'");a=s.segments.length}return new pm(s,!1,a-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+s,n.numberOfDoubleDots)}(l,e,n),v=f.processChildren?Hh(f.segmentGroup,f.index,l.commands):fp(f.segmentGroup,f.index,l.commands);return Bl(f.segmentGroup,v,e,s,a)}(S,this.currentUrlTree,t,P,null!=N?N:null)}navigateByUrl(t,s={skipLocationChange:!1}){const a=fu(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(a){s=this.malformedUriErrorHandler(a,this.urlSerializer,t)}return s}isActive(t,s){let a;if(a=!0===s?Object.assign({},j0):!1===s?Object.assign({},$0):s,fu(t))return tm(this.currentUrlTree,t,a);const l=this.parseUrl(t);return tm(this.currentUrlTree,l,a)}removeEmptyProps(t){return Object.keys(t).reduce((s,a)=>{const l=t[a];return null!=l&&(s[a]=l),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ne(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,a,l,f){var v,b;if(this.disposed)return Promise.resolve(!1);const S=this.getTransition(),N=Dp(s)&&S&&!Dp(S.source),J=(this.lastSuccessfulId===S.id||this.currentNavigation?S.rawUrl:S.urlAfterRedirects).toString()===t.toString();if(N&&J)return Promise.resolve(!0);let xe,$e,Ze;f?(xe=f.resolve,$e=f.reject,Ze=f.promise):Ze=new Promise((Nn,Ut)=>{xe=Nn,$e=Ut});const Ot=++this.navigationId;let nn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),nn=a&&a.\u0275routerPageId?a.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(v=this.browserPageId)&&void 0!==v?v:0:(null!==(b=this.browserPageId)&&void 0!==b?b:0)+1):nn=0,this.setTransition({id:Ot,targetPageId:nn,source:s,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:xe,reject:$e,promise:Ze,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ze.catch(Nn=>Promise.reject(Nn))}setBrowserUrl(t,s){const a=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(a)||s.extras.replaceUrl?this.location.replaceState(a,"",l):this.location.go(a,"",l)}restoreHistory(t,s=!1){var a,l;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===f?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s){const a=new We(t.id,this.serializeUrl(t.extractedUrl),s);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.DyG),m.LFG(sm),m.LFG(Wl),m.LFG(Fe),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Dp(n){return"imperative"!==n}let X_=(()=>{class n{constructor(t,s,a,l,f){this.parentContexts=t,this.location=s,this.resolver=a,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=l||At,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(s=s||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),v=this.parentContexts.getOrCreateContext(this.name).children,b=new ev(t,v,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Wl),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class ev{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===Mo?this.route:e===Wl?this.childContexts:this.parent.get(e,t)}}class tv{}class Tp{preload(e,t){return(0,rt.of)(null)}}let nv=(()=>{class n{constructor(t,s,a,l,f){this.router=t,this.injector=l,this.preloadingStrategy=f,this.loader=new V0(s,a,S=>t.triggerEvent(new Ni(S)),S=>t.triggerEvent(new ma(S)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ri(t=>t instanceof Ne),_n(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const a=[];for(const l of s)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const f=l._loadedConfig;a.push(this.processRoutes(f.module,f.routes))}else l.loadChildren&&!l.canLoad?a.push(this.preloadConfig(t,l)):l.children&&a.push(this.processRoutes(t,l.children));return(0,un.D)(a).pipe((0,uu.J)(),(0,vt.U)(l=>{}))}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?(0,rt.of)(s._loadedConfig):this.loader.load(t.injector,s)).pipe((0,Wr.zg)(l=>(s._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ir),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(tv))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ap=(()=>{class n{constructor(t,s,a={}){this.router=t,this.viewportScroller=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof pe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ne&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.router.triggerEvent(new gc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ir),m.LFG(vo),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const mu=new m.OlP("ROUTER_CONFIGURATION"),Jh=new m.OlP("ROUTER_FORROOT_GUARD"),W0=[Fe,{provide:sm,useClass:om},{provide:ir,useFactory:function(n,e,t,s,a,l,f,v={},b,S){const N=new ir(null,n,e,t,s,a,l,xh(f));return b&&(N.urlHandlingStrategy=b),S&&(N.routeReuseStrategy=S),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(v,N),v.enableTracing&&N.events.subscribe(P=>{var Y,J;null===(Y=console.group)||void 0===Y||Y.call(console,`Router Event: ${P.constructor.name}`),console.log(P.toString()),console.log(P),null===(J=console.groupEnd)||void 0===J||J.call(console)}),N},deps:[sm,Wl,Fe,m.zs3,m.v3s,m.Sil,Z_,mu,[class{},new m.FiY],[class{},new m.FiY]]},Wl,{provide:Mo,useFactory:function(n){return n.routerState.root},deps:[ir]},{provide:m.v3s,useClass:m.EAV},nv,Tp,class{preload(e,t){return t().pipe(ci(()=>(0,rt.of)(null)))}},{provide:mu,useValue:{enableTracing:!1}}];function yT(){return new m.PXZ("Router",ir)}let z0=(()=>{class n{constructor(t,s){}static forRoot(t,s){return{ngModule:n,providers:[W0,_T(t),{provide:Jh,useFactory:Z0,deps:[[ir,new m.FiY,new m.tp0]]},{provide:mu,useValue:s||{}},{provide:q,useFactory:rv,deps:[le,[new m.tBr(ve),new m.FiY],mu]},{provide:Ap,useFactory:K0,deps:[ir,vo,mu]},{provide:tv,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:Tp},{provide:m.PXZ,multi:!0,useFactory:yT},[iv,{provide:m.ip1,multi:!0,useFactory:ET,deps:[iv]},{provide:J0,useFactory:ko,deps:[iv]},{provide:m.tb,multi:!0,useExisting:J0}]]}}static forChild(t){return{ngModule:n,providers:[_T(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Jh,8),m.LFG(ir,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function K0(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ap(n,e,t)}function rv(n,e,t={}){return t.useHash?new Ce(n,e):new he(n,e)}function Z0(n){return"guarded"}function _T(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:Z_,multi:!0,useValue:n}]}let iv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Gr.xQ}appInitializer(){return this.injector.get(k,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const a=new Promise(v=>s=v),l=this.injector.get(ir),f=this.injector.get(mu);return"disabled"===f.initialNavigation?(l.setUpLocationChangeListener(),s(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,rt.of)(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),l.initialNavigation()):s(!0),a})}bootstrapListener(t){const s=this.injector.get(mu),a=this.injector.get(nv),l=this.injector.get(Ap),f=this.injector.get(ir),v=this.injector.get(m.z2F);t===v.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&f.initialNavigation(),a.setUpPreloading(),l.init(),f.resetRootComponentType(v.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function ET(n){return n.appInitializer.bind(n)}function ko(n){return n.bootstrapListener.bind(n)}const J0=new m.OlP("Router Initializer"),wT=[];let bT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[z0.forRoot(wT)],z0]}),n})();var IT=V(7841),eb=V(3637),gi=V(6643);function sv(){return n=>n.lift(new CT)}class CT{call(e,t){return t.subscribe(new Et(e))}}class Et extends Hi.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}class nb{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Rm(e,this.compare,this.keySelector))}}class Rm extends Hi.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:a}=this;t=a?a(e):e}catch(a){return this.destination.error(a)}let s=!1;if(this.hasKey)try{const{compare:a}=this;s=a(this.key,t)}catch(a){return this.destination.error(a)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}V(6096);var Ke,rb=V(4486),be=V(8239),yu=V(5452),zs=V(6034),Ia=V(5601),St=V(3854),ov="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ic={},ib=ib||{},ct=ov||self;function zl(){}function Xh(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var av="closure_uid_"+(1e9*Math.random()>>>0),sb=0;function aR(n,e,t){return n.call.apply(n.bind,arguments)}function DT(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function mi(n,e,t){return(mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aR:DT).apply(null,arguments)}function Sp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var f=Array(arguments.length-2),v=2;v<arguments.length;v++)f[v-2]=arguments[v];return e.prototype[a].apply(s,f)}}function Cc(){this.s=this.s,this.o=this.o}var uR={};Cc.prototype.s=!1,Cc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,av)&&n[av]||(n[av]=++sb)}(this);delete uR[n]}},Cc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const TT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},AT=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function ST(n){return Array.prototype.concat.apply([],arguments)}function ob(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function cv(n){return/^[\s\xa0]*$/.test(n)}var ts,xT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function es(n,e){return-1!=n.indexOf(e)}function ab(n,e){return n<e?-1:n>e?1:0}e:{var _u=ct.navigator;if(_u){var Nm=_u.userAgent;if(Nm){ts=Nm;break e}}ts=""}function lv(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function dv(n){const e={};for(const t in n)e[t]=n[t];return e}var Mm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hv(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<Mm.length;l++)t=Mm[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function xp(n){return xp[" "](n),n}xp[" "]=zl;var Pm,n,Dc=es(ts,"Opera"),Zl=es(ts,"Trident")||es(ts,"MSIE"),ub=es(ts,"Edge"),cb=ub||Zl,Om=es(ts,"Gecko")&&!(es(ts.toLowerCase(),"webkit")&&!es(ts,"Edge"))&&!(es(ts,"Trident")||es(ts,"MSIE"))&&!es(ts,"Edge"),NT=es(ts.toLowerCase(),"webkit")&&!es(ts,"Edge");function fv(){var n=ct.document;return n?n.documentMode:void 0}e:{var pv="",Yl=(n=ts,Om?/rv:([^\);]+)(\)|;)/.exec(n):ub?/Edge\/([\d\.]+)/.exec(n):Zl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):NT?/WebKit\/(\S+)/.exec(n):Dc?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yl&&(pv=Yl?Yl[1]:""),Zl){var Tc=fv();if(null!=Tc&&Tc>parseFloat(pv)){Pm=String(Tc);break e}}Pm=pv}var gv={};function ef(){return e=gv,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=xT(String(Pm)).split("."),t=xT("9").split("."),s=Math.max(e.length,t.length);for(let f=0;0==n&&f<s;f++){var a=e[f]||"",l=t[f]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=ab(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||ab(0==a[2].length,0==l[2].length)||ab(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n}();var e}var MT=ct.document&&Zl&&(fv()||parseInt(Pm,10))||void 0,lb=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{ct.addEventListener("test",zl,e),ct.removeEventListener("test",zl,e)}catch(t){}return n}();function Kr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xl(n,e){if(Kr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Om){e:{try{xp(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xl.Z.h.call(this)}}Kr.prototype.h=function(){this.defaultPrevented=!0},Nr(Xl,Kr);var mv={2:"touch",3:"pen",4:"mouse"};Xl.prototype.h=function(){Xl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var tf="closure_listenable_"+(1e6*Math.random()|0),km=0;function OT(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++km,this.ca=this.fa=!1}function Rp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function yv(n){this.src=n,this.g={},this.h=0}function Fm(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=TT(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Rp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Lm(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}yv.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var f=Lm(n,e,s,a);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new OT(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var _v="closure_lm_"+(1e6*Math.random()|0),Vm={};function db(n,e,t,s,a){if(s&&s.once)return fb(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)db(n,e[l],t,s,a);return null}return t=Np(t),n&&n[tf]?n.N(e,t,Kl(s)?!!s.capture:!!s,a):hb(n,e,t,!1,s,a)}function hb(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var f=Kl(a)?!!a.capture:!!a,v=yb(n);if(v||(n[_v]=v=new yv(n)),(t=v.add(e,t,s,f,l)).proxy)return t;if(s=function(){var e=mb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)lb||(a=f),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(PT(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function fb(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)fb(n,e[l],t,s,a);return null}return t=Np(t),n&&n[tf]?n.O(e,t,Kl(s)?!!s.capture:!!s,a):hb(n,e,t,!0,s,a)}function pb(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)pb(n,e[l],t,s,a);else s=Kl(s)?!!s.capture:!!s,t=Np(t),n&&n[tf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Lm(l=n.g[e],t,s,a))&&(Rp(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=yb(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Lm(e,t,s,a)),(t=-1<n?e[n]:null)&&gb(t))}function gb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[tf])Fm(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(PT(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=yb(e))?(Fm(t,n),0==t.h&&(t.src=null,e[_v]=null)):Rp(n)}}}function PT(n){return n in Vm?Vm[n]:Vm[n]="on"+n}function mb(n,e){if(n.ca)n=!0;else{e=new Xl(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&gb(n),n=t.call(s,e)}return n}function yb(n){return(n=n[_v])instanceof yv?n:null}var vv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Np(n){return"function"==typeof n?n:(n[vv]||(n[vv]=function(e){return n.handleEvent(e)}),n[vv])}function yr(){Cc.call(this),this.i=new yv(this),this.P=this,this.I=null}function Zr(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new Kr(e,n);else if(e instanceof Kr)e.target=e.target||n;else{var a=e;hv(e=new Kr(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var f=e.g=t[l];a=Um(f,s,!0,e)&&a}if(a=Um(f=e.g=n,s,!0,e)&&a,a=Um(f,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=Um(f=e.g=t[l],s,!1,e)&&a}function Um(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var f=e[l];if(f&&!f.ca&&f.capture==t){var v=f.listener,b=f.ia||f.src;f.fa&&Fm(n.i,f),a=!1!==v.call(b,s)&&a}}return a&&!s.defaultPrevented}Nr(yr,Cc),yr.prototype[tf]=!0,yr.prototype.removeEventListener=function(n,e,t,s){pb(this,n,e,t,s)},yr.prototype.M=function(){if(yr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Rp(t[s]);delete n.g[e],n.h--}}this.I=null},yr.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},yr.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Ev=ct.JSON.stringify;function _b(){var n=$m;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jm,wv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new FT,n=>n.reset());class FT{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function LT(n){ct.setTimeout(()=>{throw n},0)}function Bm(n,e){jm||function(){var n=ct.Promise.resolve(void 0);jm=function(){n.then(UT)}}(),Ks||(jm(),Ks=!0),$m.add(n,e)}var Ks=!1,$m=new class{constructor(){this.h=this.g=null}add(e,t){const s=wv.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function UT(){for(var n;n=_b();){try{n.h.call(n.g)}catch(t){LT(t)}var e=wv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ks=!1}function Hm(n,e){yr.call(this),this.h=n||1,this.g=e||ct,this.j=mi(this.kb,this),this.l=Date.now()}function vb(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Gm(n,e,t){if("function"==typeof n)t&&(n=mi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=mi(n.handleEvent,n)}return 2147483647<Number(e)?-1:ct.setTimeout(n,e||0)}function Eb(n){n.g=Gm(()=>{n.g=null,n.i&&(n.i=!1,Eb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(Hm,yr),(Ke=Hm.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zr(this,"tick"),this.da&&(vb(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){Hm.Z.M.call(this),vb(this),delete this.g};class BT extends Cc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Eb(this)}M(){super.M(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mp(n){Cc.call(this),this.h=n,this.g={}}Nr(Mp,Cc);var qm=[];function wb(n,e,t,s){Array.isArray(t)||(t&&(qm[0]=t.toString()),t=qm);for(var a=0;a<t.length;a++){var l=db(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function bb(n){lv(n.g,function(e,t){this.g.hasOwnProperty(t)&&gb(e)},n),n.g={}}function ed(){this.g=!0}function Ac(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var f=1;f<a.length;f++)a[f]=""}}}return Ev(t)}catch(v){return e}}(n,t)+(s?" "+s:"")})}Mp.prototype.M=function(){Mp.Z.M.call(this),bb(this)},Mp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ed.prototype.Aa=function(){this.g=!1},ed.prototype.info=function(){};var td={},Cb=null;function nf(){return Cb=Cb||new yr}function $T(n){Kr.call(this,td.Ma,n)}function Op(n){const e=nf();Zr(e,new $T(e,n))}function Cv(n,e){Kr.call(this,td.STAT_EVENT,n),this.stat=e}function yi(n){const e=nf();Zr(e,new Cv(e,n))}function Dv(n,e){Kr.call(this,td.Na,n),this.size=e}function rf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){n()},e)}td.Ma="serverreachability",Nr($T,Kr),td.STAT_EVENT="statevent",Nr(Cv,Kr),td.Na="timingevent",Nr(Dv,Kr);var Pp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ca={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sf(){}function Tb(){}sf.prototype.h=null;var nd,Wm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sc(){Kr.call(this,"d")}function zm(){Kr.call(this,"c")}function xc(){}function kp(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Mp(this),this.P=Ab,this.W=new Hm(n=cb?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Km}function Km(){this.i=null,this.g="",this.h=!1}Nr(Sc,Kr),Nr(zm,Kr),Nr(xc,sf),xc.prototype.g=function(){return new XMLHttpRequest},xc.prototype.i=function(){return{}},nd=new xc;var Ab=45e3,Tv={},Fp={};function Av(n,e,t){n.K=1,n.v=Qm(Rc(e)),n.s=t,n.U=!0,Zm(n,null)}function Zm(n,e){n.F=Date.now(),Da(n),n.A=Rc(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),Ub(t.h,"t",s),n.C=0,t=n.l.H,n.h=new Km,n.g=jv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new BT(mi(n.Ia,n,n.g),n.O)),wb(n.V,n.g,"readystatechange",n.gb),e=n.H?dv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Op(1),function(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var f="",v=l.split("&"),b=0;b<v.length;b++){var S=v[b].split("=");if(1<S.length){var N=S[0];S=S[1];var P=N.split("_");f=2<=P.length&&"type"==P[1]?f+(N+"=")+S+"&":f+(N+"=redacted&")}}else f=null;else f=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Sb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function xb(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=Rb(n,t),a==Fp){4==e&&(n.o=4,yi(14),s=!1),Ac(n.j,n.m,null,"[Incomplete Response]");break}if(a==Tv){n.o=4,yi(15),Ac(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}Ac(n.j,n.m,a,null),xv(n,a)}Sb(n)&&a!=Fp&&a!=Tv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yi(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Oc(e),e.L=!0,yi(11))):(Ac(n.j,n.m,t,"[Invalid Chunked Response]"),Zs(n),Lp(n))}function Rb(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Fp:(t=Number(e.substring(t,s)),isNaN(t)?Tv:(s+=1)+t>e.length?Fp:(e=e.substr(s,t),n.C=s+t,e))}function Da(n){n.Y=Date.now()+n.P,Sv(n,n.P)}function Sv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=rf(mi(n.eb,n),e)}function Ym(n){n.B&&(ct.clearTimeout(n.B),n.B=null)}function Lp(n){0==n.l.G||n.I||ld(n.l,n)}function Zs(n){Ym(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,vb(n.W),bb(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||$b(t.i,n)))if(t.I=n.N,!n.J&&$b(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(S){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=rf(mi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;bu(t),Nc(t)}Mc(t),yi(18)}if(1>=zT(t.i)&&t.ka){try{t.ka()}catch(S){}t.ka=void 0}}else Pc(t,11)}else if((n.J||t.g==n)&&bu(t),!cv(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let S=a[e];if(t.U=S[0],S=S[1],2==t.G)if("c"==S[0]){t.J=S[1],t.la=S[2];const N=S[3];null!=N&&(t.ma=N,t.h.info("VER="+t.ma));const P=S[4];null!=P&&(t.za=P,t.h.info("SVER="+t.za));const Y=S[5];null!=Y&&"number"==typeof Y&&0<Y&&(t.K=s=1.5*Y,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const J=n.g;if(J){const xe=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xe){var l=s.i;!l.g&&(es(xe,"spdy")||es(xe,"quic")||es(xe,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Up(l,l.h),l.h=null))}if(s.D){const $e=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;$e&&(s.sa=$e,xn(s.F,s.D,$e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((s=t).oa=Bv(s,s.H?s.la:null,s.W),f.J){Hb(s.i,f);var v=f,b=s.K;b&&v.setTimeout(b),v.B&&(Ym(v),Da(v)),s.g=f}else ud(s);0<t.l.length&&od(t)}else"stop"!=S[0]&&"close"!=S[0]||Pc(t,7);else 3==t.G&&("stop"==S[0]||"close"==S[0]?"stop"==S[0]?Pc(t,7):Js(t):"noop"!=S[0]&&t.j&&t.j.wa(S),t.A=0)}Op(4)}catch(S){}}function Rv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xh(n)||"string"==typeof n)AT(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Xh(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;a=(s=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Xh(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n)).length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function of(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof of)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function Nb(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];rd(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)rd(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function rd(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=kp.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==Ta(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const N=Ta(this.g);var e=this.g.Da();const P=this.g.ba();if(!(3>N)&&(3!=N||cb||this.g&&(this.h.h||this.g.ga()||Qs(this.g)))){this.I||4!=N||7==e||Op(8==e||0>=P?3:2),Ym(this);var t=this.g.ba();this.N=t;t:if(Sb(this)){var s=Qs(this.g);n="";var a=s.length,l=4==Ta(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Zs(this),Lp(this);var f="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function(n,e,t,s,a,l,f){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+f})}(this.j,this.u,this.A,this.m,this.X,N,t),this.i){if(this.$&&!this.J){t:{if(this.g){var v,b=this.g;if((v=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cv(v)){var S=v;break t}}S=null}if(!(t=S)){this.i=!1,this.o=3,yi(12),Zs(this),Lp(this);break e}Ac(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xv(this,t)}this.U?(xb(this,N,f),cb&&this.i&&3==N&&(wb(this.V,this.W,"tick",this.fb),this.W.start())):(Ac(this.j,this.m,f,null),xv(this,f)),4==N&&Zs(this),this.i&&!this.I&&(4==N?ld(this.l,this):(this.i=!1,Da(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,yi(12)):(this.o=0,yi(13)),Zs(this),Lp(this)}}}catch(N){}},Ke.fb=function(){if(this.g){var n=Ta(this.g),e=this.g.ga();this.C<e.length&&(Ym(this),xb(this,n,e),this.i&&4!=n&&Da(this))}},Ke.cancel=function(){this.I=!0,Zs(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Op(3),yi(17)),Zs(this),this.o=2,Lp(this)):Sv(this,this.Y-n)},(Ke=of.prototype).R=function(){Nb(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return Nb(this),this.g.concat()},Ke.get=function(n,e){return rd(this.h,n)?this.h[n]:e},Ke.set=function(n,e){rd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var Nv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof vu){this.g=void 0!==e?e:n.g,Ys(this,n.j),this.s=n.s,af(this,n.i),uf(this,n.m),this.l=n.l,e=n.h;var t=new df;t.i=e.i,e.g&&(t.g=new of(e.g),t.h=e.h),GT(this,t),this.o=n.o}else n&&(t=String(n).match(Nv))?(this.g=!!e,Ys(this,t[1]||"",!0),this.s=cf(t[2]||""),af(this,t[3]||"",!0),uf(this,t[4]),this.l=cf(t[5]||"",!0),GT(this,t[6]||"",!0),this.o=cf(t[7]||"")):(this.g=!!e,this.h=new df(null,this.g))}function Rc(n){return new vu(n)}function Ys(n,e,t){n.j=t?cf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function af(n,e,t){n.i=t?cf(e,!0):e}function uf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function GT(n,e,t){e instanceof df?(n.h=e,function(n,e){e&&!n.j&&(Eu(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Lb(this,s),Ub(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=lf(e,kb)),n.h=new df(e,n.g))}function xn(n,e,t){n.h.set(e,t)}function Qm(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function cf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function lf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(lf(e,Pb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(lf(e,Pb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(lf(t,"/"==t.charAt(0)?Mv:Vp,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",lf(t,Fb)),n.join("")};var Pb=/[#\/\?@]/g,Vp=/[#\?:]/g,Mv=/[#\?]/g,kb=/[#\?@]/g,Fb=/#/g;function df(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Eu(n){n.g||(n.g=new of,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Lb(n,e){Eu(n),e=hf(n,e),rd(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,rd((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Nb(n)))}function Vb(n,e){return Eu(n),e=hf(n,e),rd(n.g.h,e)}function Ub(n,e,t){Lb(n,e),0<t.length&&(n.i=null,n.g.set(hf(n,e),ob(t)),n.h+=t.length)}function hf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Ov(n){this.l=n||WT,n=ct.PerformanceNavigationTiming?0<(n=ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ct.g&&ct.g.Ea&&ct.g.Ea()&&ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=df.prototype).add=function(n,e){Eu(this),this.i=null,n=hf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){Eu(this),this.g.forEach(function(t,s){AT(t,function(a){n.call(e,a,s,this)},this)},this)},Ke.T=function(){Eu(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},Ke.R=function(n){Eu(this);var e=[];if("string"==typeof n)Vb(this,n)&&(e=ST(e,this.g.get(hf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ST(e,n[t])}return e},Ke.set=function(n,e){return Eu(this),this.i=null,Vb(this,n=hf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var f=a;""!==s[l]&&(f+="="+encodeURIComponent(String(s[l]))),n.push(f)}}return this.i=n.join("&")};var WT=10;function jb(n){return!!n.h||!!n.g&&n.g.size>=n.j}function zT(n){return n.h?1:n.g?n.g.size:0}function $b(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Up(n,e){n.g?n.g.add(e):n.h=e}function Hb(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Pv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ob(n.i)}function Jm(){}function dR(){this.g=new Jm}function Fo(n,e,t){const s=t||"";try{Rv(n,function(a,l){let f=a;Kl(a)&&(f=Ev(a)),e.push(s+l+"="+encodeURIComponent(f))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function kv(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function Xm(n){this.l=n.$b||null,this.j=n.ib||!1}function Bp(n,e){yr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ey,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ov.prototype.cancel=function(){if(this.i=Pv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Jm.prototype.stringify=function(n){return ct.JSON.stringify(n,void 0)},Jm.prototype.parse=function(n){return ct.JSON.parse(n,void 0)},Nr(Xm,sf),Xm.prototype.g=function(){return new Bp(this.l,this.j)},Xm.prototype.i=function(n){return function(){return n}}({}),Nr(Bp,yr);var ey=0;function Fv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function jp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ty(n)}function ty(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=Bp.prototype).open=function(n,e){if(this.readyState!=ey)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ty(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jp(this)),this.readyState=ey},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ty(this)),this.g&&(this.readyState=3,ty(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?jp(this):ty(this),3==this.readyState&&Fv(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,jp(this))},Ke.Ta=function(n){this.g&&(this.response=n,jp(this))},Ke.ha=function(){this.g&&jp(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Bp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Gb=ct.JSON.parse;function Ln(n){yr.call(this),this.headers=new of,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qb,this.K=this.L=!1}Nr(Ln,yr);var qb="",Lv=/^https?$/i,KT=["POST","PUT"];function YT(n){return"content-type"==n.toLowerCase()}function Wb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zb(n),id(n)}function zb(n){n.D||(n.D=!0,Zr(n,"complete"),Zr(n,"error"))}function Kb(n){if(n.h&&void 0!==ib&&(!n.C[1]||4!=Ta(n)||2!=n.ba()))if(n.v&&4==Ta(n))Gm(n.Fa,0,n);else if(Zr(n,"readystatechange"),4==Ta(n)){n.h=!1;try{const v=n.ba();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===v){var a=String(n.H).match(Nv)[1]||null;if(!a&&ct.self&&ct.self.location){var l=ct.self.location.protocol;a=l.substr(0,l.length-1)}s=!Lv.test(a?a.toLowerCase():"")}t=s}if(t)Zr(n,"complete"),Zr(n,"success");else{n.m=6;try{var f=2<Ta(n)?n.g.statusText:""}catch(b){f=""}n.j=f+" ["+n.ba()+"]",zb(n)}}finally{id(n)}}}function id(n,e){if(n.g){sd(n);const t=n.g,s=n.C[0]?zl:null;n.g=null,n.C=null,e||Zr(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function sd(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(ct.clearTimeout(n.A),n.A=null)}function Ta(n){return n.g?n.g.readyState:0}function Qs(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case qb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vv(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function(n){let e="";return lv(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function Hp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ny(n){this.za=0,this.l=[],this.h=new ed,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hp("baseRetryDelayMs",5e3,n),this.$a=Hp("retryDelaySeedMs",1e4,n),this.Ya=Hp("forwardChannelMaxRetries",2,n),this.ra=Hp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Ov(n&&n.concurrentRequestLimit),this.Ca=new dR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Js(n){if(Yr(n),3==n.G){var e=n.V++,t=Rc(n.F);xn(t,"SID",n.J),xn(t,"RID",e),xn(t,"TYPE","terminate"),Aa(n,t),(e=new kp(n,n.h,e,void 0)).K=2,e.v=Qm(Rc(t)),t=!1,ct.navigator&&ct.navigator.sendBeacon&&(t=ct.navigator.sendBeacon(e.v.toString(),"")),!t&&ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=jv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Da(e)}Uv(n)}function Nc(n){n.g&&(Oc(n),n.g.cancel(),n.g=null)}function Yr(n){Nc(n),n.u&&(ct.clearTimeout(n.u),n.u=null),bu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ct.clearTimeout(n.m),n.m=null)}function wu(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&od(n)}function od(n){jb(n.i)||n.m||(n.m=!0,Bm(n.Ha,n),n.C=0)}function ry(n,e){var t;t=e?e.m:n.V++;const s=Rc(n.F);xn(s,"SID",n.J),xn(s,"RID",t),xn(s,"AID",n.U),Aa(n,s),n.o&&n.s&&Vv(s,n.o,n.s),t=new kp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ad(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Up(n.i,t),Av(t,s,e)}function Aa(n,e){n.j&&Rv({},function(t,s){xn(e,s,t)})}function ad(n,e,t){t=Math.min(n.l.length,t);var s=n.j?mi(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const f=["count="+t];-1==l?0<t?(l=a[0].h,f.push("ofs="+l)):l=0:f.push("ofs="+l);let v=!0;for(let b=0;b<t;b++){let S=a[b].h;const N=a[b].g;if(S-=l,0>S)l=Math.max(0,a[b].h-100),v=!1;else try{Fo(N,f,"req"+S+"_")}catch(P){s&&s(N)}}if(v){s=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function ud(n){n.g||n.u||(n.Y=1,Bm(n.Ga,n),n.A=0)}function Mc(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=rf(mi(n.Ga,n),dd(n,n.A)),n.A++,0))}function Oc(n){null!=n.B&&(ct.clearTimeout(n.B),n.B=null)}function cd(n){n.g=new kp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Rc(n.oa);xn(e,"RID","rpc"),xn(e,"SID",n.J),xn(e,"CI",n.N?"0":"1"),xn(e,"AID",n.U),Aa(n,e),xn(e,"TYPE","xmlhttp"),n.o&&n.s&&Vv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Qm(Rc(e)),t.s=null,t.U=!0,Zm(t,n)}function bu(n){null!=n.v&&(ct.clearTimeout(n.v),n.v=null)}function ld(n,e){var t=null;if(n.g==e){bu(n),Oc(n),n.g=null;var s=2}else{if(!$b(n.i,e))return;t=e.D,Hb(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Zr(s=nf(),new Dv(s,t,e,a)),od(n)}else ud(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function(n,e){return!(zT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=rf(mi(n.Ha,n,e),dd(n,n.C)),n.C++,0)))}(n,e)||2==s&&Mc(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:Pc(n,5);break;case 4:Pc(n,10);break;case 3:Pc(n,6);break;default:Pc(n,2)}}function dd(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Pc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=mi(n.jb,n);t||(t=new vu("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||Ys(t,"https"),Qm(t)),function(n,e){const t=new ed;if(ct.Image){const s=new Image;s.onload=Sp(kv,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Sp(kv,t,s,"TestLoadImage: error",!1,e),s.onabort=Sp(kv,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Sp(kv,t,s,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else yi(2);n.G=0,n.j&&n.j.va(e),Uv(n),Yr(n)}function Uv(n){n.G=0,n.I=-1,n.j&&((0!=Pv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ob(n.l),n.l.length=0),n.j.ua())}function Bv(n,e,t){let s=function(n){return n instanceof vu?Rc(n):new vu(n,void 0)}(t);if(""!=s.i)e&&af(s,e+"."+s.i),uf(s,s.m);else{const a=ct.location;s=function(n,e,t,s){var a=new vu(null,void 0);return n&&Ys(a,n),e&&af(a,e),t&&uf(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&lv(n.aa,function(a,l){xn(s,l,a)}),t=n.sa,(e=n.D)&&t&&xn(s,e,t),xn(s,"VER",n.ma),Aa(n,s),s}function jv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ln(t&&n.Ba&&!n.qa?new Xm({ib:!0}):n.qa)).L=n.H,e}function $v(){}function Gp(){if(Zl&&!(10<=Number(MT)))throw Error("Environmental error: no available transport.")}function ns(n,e){yr.call(this),this.g=new ny(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!cv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ff(this)}function Hv(n){Sc.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Gv(){zm.call(this),this.status=1}function ff(n){this.g=n}(Ke=Ln.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nd.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:nd),this.g.onreadystatechange=mi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Wb(this,l)}n=t||"";const a=new of(this.headers);s&&Rv(s,function(l,f){a.set(f,l)}),s=function(n){e:{var e=YT;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=ct.FormData&&n instanceof ct.FormData,!(0<=TT(KT,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,f){this.g.setRequestHeader(f,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sd(this),0<this.B&&((this.K=function(n){return Zl&&ef()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mi(this.pa,this)):this.A=Gm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Wb(this,l)}},Ke.pa=function(){void 0!==ib&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zr(this,"complete"),Zr(this,"abort"),id(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),id(this,!0)),Ln.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?Kb(this):this.cb())},Ke.cb=function(){Kb(this)},Ke.ba=function(){try{return 2<Ta(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Gb(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=ny.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new kp(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=dv(l),hv(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ad(this,a,e),xn(t=Rc(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),Aa(this,t),this.o&&l&&Vv(t,this.o,l),Up(this.i,a),this.Ra&&xn(t,"TYPE","init"),this.ja?(xn(t,"$req",e),xn(t,"SID","null"),a.$=!0,Av(a,t,null)):Av(a,t,e),this.G=2}}else 3==this.G&&(n?ry(this,n):0==this.l.length||jb(this.i)||ry(this))},Ke.Ga=function(){if(this.u=null,cd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=rf(mi(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,yi(10),Nc(this),cd(this))},Ke.ab=function(){null!=this.v&&(this.v=null,Nc(this),Mc(this),yi(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),yi(2)):(this.h.info("Failed to ping google.com"),yi(1))},(Ke=$v.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},Gp.prototype.g=function(n,e){return new ns(n,e)},Nr(ns,yr),ns.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Bm(mi(n.hb,n,e))),yi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Bv(n,null,n.W),od(n)},ns.prototype.close=function(){Js(this.g)},ns.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,wu(this.g,e)}else this.v?((e={}).__data__=Ev(n),wu(this.g,e)):wu(this.g,n)},ns.prototype.M=function(){this.g.j=null,delete this.j,Js(this.g),delete this.g,ns.Z.M.call(this)},Nr(Hv,Sc),Nr(Gv,zm),Nr(ff,$v),ff.prototype.xa=function(){Zr(this.g,"a")},ff.prototype.wa=function(n){Zr(this.g,new Hv(n))},ff.prototype.va=function(n){Zr(this.g,new Gv(n))},ff.prototype.ua=function(){Zr(this.g,"b")},Gp.prototype.createWebChannel=Gp.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,Pp.NO_ERROR=0,Pp.TIMEOUT=8,Pp.HTTP_ERROR=6,Ca.COMPLETE="complete",Tb.EventType=Wm,Wm.OPEN="a",Wm.CLOSE="b",Wm.ERROR="c",Wm.MESSAGE="d",yr.prototype.listen=yr.prototype.N,Ln.prototype.listenOnce=Ln.prototype.O,Ln.prototype.getLastError=Ln.prototype.La,Ln.prototype.getLastErrorCode=Ln.prototype.Da,Ln.prototype.getStatus=Ln.prototype.ba,Ln.prototype.getResponseJson=Ln.prototype.Qa,Ln.prototype.getResponseText=Ln.prototype.ga,Ln.prototype.send=Ln.prototype.ea;var Zb=Ic.createWebChannelTransport=function(){return new Gp},QT=Ic.getStatEventTarget=function(){return nf()},qv=Ic.ErrorCode=Pp,Yb=Ic.EventType=Ca,JT=Ic.Event=td,XT=Ic.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eA=Ic.FetchXmlHttpFactory=Xm,qp=Ic.WebChannel=Tb,tA=Ic.XhrIo=Ln;const Wv="@firebase/firestore";class Qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qr.UNAUTHENTICATED=new Qr(null),Qr.GOOGLE_CREDENTIALS=new Qr("google-credentials-uid"),Qr.FIRST_PARTY=new Qr("first-party-uid"),Qr.MOCK_USER=new Qr("mock-user");let pf="9.2.0";const hd=new Ia.Yd("@firebase/firestore");function zv(){return hd.logLevel}function Ve(n,...e){if(hd.logLevel<=Ia.in.DEBUG){const t=e.map(Kv);hd.debug(`Firestore (${pf}): ${n}`,...t)}}function _r(n,...e){if(hd.logLevel<=Ia.in.ERROR){const t=e.map(Kv);hd.error(`Firestore (${pf}): ${n}`,...t)}}function iy(n,...e){if(hd.logLevel<=Ia.in.WARN){const t=e.map(Kv);hd.warn(`Firestore (${pf}): ${n}`,...t)}}function Kv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${pf}) INTERNAL ASSERTION FAILED: `+n;throw _r(e),new Error(e)}function ft(n,e){n||st()}function Be(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rA{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class fR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qr.UNAUTHENTICATED))}shutdown(){}}class iA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Jb{constructor(e){this.t=e,this.currentUser=Qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=S=>this.i!==a?(a=this.i,t(S)):Promise.resolve();let f=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Jr,e.enqueueRetryable(()=>l(this.currentUser))};const v=()=>{const S=f;e.enqueueRetryable((0,be.Z)(function*(){yield S.promise,yield l(s.currentUser)}))},b=S=>{Ve("FirebaseCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),v()};this.t.onInit(S=>b(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?b(S):(Ve("FirebaseCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Jr)}},0),v()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ve("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ft("string"==typeof s.accessToken),new rA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ft(null===e||"string"==typeof e),new Qr(e)}}class pR{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=Qr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class sA{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new pR(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.g(s),this.p=s=>t.writeSequenceNumber(s))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function oA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}Mr.T=-1;class Zv{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=oA(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Nt(n,e){return n<e?-1:n>e?1:0}function fd(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function Wp(n){return n+"\0"}class Or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Or.fromMillis(Date.now())}static fromDate(e){return Or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Or(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Or(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Xb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class zp{constructor(e,t,s){void 0===t?t=0:t>e.length&&st(),void 0===s?s=e.length-t:s>e.length-t&&st(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===zp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zp?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),f=t.get(a);if(l<f)return-1;if(l>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends zp{construct(e,t,s){return new Kt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Oe(me.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const tI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends zp{construct(e,t,s){return new Xr(e,t,s)}static isValidIdentifier(e){return tI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new Oe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;a<e.length;){const v=e[a];if("\\"===v){if(a+1===e.length)throw new Oe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[a+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Oe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,a+=2}else"`"===v?(f=!f,a++):"."!==v||f?(s+=v,a++):(l(),a++)}if(l(),f)throw new Oe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xr(t)}static emptyPath(){return new Xr([])}}class gd{constructor(e){this.fields=e,e.sort(Xr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fd(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new sr(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new sr(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(n){if(ft(!!n),"string"==typeof n){let e=0;const t=gR.exec(n);if(ft(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:or(n.seconds),nanos:or(n.nanos)}}function or(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Kp(n){return"string"==typeof n?sr.fromBase64String(n):sr.fromUint8Array(n)}function md(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rI(n){const e=n.mapValue.fields.__previous_value__;return md(e)?rI(e):e}function yd(n){const e=Sa(n.mapValue.fields.__local_write_time__.timestampValue);return new Or(e.seconds,e.nanos)}function Iu(n){return null==n}function sy(n){return 0===n&&1/n==-1/0}function oy(n){return"number"==typeof n&&Number.isInteger(n)&&!sy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(Kt.fromString(e))}static fromName(e){return new Xe(Kt.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new Kt(e.slice()))}}function kc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?md(n)?4:10:st()}function Cu(n,e){const t=kc(n);if(t!==kc(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yd(n).isEqual(yd(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Sa(s.timestampValue),f=Sa(a.timestampValue);return l.seconds===f.seconds&&l.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Kp(n.bytesValue).isEqual(Kp(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return or(s.geoPointValue.latitude)===or(a.geoPointValue.latitude)&&or(s.geoPointValue.longitude)===or(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return or(s.integerValue)===or(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=or(s.doubleValue),f=or(a.doubleValue);return l===f?sy(l)===sy(f):isNaN(l)&&isNaN(f)}return!1}(n,e);case 9:return fd(n.arrayValue.values||[],e.arrayValue.values||[],Cu);case 10:return function(s,a){const l=s.mapValue.fields||{},f=a.mapValue.fields||{};if(Xb(l)!==Xb(f))return!1;for(const v in l)if(l.hasOwnProperty(v)&&(void 0===f[v]||!Cu(l[v],f[v])))return!1;return!0}(n,e);default:return st()}var a}function Zp(n,e){return void 0!==(n.values||[]).find(t=>Cu(t,e))}function _d(n,e){const t=kc(n),s=kc(e);if(t!==s)return Nt(t,s);switch(t){case 0:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const f=or(a.integerValue||a.doubleValue),v=or(l.integerValue||l.doubleValue);return f<v?-1:f>v?1:f===v?0:isNaN(f)?isNaN(v)?0:-1:1}(n,e);case 3:return Yv(n.timestampValue,e.timestampValue);case 4:return Yv(yd(n),yd(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(a,l){const f=Kp(a),v=Kp(l);return f.compareTo(v)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const f=a.split("/"),v=l.split("/");for(let b=0;b<f.length&&b<v.length;b++){const S=Nt(f[b],v[b]);if(0!==S)return S}return Nt(f.length,v.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const f=Nt(or(a.latitude),or(l.latitude));return 0!==f?f:Nt(or(a.longitude),or(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const f=a.values||[],v=l.values||[];for(let b=0;b<f.length&&b<v.length;++b){const S=_d(f[b],v[b]);if(S)return S}return Nt(f.length,v.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){const f=a.fields||{},v=Object.keys(f),b=l.fields||{},S=Object.keys(b);v.sort(),S.sort();for(let N=0;N<v.length&&N<S.length;++N){const P=Nt(v[N],S[N]);if(0!==P)return P;const Y=_d(f[v[N]],b[S[N]]);if(0!==Y)return Y}return Nt(v.length,S.length)}(n.mapValue,e.mapValue);default:throw st()}}function Yv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=Sa(n),s=Sa(e),a=Nt(t.seconds,s.seconds);return 0!==a?a:Nt(t.nanos,s.nanos)}function Qv(n){return Jv(n)}function Jv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=Sa(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Kp(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const f of s.values||[])l?l=!1:a+=",",a+=Jv(f);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",f=!0;for(const v of a)f?f=!1:l+=",",l+=`${v}:${Jv(s.fields[v])}`;return l+"}"}(n.mapValue):st();var e}function gf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ay(n){return!!n&&"integerValue"in n}function Yp(n){return!!n&&"arrayValue"in n}function uy(n){return!!n&&"nullValue"in n}function Xv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cy(n){return!!n&&"mapValue"in n}function mf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pd(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=mf(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mf(n.arrayValue.values[t]);return e}return Object.assign({},n)}class ei{constructor(e){this.value=e}static empty(){return new ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!cy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mf(t)}setAll(e){let t=Xr.emptyPath(),s={},a=[];e.forEach((f,v)=>{if(!t.isImmediateParentOf(v)){const b=this.getFieldsMap(t);this.applyChanges(b,s,a),s={},a=[],t=v.popLast()}f?s[v.lastSegment()]=mf(f):a.push(v.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());cy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];cy(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){pd(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new ei(mf(this.value))}}function ly(n){const e=[];return pd(n.fields,(t,s)=>{const a=new Xr([t]);if(cy(s)){const l=ly(s.mapValue).fields;if(0===l.length)e.push(a);else for(const f of l)e.push(a.child(f))}else e.push(a)}),new gd(e)}class In{constructor(e,t,s,a,l){this.key=e,this.documentType=t,this.version=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new In(e,0,It.min(),ei.empty(),0)}static newFoundDocument(e,t,s){return new In(e,1,t,s,0)}static newNoDocument(e,t){return new In(e,2,t,ei.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,ei.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new In(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class aA{constructor(e,t=null,s=[],a=[],l=null,f=null,v=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=f,this.endAt=v,this.A=null}}function iI(n,e=null,t=[],s=[],a=null,l=null,f=null){return new aA(n,e,t,s,a,l,f)}function Qp(n){const e=Be(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>function(n){return n.field.canonicalString()+n.op.toString()+Qv(n.value)}(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Iu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=dy(e.startAt)),e.endAt&&(t+="|ub:",t+=dy(e.endAt)),e.A=t}return e.A}function yf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!dI(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!Cu(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fI(n.startAt,e.startAt)&&fI(n.endAt,e.endAt)}function Jp(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class _i extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,s):new aI(e,t,s):"array-contains"===t?new lI(e,s):"in"===t?new mR(e,s):"not-in"===t?new uA(e,s):"array-contains-any"===t?new cA(e,s):new _i(e,t,s)}static R(e,t,s){return"in"===t?new uI(e,s):new cI(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(_d(t,this.value)):null!==t&&kc(this.value)===kc(t)&&this.P(_d(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class aI extends _i{constructor(e,t,s){super(e,t,s),this.key=Xe.fromName(s.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.P(t)}}class uI extends _i{constructor(e,t){super(e,"in",t),this.keys=eE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class cI extends _i{constructor(e,t){super(e,"not-in",t),this.keys=eE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Xe.fromName(s.referenceValue))}class lI extends _i{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yp(t)&&Zp(t.arrayValue,this.value)}}class mR extends _i{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zp(this.value.arrayValue,t)}}class uA extends _i{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zp(this.value.arrayValue,t)}}class cA extends _i{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Zp(this.value.arrayValue,s))}}class _f{constructor(e,t){this.position=e,this.before=t}}function dy(n){return`${n.before?"b":"a"}:${n.position.map(e=>Qv(e)).join(",")}`}class Rn{constructor(e,t="asc"){this.field=e,this.dir=t}}function dI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hI(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],f=n.position[a];if(s=l.field.isKeyField()?Xe.comparator(Xe.fromName(f.referenceValue),t.key):_d(f,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return n.before?s<=0:s<0}function fI(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Cu(n.position[t],e.position[t]))return!1;return!0}class xa{constructor(e,t=null,s=[],a=[],l=null,f="F",v=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=f,this.startAt=v,this.endAt=b,this.V=null,this.S=null}}function pI(n,e,t,s,a,l,f,v){return new xa(n,e,t,s,a,l,f,v)}function vd(n){return new xa(n)}function Xp(n){return!Iu(n.limit)&&"F"===n.limitType}function Du(n){return!Iu(n.limit)&&"L"===n.limitType}function tE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function nE(n){for(const e of n.filters)if(e.v())return e.field;return null}function hy(n){return null!==n.collectionGroup}function vf(n){const e=Be(n);if(null===e.V){e.V=[];const t=nE(e),s=tE(e);if(null!==t&&null===s)t.isKeyField()||e.V.push(new Rn(t)),e.V.push(new Rn(Xr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.V.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Rn(Xr.keyField(),l))}}}return e.V}function Cs(n){const e=Be(n);if(!e.S)if("F"===e.limitType)e.S=iI(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of vf(e))t.push(new Rn(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new _f(e.endAt.position,!e.endAt.before):null,a=e.startAt?new _f(e.startAt.position,!e.startAt.before):null;e.S=iI(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.S}function lA(n,e,t){return new xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ef(n,e){return yf(Cs(n),Cs(e))&&n.limitType===e.limitType}function fy(n){return`${Qp(Cs(n))}|lt:${n.limitType}`}function eo(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Qv(s.value)}`;var s}).join(", ")}]`),Iu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: "+dy(n.startAt)),n.endAt&&(e+=", endAt: "+dy(n.endAt)),`Target(${e})`}(Cs(n))}; limitType=${n.limitType})`}function eg(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):Xe.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!hI(t.startAt,vf(t),s)||t.endAt&&hI(t.endAt,vf(t),s)));var t,s}function gI(n){return(e,t)=>{let s=!1;for(const a of vf(n)){const l=Ra(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function Ra(n,e,t){const s=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(a,l,f){const v=l.data.field(a),b=f.data.field(a);return null!==v&&null!==b?_d(v,b):st()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return st()}}function to(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sy(e)?"-0":e}}function no(n){return{integerValue:""+n}}function rE(n,e){return oy(e)?no(e):to(n,e)}class tg{constructor(){this._=void 0}}function dA(n,e,t){return n instanceof wf?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof Tu?bf(n,e):n instanceof Ed?iE(n,e):function(s,a){const l=mI(s,a),f=sE(l)+sE(s.C);return ay(l)&&ay(s.C)?no(f):to(s.N,f)}(n,e)}function hA(n,e,t){return n instanceof Tu?bf(n,e):n instanceof Ed?iE(n,e):t}function mI(n,e){return n instanceof If?ay(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class wf extends tg{}class Tu extends tg{constructor(e){super(),this.elements=e}}function bf(n,e){const t=oE(e);for(const s of n.elements)t.some(a=>Cu(a,s))||t.push(s);return{arrayValue:{values:t}}}class Ed extends tg{constructor(e){super(),this.elements=e}}function iE(n,e){let t=oE(e);for(const s of n.elements)t=t.filter(a=>!Cu(a,s));return{arrayValue:{values:t}}}class If extends tg{constructor(e,t){super(),this.N=e,this.C=t}}function sE(n){return or(n.integerValue||n.doubleValue)}function oE(n){return Yp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Fc{constructor(e,t){this.field=e,this.transform=t}}class yI{constructor(e,t){this.version=e,this.transformResults=t}}class zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zn}static exists(e){return new zn(void 0,e)}static updateTime(e){return new zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Df{}function _I(n,e,t){n instanceof Tf?function(s,a,l){const f=s.value.clone(),v=EI(s.fieldTransforms,a,l.transformResults);f.setAll(v),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Au?function(s,a,l){if(!Cf(s.precondition,a))return void a.convertToUnknownDocument(l.version);const f=EI(s.fieldTransforms,a,l.transformResults),v=a.data;v.setAll(cE(s)),v.setAll(f),a.convertToFoundDocument(l.version,v).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function py(n,e,t){var a;n instanceof Tf?function(s,a,l){if(!Cf(s.precondition,a))return;const f=s.value.clone(),v=wI(s.fieldTransforms,l,a);f.setAll(v),a.convertToFoundDocument(uE(a),f).setHasLocalMutations()}(n,e,t):n instanceof Au?function(s,a,l){if(!Cf(s.precondition,a))return;const f=wI(s.fieldTransforms,l,a),v=a.data;v.setAll(cE(s)),v.setAll(f),a.convertToFoundDocument(uE(a),v).setHasLocalMutations()}(n,e,t):Cf(n.precondition,a=e)&&a.convertToNoDocument(It.min())}function vI(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=mI(s.transform,a||null);null!=l&&(null==t&&(t=ei.empty()),t.set(s.field,l))}return t||null}function aE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&fd(t,s,(a,l)=>function(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof Tu&&s instanceof Tu||t instanceof Ed&&s instanceof Ed?fd(t.elements,s.elements,Cu):t instanceof If&&s instanceof If?Cu(t.C,s.C):t instanceof wf&&s instanceof wf);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}function uE(n){return n.isFoundDocument()?n.version:It.min()}class Tf extends Df{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}}class Au extends Df{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}}function cE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function EI(n,e,t){const s=new Map;ft(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],f=l.transform,v=e.data.field(l.field);s.set(l.field,hA(f,v,t[a]))}return s}function wI(n,e,t){const s=new Map;for(const a of n){const l=a.transform,f=t.data.field(a.field);s.set(a.field,dA(l,f,e))}return s}class ng extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class lE extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class pA{constructor(e){this.count=e}}var ar,Lt;function bI(n){switch(n){default:return st();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function II(n){if(void 0===n)return _r("GRPC error has no .code"),me.UNKNOWN;switch(n){case ar.OK:return me.OK;case ar.CANCELLED:return me.CANCELLED;case ar.UNKNOWN:return me.UNKNOWN;case ar.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case ar.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case ar.INTERNAL:return me.INTERNAL;case ar.UNAVAILABLE:return me.UNAVAILABLE;case ar.UNAUTHENTICATED:return me.UNAUTHENTICATED;case ar.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case ar.NOT_FOUND:return me.NOT_FOUND;case ar.ALREADY_EXISTS:return me.ALREADY_EXISTS;case ar.PERMISSION_DENIED:return me.PERMISSION_DENIED;case ar.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case ar.ABORTED:return me.ABORTED;case ar.OUT_OF_RANGE:return me.OUT_OF_RANGE;case ar.UNIMPLEMENTED:return me.UNIMPLEMENTED;case ar.DATA_LOSS:return me.DATA_LOSS;default:return st()}}(Lt=ar||(ar={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";class vr{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new vr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gy(this.root,e,this.comparator,!1)}getReverseIterator(){return new gy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gy(this.root,e,this.comparator,!0)}}class gy{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:ti.RED,this.left=null!=a?a:ti.EMPTY,this.right=null!=l?l:ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new ti(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return ti.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1,ti.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,s,a){return this}insert(n,e,t){return new ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CI(this.data.getIterator())}getIteratorFrom(e){return new CI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class CI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const gA=new vr(Xe.comparator);function ro(){return gA}const mA=new vr(Xe.comparator);function dE(){return mA}const DI=new vr(Xe.comparator);function hE(){return DI}const TI=new Vn(Xe.comparator);function Yt(...n){let e=TI;for(const t of n)e=e.add(t);return e}const AI=new Vn(Nt);function rg(){return AI}class Af{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,t)),new Af(It.min(),s,rg(),ro(),Yt())}}class Sf{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sf(sr.EMPTY_BYTE_STRING,t,Yt(),Yt(),Yt())}}class ig{constructor(e,t,s,a){this.k=e,this.removedTargetIds=t,this.key=s,this.$=a}}class my{constructor(e,t){this.targetId=e,this.O=t}}class fE{constructor(e,t,s=sr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Lc{constructor(){this.F=0,this.M=wd(),this.L=sr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Yt(),t=Yt(),s=Yt();return this.M.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:st()}}),new Sf(this.L,this.B,e,t,s)}G(){this.U=!1,this.M=wd()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class yA{constructor(e){this.tt=e,this.et=new Map,this.nt=ro(),this.st=SI(),this.it=new Vn(Nt)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const s=this.ut(t);switch(e.state){case 0:this.ht(t)&&s.j(e.resumeToken);break;case 1:s.X(),s.q||s.G(),s.j(e.resumeToken);break;case 2:s.X(),s.q||this.removeTarget(t);break;case 3:this.ht(t)&&(s.Z(),s.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),s.j(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((s,a)=>{this.ht(a)&&t(a)})}ft(e){const t=e.targetId,s=e.O.count,a=this.dt(t);if(a){const l=a.target;if(Jp(l))if(0===s){const f=new Xe(l.path);this.ct(t,f,In.newNoDocument(f,It.min()))}else ft(1===s);else this.wt(t)!==s&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((l,f)=>{const v=this.dt(f);if(v){if(l.current&&Jp(v.target)){const b=new Xe(v.target.path);null!==this.nt.get(b)||this.gt(f,b)||this.ct(f,b,In.newNoDocument(b,e))}l.K&&(t.set(f,l.W()),l.G())}});let s=Yt();this.st.forEach((l,f)=>{let v=!0;f.forEachWhile(b=>{const S=this.dt(b);return!S||2===S.purpose||(v=!1,!1)}),v&&(s=s.add(l))});const a=new Af(e,t,this.it,this.nt,s);return this.nt=ro(),this.st=SI(),this.it=new Vn(Nt),a}ot(e,t){if(!this.ht(e))return;const s=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,s),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,s){if(!this.ht(e))return;const a=this.ut(e);this.gt(e,t)?a.H(t,1):a.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),s&&(this.nt=this.nt.insert(t,s))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Lc,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Vn(Nt),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new Lc),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function SI(){return new vr(Xe.comparator)}function wd(){return new vr(Xe.comparator)}const yR={asc:"ASCENDING",desc:"DESCENDING"},pE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class _R{constructor(e,t){this.databaseId=e,this.D=t}}function xf(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gE(n,e){return n.D?e.toBase64():e.toUint8Array()}function vR(n,e){return xf(n,e.toTimestamp())}function ze(n){return ft(!!n),It.fromTimestamp(function(e){const t=Sa(e);return new Or(t.seconds,t.nanos)}(n))}function mE(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function xI(n){const e=Kt.fromString(n);return ft(Nf(e)),e}function sg(n,e){return mE(n.databaseId,e.path)}function Ds(n,e){const t=xI(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(kn(t))}function yE(n,e){return mE(n.databaseId,e)}function og(n){const e=xI(n);return 4===e.length?Kt.emptyPath():kn(e)}function Vc(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kn(n){return ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function _A(n,e,t){return{name:sg(n,e),fields:t.value.mapValue.fields}}function _E(n,e,t){const s=Ds(n,e.name),a=ze(e.updateTime),l=new ei({mapValue:{fields:e.fields}}),f=In.newFoundDocument(s,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function ag(n,e){let t;if(e instanceof Tf)t={update:_A(n,e.key,e.value)};else if(e instanceof ng)t={delete:sg(n,e.key)};else if(e instanceof Au)t={update:_A(n,e.key,e.data),updateMask:ug(e.fieldMask)};else{if(!(e instanceof lE))return st();t={verify:sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const f=l.transform;if(f instanceof wf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Tu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ed)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof If)return{fieldPath:l.field.canonicalString(),increment:f.C};throw st()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:vR(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:st()),t;var a}function EE(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?zn.updateTime(ze(a.updateTime)):void 0!==a.exists?zn.exists(a.exists):zn.none():zn.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,f){let v=null;"setToServerValue"in f?(ft("REQUEST_TIME"===f.setToServerValue),v=new wf):"appendMissingElements"in f?v=new Tu(f.appendMissingElements.values||[]):"removeAllFromArray"in f?v=new Ed(f.removeAllFromArray.values||[]):"increment"in f?v=new If(l,f.increment):st();const b=Xr.fromServerFormat(f.fieldPath);return new Fc(b,v)}(n,a)):[];var a;if(e.update){const a=Ds(n,e.update.name),l=new ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new gd((e.updateMask.fieldPaths||[]).map(S=>Xr.fromServerFormat(S)));return new Au(a,l,f,t,s)}return new Tf(a,l,t,s)}if(e.delete){const a=Ds(n,e.delete);return new ng(a,t)}if(e.verify){const a=Ds(n,e.verify);return new lE(a,t)}return st()}function wE(n,e){return{documents:[yE(n,e.path)]}}function NI(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=yE(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yE(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(v){if(0===v.length)return;const b=v.map(S=>function(N){if("=="===N.op){if(Xv(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NAN"}};if(uy(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(Xv(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NOT_NAN"}};if(uy(N.value))return{unaryFilter:{field:bd(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bd(N.field),op:yy(N.op),value:N.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(v){if(0!==v.length)return v.map(b=>{return{field:bd((S=b).field),direction:wA(S.dir)};var S})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const f=(b=e.limit,n.D||Iu(b)?b:{value:b});var b;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=OI(e.startAt)),e.endAt&&(t.structuredQuery.endAt=OI(e.endAt)),t}function MI(n){let e=og(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){ft(1===s);const N=t.from[0];N.allDescendants?a=N.collectionId:e=e.child(N.collectionId)}let l=[];t.where&&(l=Rf(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(N=>{return new Rn(Id((P=N).field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let v=null;t.limit&&(v=function(N){let P;return P="object"==typeof N?N.value:N,Iu(P)?null:P}(t.limit));let b=null;t.startAt&&(b=PI(t.startAt));let S=null;return t.endAt&&(S=PI(t.endAt)),pI(e,a,f,l,v,"F",b,S)}function Rf(n){return n?void 0!==n.unaryFilter?[bA(n)]:void 0!==n.fieldFilter?[kI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Rf(e)).reduce((e,t)=>e.concat(t)):st():[]}function OI(n){return{before:n.before,values:n.position}}function PI(n){return new _f(n.values||[],!!n.before)}function wA(n){return yR[n]}function yy(n){return pE[n]}function bd(n){return{fieldPath:n.canonicalString()}}function Id(n){return Xr.fromServerFormat(n.fieldPath)}function kI(n){return _i.create(Id(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function bA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Id(n.unaryFilter.field);return _i.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Id(n.unaryFilter.field);return _i.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Id(n.unaryFilter.field);return _i.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Id(n.unaryFilter.field);return _i.create(a,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function ug(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Nf(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Lo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FI(e)),e=IA(n.get(t),e);return FI(e)}function IA(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function FI(n){return n+"\x01\x01"}function Na(n){const e=n.length;if(ft(e>=2),2===e)return ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const f=n.indexOf("\x01",l);switch((f<0||f>t)&&st(),n.charAt(f+1)){case"\x01":const v=n.substring(l,f);let b;0===a.length?b=v:(a+=v,b=a,a=""),s.push(b);break;case"\x10":a+=n.substring(l,f),a+="\0";break;case"\x11":a+=n.substring(l,f+1);break;default:st()}l=f+2}return new Kt(s)}class LI{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class rs{constructor(e,t,s){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=s}}rs.store="owner",rs.key="owner";class Uc{constructor(e,t,s){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=s}}Uc.store="mutationQueues",Uc.keyPath="userId";class En{constructor(e,t,s,a,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=s,this.baseMutations=a,this.mutations=l}}En.store="mutations",En.keyPath="batchId",En.userMutationsIndex="userMutationsIndex",En.userMutationsKeyPath=["userId","batchId"];class vi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Lo(t)]}static key(e,t,s){return[e,Lo(t),s]}}vi.store="documentMutations",vi.PLACEHOLDER=new vi;class CA{constructor(e,t){this.path=e,this.readTime=t}}class ER{constructor(e,t){this.path=e,this.version=t}}class Kn{constructor(e,t,s,a,l,f){this.unknownDocument=e,this.noDocument=t,this.document=s,this.hasCommittedMutations=a,this.readTime=l,this.parentPath=f}}Kn.store="remoteDocuments",Kn.readTimeIndex="readTimeIndex",Kn.readTimeIndexPath="readTime",Kn.collectionReadTimeIndex="collectionReadTimeIndex",Kn.collectionReadTimeIndexPath=["parentPath","readTime"];class Su{constructor(e){this.byteSize=e}}Su.store="remoteDocumentGlobal",Su.key="remoteDocumentGlobalKey";class Ts{constructor(e,t,s,a,l,f,v){this.targetId=e,this.canonicalId=t,this.readTime=s,this.resumeToken=a,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=f,this.query=v}}Ts.store="targets",Ts.keyPath="targetId",Ts.queryTargetsIndexName="queryTargetsIndex",Ts.queryTargetsKeyPath=["canonicalId","targetId"];class Pr{constructor(e,t,s){this.targetId=e,this.path=t,this.sequenceNumber=s}}Pr.store="targetDocuments",Pr.keyPath=["targetId","path"],Pr.documentTargetsIndex="documentTargetsIndex",Pr.documentTargetsKeyPath=["path","targetId"];class Ei{constructor(e,t,s,a){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=s,this.targetCount=a}}Ei.key="targetGlobalKey",Ei.store="targetGlobal";class Cd{constructor(e,t){this.collectionId=e,this.parent=t}}Cd.store="collectionParents",Cd.keyPath=["collectionId","parent"];class xu{constructor(e,t,s,a){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=s,this.inForeground=a}}xu.store="clientMetadata",xu.keyPath="clientId";class Dd{constructor(e,t,s){this.bundleId=e,this.createTime=t,this.version=s}}Dd.store="bundles",Dd.keyPath="bundleId";class Ma{constructor(e,t,s){this.name=e,this.readTime=t,this.bundledQuery=s}}Ma.store="namedQueries",Ma.keyPath="name";const DA=[Uc.store,En.store,vi.store,Kn.store,Ts.store,rs.store,Ei.store,Pr.store,xu.store,Su.store,Cd.store,Dd.store,Ma.store],VI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Me((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Me?t:Me.resolve(t)}catch(t){return Me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Me.reject(t)}static resolve(e){return new Me((t,s)=>{t(e)})}static reject(e){return new Me((t,s)=>{s(e)})}static waitFor(e){return new Me((t,s)=>{let a=0,l=0,f=!1;e.forEach(v=>{++a,v.next(()=>{++l,f&&l===a&&t()},b=>s(b))}),f=!0,l===a&&t()})}static or(e){let t=Me.resolve(!1);for(const s of e)t=t.next(a=>a?Me.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}}class _y{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Jr,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new cg(e,t.error)):this.Et.resolve()},this.transaction.onerror=s=>{const a=vy(s.target.error);this.Et.reject(new cg(e,a))}}static open(e,t,s,a){try{return new _y(t,e.transaction(a,s))}catch(l){throw new cg(t,l)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new AA(t)}}class io{constructor(e,t,s){this.name=e,this.version=t,this.At=s,12.2===io.Rt((0,St.z$)())&&_r("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Bc(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,St.hl)())return!1;if(io.Pt())return!0;const e=(0,St.z$)(),t=io.Rt(e),s=0<t&&t<10,a=io.vt(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static vt(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}Dt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=f=>{s(f.target.result)},l.onblocked=()=>{a(new cg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=f=>{const v=f.target.error;a("VersionError"===v.name?new Oe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===v.name?new Oe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+v):new cg(e,v))},l.onupgradeneeded=f=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.At.Ct(f.target.result,l.transaction,f.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=s=>t.Nt(s)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,be.Z)(function*(){const f="readonly"===t;let v=0;for(;;){++v;try{l.db=yield l.Dt(e);const b=_y.open(l.db,e,f?"readonly":"readwrite",s),S=a(b).catch(N=>(b.abort(N),Me.reject(N))).toPromise();return S.catch(()=>{}),yield b.It,S}catch(b){const S="FirebaseError"!==b.name&&v<3;if(Ve("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),l.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class TA{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Bc(this.kt.delete())}}class cg extends Oe{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function so(n){return"IndexedDbTransactionError"===n.name}class AA{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Bc(s)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Bc(this.store.add(e))}get(e){return Bc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Bc(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Bc(this.store.count())}Lt(e,t){const s=this.cursor(this.options(e,t)),a=[];return this.Bt(s,(l,f)=>{a.push(f)}).next(()=>a)}Ut(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.qt=!1;const a=this.cursor(s);return this.Bt(a,(l,f,v)=>v.delete())}Kt(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.Bt(a,t)}jt(e){const t=this.cursor({});return new Me((s,a)=>{t.onerror=l=>{const f=vy(l.target.error);a(f)},t.onsuccess=l=>{const f=l.target.result;f?e(f.primaryKey,f.value).next(v=>{v?f.continue():s()}):s()}})}Bt(e,t){const s=[];return new Me((a,l)=>{e.onerror=f=>{l(f.target.error)},e.onsuccess=f=>{const v=f.target.result;if(!v)return void a();const b=new TA(v),S=t(v.primaryKey,v.value,b);if(S instanceof Me){const N=S.catch(P=>(b.done(),Me.reject(P)));s.push(N)}b.isDone?a():null===b.Ft?v.continue():v.continue(b.Ft)}}).next(()=>Me.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.qt?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bc(n){return new Me((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=vy(s.target.error);t(a)}})}let BI=!1;function vy(n){const e=io.Rt((0,St.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BI||(BI=!0,setTimeout(()=>{throw s},0)),s}}return n}class jI extends UI{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Mi(n,e){const t=Be(n);return io.St(t.Qt,e)}class bE{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&_I(l,e,s[a])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&py(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&py(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const s=e.get(t.key),a=s;this.applyToLocalView(a),s.isValidDocument()||a.convertToNoDocument(It.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Yt())}isEqual(e){return this.batchId===e.batchId&&fd(this.mutations,e.mutations,(t,s)=>aE(t,s))&&fd(this.baseMutations,e.baseMutations,(t,s)=>aE(t,s))}}class lg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){ft(e.mutations.length===s.length);let a=hE();const l=e.mutations;for(let f=0;f<l.length;f++)a=a.insert(l[f].key,s[f].version);return new lg(e,t,s,a)}}class jc{constructor(e,t,s,a,l=It.min(),f=It.min(),v=sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=v}withSequenceNumber(e){return new jc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class IE{constructor(e){this.Wt=e}}function Ey(n,e){if(e.document)return _E(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=Xe.fromSegments(e.noDocument.path),s=Mf(e.noDocument.readTime),a=In.newNoDocument(t,s);return e.hasCommittedMutations?a.setHasCommittedMutations():a}if(e.unknownDocument){const t=Xe.fromSegments(e.unknownDocument.path),s=Mf(e.unknownDocument.version);return In.newUnknownDocument(t,s)}return st()}function $I(n,e,t){const s=CE(t),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:sg(v=n.Wt,(b=e).key),fields:b.data.value.mapValue.fields,updateTime:xf(v,b.version.toTimestamp())};return new Kn(null,null,l,e.hasCommittedMutations,s,a)}var v,b;if(e.isNoDocument()){const l=e.key.path.toArray(),f=$c(e.version),v=e.hasCommittedMutations;return new Kn(null,new CA(l,f),null,v,s,a)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),f=$c(e.version);return new Kn(new ER(l,f),null,null,!0,s,a)}return st()}function CE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function HI(n){const e=new Or(n[0],n[1]);return It.fromTimestamp(e)}function $c(n){const e=n.toTimestamp();return new LI(e.seconds,e.nanoseconds)}function Mf(n){const e=new Or(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Td(n,e){const t=(e.baseMutations||[]).map(l=>EE(n.Wt,l));for(let l=0;l<e.mutations.length-1;++l){const f=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(f.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>EE(n.Wt,l)),a=Or.fromMillis(e.localWriteTimeMs);return new bE(e.batchId,a,t,s)}function dg(n){const e=Mf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mf(n.lastLimboFreeSnapshotVersion):It.min();let s;var a;return void 0!==n.query.documents?(ft(1===(a=n.query).documents.length),s=Cs(vd(og(a.documents[0])))):s=Cs(MI(n.query)),new jc(s,n.targetId,0,n.lastListenSequenceNumber,e,t,sr.fromBase64String(n.resumeToken))}function GI(n,e){const t=$c(e.snapshotVersion),s=$c(e.lastLimboFreeSnapshotVersion);let a;a=Jp(e.target)?wE(n.Wt,e.target):NI(n.Wt,e.target);const l=e.resumeToken.toBase64();return new Ts(e.targetId,Qp(e.target),t,l,e.sequenceNumber,s,a)}function DE(n){const e=MI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lA(e,e.limit,"L"):e}class SA{getBundleMetadata(e,t){return qI(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:Mf(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return qI(e).put({bundleId:(s=t).id,createTime:$c(ze(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return WI(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:DE(a.bundledQuery),readTime:Mf(a.readTime)};var a})}saveNamedQuery(e,t){return WI(e).put({name:(s=t).name,readTime:$c(ze(s.readTime)),bundledQuery:s.bundledQuery});var s}}function qI(n){return Mi(n,Dd.store)}function WI(n){return Mi(n,Ma.store)}class xA{constructor(){this.Gt=new TE}addToCollectionParentIndex(e,t){return this.Gt.add(t),Me.resolve()}getCollectionParents(e,t){return Me.resolve(this.Gt.getEntries(t))}}class TE{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Vn(Kt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Vn(Kt.comparator)).toArray()}}class zI{constructor(){this.zt=new TE}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const l={collectionId:s,parent:Lo(a)};return AE(e).put(l)}return Me.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Wp(t),""],!1,!0);return AE(e).Lt(a).next(l=>{for(const f of l){if(f.collectionId!==t)break;s.push(Na(f.parent))}return s})}}function AE(n){return Mi(n,Cd.store)}const KI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class is{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function SE(n,e,t){const s=n.store(En.store),a=n.store(vi.store),l=[],f=IDBKeyRange.only(t.batchId);let v=0;const b=s.Kt({range:f},(N,P,Y)=>(v++,Y.delete()));l.push(b.next(()=>{ft(1===v)}));const S=[];for(const N of t.mutations){const P=vi.key(e,N.key.path,t.batchId);l.push(a.delete(P)),S.push(N.key)}return Me.waitFor(l).next(()=>S)}function wy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(41943040,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class xE{constructor(e,t,s,a){this.userId=e,this.N=t,this.Ht=s,this.referenceDelegate=a,this.Jt={}}static Yt(e,t,s,a){ft(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xE(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oa(e).Kt({index:En.userMutationsIndex,range:s},(a,l,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=Hc(e),f=Oa(e);return f.add({}).next(v=>{ft("number"==typeof v);const b=new bE(v,t,s,a),S=function(Y,J,xe){const $e=xe.baseMutations.map(Ot=>ag(Y.Wt,Ot)),Ze=xe.mutations.map(Ot=>ag(Y.Wt,Ot));return new En(J,xe.batchId,xe.localWriteTime.toMillis(),$e,Ze)}(this.N,this.userId,b),N=[];let P=new Vn((Y,J)=>Nt(Y.canonicalString(),J.canonicalString()));for(const Y of a){const J=vi.key(this.userId,Y.key.path,v);P=P.add(Y.key.path.popLast()),N.push(f.put(S)),N.push(l.put(J,vi.PLACEHOLDER))}return P.forEach(Y=>{N.push(this.Ht.addToCollectionParentIndex(e,Y))}),e.addOnCommittedListener(()=>{this.Jt[v]=b.keys()}),Me.waitFor(N).next(()=>b)})}lookupMutationBatch(e,t){return Oa(e).get(t).next(s=>s?(ft(s.userId===this.userId),Td(this.N,s)):null)}Xt(e,t){return this.Jt[t]?Me.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.Jt[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return Oa(e).Kt({index:En.userMutationsIndex,range:a},(f,v,b)=>{v.userId===this.userId&&(ft(v.batchId>=s),l=Td(this.N,v)),b.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Oa(e).Kt({index:En.userMutationsIndex,range:t,reverse:!0},(a,l,f)=>{s=l.batchId,f.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oa(e).Lt(En.userMutationsIndex,t).next(s=>s.map(a=>Td(this.N,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=vi.prefixForPath(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return Hc(e).Kt({range:a},(f,v,b)=>{const[S,N,P]=f,Y=Na(N);if(S===this.userId&&t.path.isEqual(Y))return Oa(e).get(P).next(J=>{if(!J)throw st();ft(J.userId===this.userId),l.push(Td(this.N,J))});b.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Vn(Nt);const a=[];return t.forEach(l=>{const f=vi.prefixForPath(this.userId,l.path),v=IDBKeyRange.lowerBound(f),b=Hc(e).Kt({range:v},(S,N,P)=>{const[Y,J,xe]=S,$e=Na(J);Y===this.userId&&l.path.isEqual($e)?s=s.add(xe):P.done()});a.push(b)}),Me.waitFor(a).next(()=>this.Zt(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=vi.prefixForPath(this.userId,s),f=IDBKeyRange.lowerBound(l);let v=new Vn(Nt);return Hc(e).Kt({range:f},(b,S,N)=>{const[P,Y,J]=b,xe=Na(Y);P===this.userId&&s.isPrefixOf(xe)?xe.length===a&&(v=v.add(J)):N.done()}).next(()=>this.Zt(e,v))}Zt(e,t){const s=[],a=[];return t.forEach(l=>{a.push(Oa(e).get(l).next(f=>{if(null===f)throw st();ft(f.userId===this.userId),s.push(Td(this.N,f))}))}),Me.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return SE(e.Qt,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Me.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Me.resolve();const s=IDBKeyRange.lowerBound(vi.prefixForUser(this.userId)),a=[];return Hc(e).Kt({range:s},(l,f,v)=>{if(l[0]===this.userId){const b=Na(l[1]);a.push(b)}else v.done()}).next(()=>{ft(0===a.length)})})}containsKey(e,t){return ZI(e,this.userId,t)}ee(e){return RE(e).get(this.userId).next(t=>t||new Uc(this.userId,-1,""))}}function ZI(n,e,t){const s=vi.prefixForPath(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let f=!1;return Hc(n).Kt({range:l,qt:!0},(v,b,S)=>{const[N,P,Y]=v;N===e&&P===a&&(f=!0),S.done()}).next(()=>f)}function Oa(n){return Mi(n,En.store)}function Hc(n){return Mi(n,vi.store)}function RE(n){return Mi(n,Uc.store)}class Ru{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Ru(0)}static ie(){return new Ru(-1)}}class RA{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const s=new Ru(t.highestTargetId);return t.highestTargetId=s.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>It.fromTimestamp(new Or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.re(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.oe(e,a)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(s=>(s.targetCount+=1,this.ae(t,s),this.oe(e,s))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Of(e).delete(t.targetId)).next(()=>this.re(e)).next(s=>(ft(s.targetCount>0),s.targetCount-=1,this.oe(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return Of(e).Kt((f,v)=>{const b=dg(v);b.sequenceNumber<=t&&null===s.get(b.targetId)&&(a++,l.push(this.removeTargetData(e,b)))}).next(()=>Me.waitFor(l)).next(()=>a)}forEachTarget(e,t){return Of(e).Kt((s,a)=>{const l=dg(a);t(l)})}re(e){return by(e).get(Ei.key).next(t=>(ft(null!==t),t))}oe(e,t){return by(e).put(Ei.key,t)}ce(e,t){return Of(e).put(GI(this.N,t))}ae(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Qp(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Of(e).Kt({range:a,index:Ts.queryTargetsIndexName},(f,v,b)=>{const S=dg(v);yf(t,S.target)&&(l=S,b.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=Gc(e);return t.forEach(f=>{const v=Lo(f.path);a.push(l.put(new Pr(s,v))),a.push(this.referenceDelegate.addReference(e,s,f))}),Me.waitFor(a)}removeMatchingKeys(e,t,s){const a=Gc(e);return Me.forEach(t,l=>{const f=Lo(l.path);return Me.waitFor([a.delete([s,f]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=Gc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=Gc(e);let l=Yt();return a.Kt({range:s,qt:!0},(f,v,b)=>{const S=Na(f[1]),N=new Xe(S);l=l.add(N)}).next(()=>l)}containsKey(e,t){const s=Lo(t.path),a=IDBKeyRange.bound([s],[Wp(s)],!1,!0);let l=0;return Gc(e).Kt({index:Pr.documentTargetsIndex,qt:!0,range:a},([f,v],b,S)=>{0!==f&&(l++,S.done())}).next(()=>l>0)}Tt(e,t){return Of(e).get(t).next(s=>s?dg(s):null)}}function Of(n){return Mi(n,Ts.store)}function by(n){return Mi(n,Ei.store)}function Gc(n){return Mi(n,Pr.store)}function qc(n){return NE.apply(this,arguments)}function NE(){return(NE=(0,be.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==VI)throw n;Ve("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function ME([n,e],[t,s]){const a=Nt(n,t);return 0===a?Nt(e,s):a}class YI{constructor(e){this.ue=e,this.buffer=new Vn(ME),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ME(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const s=this.de?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${s}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",s,(0,be.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(a){so(a)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield qc(a)}yield t._e(e)}))}}class wR{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Me.resolve(Mr.T);const s=new YI(t);return this.me.forEachTarget(e,a=>s.fe(a.sequenceNumber)).next(()=>this.me.ye(e,a=>s.fe(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.me.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(KI)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KI):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let s,a,l,f,v,b,S;const N=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,f=Date.now(),this.nthSequenceNumber(e,a))).next(P=>(s=P,v=Date.now(),this.removeTargets(e,s,t))).next(P=>(l=P,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(P=>(S=Date.now(),zv()<=Ia.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-N}ms\n\tDetermined least recently used ${a} in `+(v-f)+`ms\n\tRemoved ${l} targets in `+(b-v)+`ms\n\tRemoved ${P} documents in `+(S-b)+`ms\nTotal Duration: ${S-N}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:P})))}}class NA{constructor(e,t){this.db=e,this.garbageCollector=new wR(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Te(e){let t=0;return this.ye(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(s,a)=>t(a))}addReference(e,t,s){return Nu(e,s)}removeReference(e,t,s){return Nu(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Nu(e,t)}Ie(e,t){return function(s,a){let l=!1;return RE(s).jt(f=>ZI(s,f,a).next(v=>(v&&(l=!0),Me.resolve(!v)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ee(e,(f,v)=>{if(v<=t){const b=this.Ie(e,f).next(S=>{if(!S)return l++,s.getEntry(e,f).next(()=>(s.removeEntry(f),Gc(e).delete([0,Lo(f.path)])))});a.push(b)}}).next(()=>Me.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Nu(e,t)}Ee(e,t){const s=Gc(e);let a,l=Mr.T;return s.Kt({index:Pr.documentTargetsIndex},([f,v],{path:b,sequenceNumber:S})=>{0===f?(l!==Mr.T&&t(new Xe(Na(a)),l),l=S,a=b):l=Mr.T}).next(()=>{l!==Mr.T&&t(new Xe(Na(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nu(n,e){return Gc(n).put((s=n.currentSequenceNumber,new Pr(0,Lo(e.path),s)));var s}class hg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0!==a){for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t])}else this.inner[s]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),!0;return!1}forEach(e){pd(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return eI(this.inner)}}class Iy{constructor(){this.changes=new hg(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:It.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:In.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Me.resolve(s.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cy{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,s){return Wc(e).put(OE(t),s)}removeEntry(e,t){const s=Wc(e),a=OE(t);return s.delete(a)}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Ae(e,s)))}getEntry(e,t){return Wc(e).get(OE(t)).next(s=>this.Re(t,s))}be(e,t){return Wc(e).get(OE(t)).next(s=>({document:this.Re(t,s),size:wy(s)}))}getEntries(e,t){let s=ro();return this.Pe(e,t,(a,l)=>{const f=this.Re(a,l);s=s.insert(a,f)}).next(()=>s)}ve(e,t){let s=ro(),a=new vr(Xe.comparator);return this.Pe(e,t,(l,f)=>{const v=this.Re(l,f);s=s.insert(l,v),a=a.insert(l,wy(f))}).next(()=>({documents:s,Ve:a}))}Pe(e,t,s){if(t.isEmpty())return Me.resolve();const a=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let f=l.getNext();return Wc(e).Kt({range:a},(v,b,S)=>{const N=Xe.fromSegments(v);for(;f&&Xe.comparator(f,N)<0;)s(f,null),f=l.getNext();f&&f.isEqual(N)&&(s(f,b),f=l.hasNext()?l.getNext():null),f?S.Mt(f.path.toArray()):S.done()}).next(()=>{for(;f;)s(f,null),f=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,s){let a=ro();const l=t.path.length+1,f={};if(s.isEqual(It.min())){const v=t.path.toArray();f.range=IDBKeyRange.lowerBound(v)}else{const v=t.path.toArray(),b=CE(s);f.range=IDBKeyRange.lowerBound([v,b],!0),f.index=Kn.collectionReadTimeIndex}return Wc(e).Kt(f,(v,b,S)=>{if(v.length!==l)return;const N=Ey(this.N,b);t.path.isPrefixOf(N.key.path)?eg(t,N)&&(a=a.insert(N.key,N)):S.done()}).next(()=>a)}newChangeBuffer(e){return new MA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ad(e).get(Su.key).next(t=>(ft(!!t),t))}Ae(e,t){return Ad(e).put(Su.key,t)}Re(e,t){if(t){const s=Ey(this.N,t);if(!s.isNoDocument()||!s.version.isEqual(It.min()))return s}return In.newInvalidDocument(e)}}class MA extends Iy{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new hg(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Vn((l,f)=>Nt(l.canonicalString(),f.canonicalString()));return this.changes.forEach((l,f)=>{const v=this.De.get(l);if(f.document.isValidDocument()){const b=$I(this.Se.N,f.document,this.getReadTime(l));a=a.add(l.path.popLast()),s+=wy(b)-v,t.push(this.Se.addEntry(e,l,b))}else if(s-=v,this.trackRemovals){const b=$I(this.Se.N,In.newNoDocument(l,It.min()),this.getReadTime(l));t.push(this.Se.addEntry(e,l,b))}else t.push(this.Se.removeEntry(e,l))}),a.forEach(l=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,l))}),t.push(this.Se.updateMetadata(e,s)),Me.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(s=>(this.De.set(t,s.size),s.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:s,Ve:a})=>(a.forEach((l,f)=>{this.De.set(l,f)}),s))}}function Ad(n){return Mi(n,Su.store)}function Wc(n){return Mi(n,Kn.store)}function OE(n){return n.path.toArray()}class OA{constructor(e){this.N=e}Ct(e,t,s,a){ft(s<a&&s>=0&&a<=11);const l=new _y("createOrUpgrade",t);var v;s<1&&a>=1&&(e.createObjectStore(rs.store),(v=e).createObjectStore(Uc.store,{keyPath:Uc.keyPath}),v.createObjectStore(En.store,{keyPath:En.keyPath,autoIncrement:!0}).createIndex(En.userMutationsIndex,En.userMutationsKeyPath,{unique:!0}),v.createObjectStore(vi.store),Vo(e),function(v){v.createObjectStore(Kn.store)}(e));let f=Me.resolve();return s<3&&a>=3&&(0!==s&&(function(v){v.deleteObjectStore(Pr.store),v.deleteObjectStore(Ts.store),v.deleteObjectStore(Ei.store)}(e),Vo(e)),f=f.next(()=>function(v){const b=v.store(Ei.store),S=new Ei(0,0,It.min().toTimestamp(),0);return b.put(Ei.key,S)}(l))),s<4&&a>=4&&(0!==s&&(f=f.next(()=>function(v,b){return b.store(En.store).Lt().next(S=>{v.deleteObjectStore(En.store),v.createObjectStore(En.store,{keyPath:En.keyPath,autoIncrement:!0}).createIndex(En.userMutationsIndex,En.userMutationsKeyPath,{unique:!0});const N=b.store(En.store),P=S.map(Y=>N.put(Y));return Me.waitFor(P)})}(e,l))),f=f.next(()=>{!function(v){v.createObjectStore(xu.store,{keyPath:xu.keyPath})}(e)})),s<5&&a>=5&&(f=f.next(()=>this.Ce(l))),s<6&&a>=6&&(f=f.next(()=>(function(v){v.createObjectStore(Su.store)}(e),this.Ne(l)))),s<7&&a>=7&&(f=f.next(()=>this.xe(l))),s<8&&a>=8&&(f=f.next(()=>this.ke(e,l))),s<9&&a>=9&&(f=f.next(()=>{(function(v){v.objectStoreNames.contains("remoteDocumentChanges")&&v.deleteObjectStore("remoteDocumentChanges")})(e),function(v){const b=v.objectStore(Kn.store);b.createIndex(Kn.readTimeIndex,Kn.readTimeIndexPath,{unique:!1}),b.createIndex(Kn.collectionReadTimeIndex,Kn.collectionReadTimeIndexPath,{unique:!1})}(t)})),s<10&&a>=10&&(f=f.next(()=>this.$e(l))),s<11&&a>=11&&(f=f.next(()=>{(function(v){v.createObjectStore(Dd.store,{keyPath:Dd.keyPath})})(e),function(v){v.createObjectStore(Ma.store,{keyPath:Ma.keyPath})}(e)})),f}Ne(e){let t=0;return e.store(Kn.store).Kt((s,a)=>{t+=wy(a)}).next(()=>{const s=new Su(t);return e.store(Su.store).put(Su.key,s)})}Ce(e){const t=e.store(Uc.store),s=e.store(En.store);return t.Lt().next(a=>Me.forEach(a,l=>{const f=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.Lt(En.userMutationsIndex,f).next(v=>Me.forEach(v,b=>{ft(b.userId===l.userId);const S=Td(this.N,b);return SE(e,l.userId,S).next(()=>{})}))}))}xe(e){const t=e.store(Pr.store),s=e.store(Kn.store);return e.store(Ei.store).get(Ei.key).next(a=>{const l=[];return s.Kt((f,v)=>{const b=new Kt(f),S=[0,Lo(b)];l.push(t.get(S).next(N=>N?Me.resolve():t.put(new Pr(0,Lo(b),a.highestListenSequenceNumber))))}).next(()=>Me.waitFor(l))})}ke(e,t){e.createObjectStore(Cd.store,{keyPath:Cd.keyPath});const s=t.store(Cd.store),a=new TE,l=f=>{if(a.add(f)){const v=f.lastSegment(),b=f.popLast();return s.put({collectionId:v,parent:Lo(b)})}};return t.store(Kn.store).Kt({qt:!0},(f,v)=>{const b=new Kt(f);return l(b.popLast())}).next(()=>t.store(vi.store).Kt({qt:!0},([f,v,b],S)=>{const N=Na(v);return l(N.popLast())}))}$e(e){const t=e.store(Ts.store);return t.Kt((s,a)=>{const l=dg(a),f=GI(this.N,l);return t.put(f)})}}function Vo(n){n.createObjectStore(Pr.store,{keyPath:Pr.keyPath}).createIndex(Pr.documentTargetsIndex,Pr.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Ts.store,{keyPath:Ts.keyPath}).createIndex(Ts.queryTargetsIndexName,Ts.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Ei.store)}const Dy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class JI{constructor(e,t,s,a,l,f,v,b,S,N){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Oe=l,this.window=f,this.document=v,this.Fe=S,this.Me=N,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=P=>Promise.resolve(),!JI.bt())throw new Oe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NA(this,a),this.We=t+"main",this.N=new IE(b),this.Ge=new io(this.We,11,new OA(this.N)),this.ze=new RA(this.referenceDelegate,this.N),this.Ht=new zI,this.He=new Cy(this.N,this.Ht),this.Je=new SA,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===N&&_r("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(me.FAILED_PRECONDITION,Dy);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Mr(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var s=(0,be.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,be.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ty(e).put(new xu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(so(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return zc(e).get(rs.key).next(t=>Me.resolve(this.an(t)))}un(e){return Ty(e).delete(this.clientId)}hn(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=Mi(s,xu.store);return a.Lt().next(l=>{const f=e.fn(l,18e5),v=l.filter(b=>-1===f.indexOf(b));return Me.forEach(v,b=>a.delete(b.clientId)).next(()=>v)})}).catch(()=>[]);if(e.Ye)for(const s of t)e.Ye.removeItem(e.dn(s.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Me.resolve(!0):zc(e).get(rs.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new Oe(me.FAILED_PRECONDITION,Dy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ty(e).Lt().next(s=>void 0===this.fn(s,5e3).find(a=>{if(this.clientId!==a.clientId){const f=!this.inForeground&&a.inForeground,v=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||f&&v)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[rs.store,xu.store],t=>{const s=new jI(t,Mr.T);return e.on(s).next(()=>e.un(s))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(s=>this.ln(s.updateTimeMs,t)&&!this.wn(s.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Ty(e).Lt().next(t=>this.fn(t,18e5).map(s=>s.clientId)))}get started(){return this.Be}getMutationQueue(e){return xE.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,s){let l;return Ve("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",DA,f=>(l=new jI(f,this.Le?this.Le.next():Mr.T),"readwrite-primary"===t?this.sn(l).next(v=>!!v||this.rn(l)).next(v=>{if(!v)throw _r(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Oe(me.FAILED_PRECONDITION,VI);return s(l)}).next(v=>this.cn(l).next(()=>v)):this.Tn(l).next(()=>s(l)))).then(f=>(l.raiseOnCommittedEvent(),f))}Tn(e){return zc(e).get(rs.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(me.FAILED_PRECONDITION,Dy)})}cn(e){const t=new rs(this.clientId,this.allowTabSynchronization,Date.now());return zc(e).put(rs.key,t)}static bt(){return io.bt()}on(e){const t=zc(e);return t.get(rs.key).next(s=>this.an(s)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete(rs.key)):Me.resolve())}ln(e,t){const s=Date.now();return!(e<s-t||e>s&&(_r(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,St.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const s=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return _r("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){_r("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zc(n){return Mi(n,rs.store)}function Ty(n){return Mi(n,xu.store)}function PE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class bR{constructor(e,t){this.progress=e,this.En=t}}class XI{constructor(e,t,s){this.He=e,this.In=t,this.Ht=s}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(s=>this.Rn(e,t,s))}Rn(e,t,s){return this.He.getEntry(e,t).next(a=>{for(const l of s)l.applyToLocalView(a);return a})}bn(e,t){e.forEach((s,a)=>{for(const l of t)l.applyToLocalView(a)})}Pn(e,t){return this.He.getEntries(e,t).next(s=>this.vn(e,s).next(()=>s))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>this.bn(t,s))}getDocumentsMatchingQuery(e,t,s){return Xe.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.Vn(e,t.path):hy(t)?this.Sn(e,t,s):this.Dn(e,t,s);var a}Vn(e,t){return this.An(e,new Xe(t)).next(s=>{let a=dE();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}Sn(e,t,s){const a=t.collectionGroup;let l=dE();return this.Ht.getCollectionParents(e,a).next(f=>Me.forEach(f,v=>{const b=(S=t,N=v.child(a),new xa(N,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt));var S,N;return this.Dn(e,b,s).next(S=>{S.forEach((N,P)=>{l=l.insert(N,P)})})}).next(()=>l))}Dn(e,t,s){let a,l;return this.He.getDocumentsMatchingQuery(e,t,s).next(f=>(a=f,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(f=>(l=f,this.Cn(e,l,a).next(v=>{a=v;for(const b of l)for(const S of b.mutations){const N=S.key;let P=a.get(N);null==P&&(P=In.newInvalidDocument(N),a=a.insert(N,P)),py(S,P,b.localWriteTime),P.isFoundDocument()||(a=a.remove(N))}}))).next(()=>(a.forEach((f,v)=>{eg(t,v)||(a=a.remove(f))}),a))}Cn(e,t,s){let a=Yt();for(const f of t)for(const v of f.mutations)v instanceof Au&&null===s.get(v.key)&&(a=a.add(v.key));let l=s;return this.He.getEntries(e,a).next(f=>(f.forEach((v,b)=>{b.isFoundDocument()&&(l=l.insert(v,b))}),l))}}class kE{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Nn=s,this.xn=a}static kn(e,t){let s=Yt(),a=Yt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new kE(e,t.fromCache,s,a)}}class eC{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,s,a){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||s.isEqual(It.min())?this.Fn(e,t):this.On.Pn(e,a).next(l=>{const f=this.Mn(t,l);return(Xp(t)||Du(t))&&this.Ln(t.limitType,f,a,s)?this.Fn(e,t):(zv()<=Ia.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),eo(t)),this.On.getDocumentsMatchingQuery(e,t,s).next(v=>(f.forEach(b=>{v=v.insert(b.key,b)}),v)))});var l}Mn(e,t){let s=new Vn(gI(e));return t.forEach((a,l)=>{eg(e,l)&&(s=s.add(l))}),s}Ln(e,t,s,a){if(s.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Fn(e,t){return zv()<=Ia.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",eo(t)),this.On.getDocumentsMatchingQuery(e,t,It.min())}}class FE{constructor(e,t,s,a){this.persistence=e,this.Bn=t,this.N=a,this.Un=new vr(Nt),this.qn=new hg(l=>Qp(l),yf),this.Kn=It.min(),this.In=e.getMutationQueue(s),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new XI(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function LE(n,e,t,s){return new FE(n,e,t,s)}function Ay(n,e){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,be.Z)(function*(n,e){const t=Be(n);let s=t.In,a=t.Qn;const l=yield t.persistence.runTransaction("Handle user change","readonly",f=>{let v;return t.In.getAllMutationBatches(f).next(b=>(v=b,s=t.persistence.getMutationQueue(e),a=new XI(t.jn,s,t.persistence.getIndexManager()),s.getAllMutationBatches(f))).next(b=>{const S=[],N=[];let P=Yt();for(const Y of v){S.push(Y.batchId);for(const J of Y.mutations)P=P.add(J.key)}for(const Y of b){N.push(Y.batchId);for(const J of Y.mutations)P=P.add(J.key)}return a.Pn(f,P).next(Y=>({Wn:Y,removedBatchIds:S,addedBatchIds:N}))})});return t.In=s,t.Qn=a,t.Bn.$n(t.Qn),l})).apply(this,arguments)}function PA(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.jn.newChangeBuffer({trackRemovals:!0});return function(f,v,b,S){const N=b.batch,P=N.keys();let Y=Me.resolve();return P.forEach(J=>{Y=Y.next(()=>S.getEntry(v,J)).next(xe=>{const $e=b.docVersions.get(J);ft(null!==$e),xe.version.compareTo($e)<0&&(N.applyToRemoteDocument(xe,b),xe.isValidDocument()&&S.addEntry(xe,b.commitVersion))})}),Y.next(()=>f.In.removeMutationBatch(v,N))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.In.performConsistencyCheck(s)).next(()=>t.Qn.Pn(s,a))})}function kA(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function FA(n,e){const t=Be(n),s=e.snapshotVersion;let a=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=t.jn.newChangeBuffer({trackRemovals:!0});a=t.Un;const v=[];e.targetChanges.forEach((S,N)=>{const P=a.get(N);if(!P)return;v.push(t.ze.removeMatchingKeys(l,S.removedDocuments,N).next(()=>t.ze.addMatchingKeys(l,S.addedDocuments,N)));const Y=S.resumeToken;if(Y.approximateByteSize()>0){const J=P.withResumeToken(Y,s).withSequenceNumber(l.currentSequenceNumber);a=a.insert(N,J),xe=P,Ze=S,ft(($e=J).resumeToken.approximateByteSize()>0),(0===xe.resumeToken.approximateByteSize()||$e.snapshotVersion.toMicroseconds()-xe.snapshotVersion.toMicroseconds()>=3e8||Ze.addedDocuments.size+Ze.modifiedDocuments.size+Ze.removedDocuments.size>0)&&v.push(t.ze.updateTargetData(l,J))}var xe,$e,Ze});let b=ro();if(e.documentUpdates.forEach((S,N)=>{e.resolvedLimboDocuments.has(S)&&v.push(t.persistence.referenceDelegate.updateLimboDocument(l,S))}),v.push(tC(l,f,e.documentUpdates,s,void 0).next(S=>{b=S})),!s.isEqual(It.min())){const S=t.ze.getLastRemoteSnapshotVersion(l).next(N=>t.ze.setTargetsMetadata(l,l.currentSequenceNumber,s));v.push(S)}return Me.waitFor(v).next(()=>f.apply(l)).next(()=>t.Qn.vn(l,b)).next(()=>b)}).then(l=>(t.Un=a,l))}function tC(n,e,t,s,a){let l=Yt();return t.forEach(f=>l=l.add(f)),e.getEntries(n,l).next(f=>{let v=ro();return t.forEach((b,S)=>{const N=f.get(b),P=(null==a?void 0:a.get(b))||s;S.isNoDocument()&&S.version.isEqual(It.min())?(e.removeEntry(b,P),v=v.insert(b,S)):!N.isValidDocument()||S.version.compareTo(N.version)>0||0===S.version.compareTo(N.version)&&N.hasPendingWrites?(e.addEntry(S,P),v=v.insert(b,S)):Ve("LocalStore","Ignoring outdated watch update for ",b,". Current version:",N.version," Watch version:",S.version)}),v})}function LA(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(s,e)))}function Sd(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.ze.getTargetData(s,e).next(l=>l?(a=l,Me.resolve(a)):t.ze.allocateTargetId(s).next(f=>(a=new jc(e,f,0,s.currentSequenceNumber),t.ze.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.Un.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Un=t.Un.insert(s.targetId,s),t.qn.set(e,s.targetId)),s})}function xd(n,e,t){return xy.apply(this,arguments)}function xy(){return(xy=(0,be.Z)(function*(n,e,t){const s=Be(n),a=s.Un.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,f=>s.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!so(f))throw f;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}s.Un=s.Un.remove(e),s.qn.delete(a.target)})).apply(this,arguments)}function Ry(n,e,t){const s=Be(n);let a=It.min(),l=Yt();return s.persistence.runTransaction("Execute query","readonly",f=>function(v,b,S){const N=Be(v),P=N.qn.get(S);return void 0!==P?Me.resolve(N.Un.get(P)):N.ze.getTargetData(b,S)}(s,f,Cs(e)).next(v=>{if(v)return a=v.lastLimboFreeSnapshotVersion,s.ze.getMatchingKeysForTargetId(f,v.targetId).next(b=>{l=b})}).next(()=>s.Bn.getDocumentsMatchingQuery(f,e,t?a:It.min(),t?l:Yt())).next(v=>({documents:v,Gn:l})))}function nC(n,e){const t=Be(n),s=Be(t.ze),a=t.Un.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.Tt(l,e).next(f=>f?f.target:null))}function VE(n){const e=Be(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(s,a,l){const f=Be(s);let v=ro(),b=CE(l);const S=Wc(a),N=IDBKeyRange.lowerBound(b,!0);return S.Kt({index:Kn.readTimeIndex,range:N},(P,Y)=>{const J=Ey(f.N,Y);v=v.insert(J.key,J),b=Y.readTime}).next(()=>({En:v,readTime:HI(b)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:s})=>(e.Kn=s,t))}function UE(){return(UE=(0,be.Z)(function*(n){const e=Be(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(s){const a=Wc(s);let l=It.min();return a.Kt({index:Kn.readTimeIndex,reverse:!0},(f,v,b)=>{v.readTime&&(l=HI(v.readTime)),b.done()}).next(()=>l)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function Pf(){return(Pf=(0,be.Z)(function*(n,e,t,s){const a=Be(n);let l=Yt(),f=ro(),v=hE();for(const N of t){const P=e.zn(N.metadata.name);N.document&&(l=l.add(P)),f=f.insert(P,e.Hn(N)),v=v.insert(P,e.Jn(N.metadata.readTime))}const b=a.jn.newChangeBuffer({trackRemovals:!0}),S=yield Sd(a,(N=s,Cs(vd(Kt.fromString(`__bundle__/docs/${N}`)))));var N;return a.persistence.runTransaction("Apply bundle documents","readwrite",N=>tC(N,b,f,It.min(),v).next(P=>(b.apply(N),P)).next(P=>a.ze.removeMatchingKeysForTargetId(N,S.targetId).next(()=>a.ze.addMatchingKeys(N,l,S.targetId)).next(()=>a.Qn.vn(N,P)).next(()=>P)))})).apply(this,arguments)}function My(n,e){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,be.Z)(function*(n,e,t=Yt()){const s=yield Sd(n,Cs(DE(e.bundledQuery))),a=Be(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const f=ze(e.readTime);if(s.snapshotVersion.compareTo(f)>=0)return a.Je.saveNamedQuery(l,e);const v=s.withResumeToken(sr.EMPTY_BYTE_STRING,f);return a.Un=a.Un.insert(v.targetId,v),a.ze.updateTargetData(l,v).next(()=>a.ze.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.ze.addMatchingKeys(l,t,s.targetId)).next(()=>a.Je.saveNamedQuery(l,e))})})).apply(this,arguments)}class VA{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Me.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var s;return this.Yn.set(t.id,{id:(s=t).id,version:s.version,createTime:ze(s.createTime)}),Me.resolve()}getNamedQuery(e,t){return Me.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(s=t).name,query:DE(s.bundledQuery),readTime:ze(s.readTime)}),Me.resolve();var s}}class BE{constructor(){this.Zn=new Vn(ni.ts),this.es=new Vn(ni.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new ni(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new ni(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}cs(e){const t=new Xe(new Kt([])),s=new ni(t,e),a=new ni(t,e+1),l=[];return this.es.forEachInRange([s,a],f=>{this.rs(f),l.push(f.key)}),l}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Xe(new Kt([])),s=new ni(t,e),a=new ni(t,e+1);let l=Yt();return this.es.forEachInRange([s,a],f=>{l=l.add(f.key)}),l}containsKey(e){const t=new ni(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class ni{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Xe.comparator(e.key,t.key)||Nt(e.ls,t.ls)}static ns(e,t){return Nt(e.ls,t.ls)||Xe.comparator(e.key,t.key)}}class UA{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Vn(ni.ts)}checkEmpty(e){return Me.resolve(0===this.In.length)}addMutationBatch(e,t,s,a){const l=this.fs;this.fs++;const f=new bE(l,t,s,a);this.In.push(f);for(const v of a)this.ds=this.ds.add(new ni(v.key,l)),this.Ht.addToCollectionParentIndex(e,v.key.path.popLast());return Me.resolve(f)}lookupMutationBatch(e,t){return Me.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const a=this._s(t+1),l=a<0?0:a;return Me.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Me.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ni(t,0),a=new ni(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([s,a],f=>{const v=this.ws(f.ls);l.push(v)}),Me.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Vn(Nt);return t.forEach(a=>{const l=new ni(a,0),f=new ni(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,f],v=>{s=s.add(v.ls)})}),Me.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Xe.isDocumentKey(l)||(l=l.child(""));const f=new ni(new Xe(l),0);let v=new Vn(Nt);return this.ds.forEachWhile(b=>{const S=b.key.path;return!!s.isPrefixOf(S)&&(S.length===a&&(v=v.add(b.ls)),!0)},f),Me.resolve(this.gs(v))}gs(e){const t=[];return e.forEach(s=>{const a=this.ws(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){ft(0===this.ys(t.batchId,"removed")),this.In.shift();let s=this.ds;return Me.forEach(t.mutations,a=>{const l=new ni(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ds=s})}te(e){}containsKey(e,t){const s=new ni(t,0),a=this.ds.firstAfterOrEqual(s);return Me.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return Me.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class BA{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new vr(Xe.comparator),this.size=0}addEntry(e,t,s){const a=t.key,l=this.docs.get(a),f=l?l.size:0,v=this.ps(t);return this.docs=this.docs.insert(a,{document:t.clone(),size:v,readTime:s}),this.size+=v-f,this.Ht.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Me.resolve(s?s.document.clone():In.newInvalidDocument(t))}getEntries(e,t){let s=ro();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.clone():In.newInvalidDocument(a))}),Me.resolve(s)}getDocumentsMatchingQuery(e,t,s){let a=ro();const l=new Xe(t.path.child("")),f=this.docs.getIteratorFrom(l);for(;f.hasNext();){const{key:v,value:{document:b,readTime:S}}=f.getNext();if(!t.path.isPrefixOf(v.path))break;S.compareTo(s)<=0||eg(t,b)&&(a=a.insert(b.key,b.clone()))}return Me.resolve(a)}Ts(e,t){return Me.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new jA(this)}getSize(e){return Me.resolve(this.size)}}class jA extends Iy{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.document.isValidDocument()?t.push(this.Se.addEntry(e,a.document,this.getReadTime(s))):this.Se.removeEntry(s)}),Me.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class $A{constructor(e){this.persistence=e,this.Es=new hg(t=>Qp(t),yf),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.Is=0,this.As=new BE,this.targetCount=0,this.Rs=Ru.se()}forEachTarget(e,t){return this.Es.forEach((s,a)=>t(a)),Me.resolve()}getLastRemoteSnapshotVersion(e){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Me.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Is&&(this.Is=t),Me.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Ru(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Me.resolve()}updateTargetData(e,t){return this.ce(t),Me.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Me.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Es.forEach((f,v)=>{v.sequenceNumber<=t&&null===s.get(v.targetId)&&(this.Es.delete(f),l.push(this.removeMatchingKeysForTargetId(e,v.targetId)),a++)}),Me.waitFor(l).next(()=>a)}getTargetCount(e){return Me.resolve(this.targetCount)}getTargetData(e,t){const s=this.Es.get(t)||null;return Me.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Me.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(f=>{l.push(a.markPotentiallyOrphaned(e,f))}),Me.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Me.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Me.resolve(s)}containsKey(e,t){return Me.resolve(this.As.containsKey(t))}}class HA{constructor(e,t){this.bs={},this.Le=new Mr(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new $A(this),this.Ht=new xA,this.He=new BA(this.Ht,s=>this.referenceDelegate.Ps(s)),this.N=new IE(t),this.Je=new VA(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new UA(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,s){Ve("MemoryPersistence","Starting transaction:",e);const a=new GA(this.Le.next());return this.referenceDelegate.vs(),s(a).next(l=>this.referenceDelegate.Vs(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ss(e,t){return Me.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class GA extends UI{constructor(e){super(),this.currentSequenceNumber=e}}class jE{constructor(e){this.persistence=e,this.Ds=new BE,this.Cs=null}static Ns(e){return new jE(e)}get xs(){if(this.Cs)return this.Cs;throw st()}addReference(e,t,s){return this.Ds.addReference(s,t),this.xs.delete(s.toString()),Me.resolve()}removeReference(e,t,s){return this.Ds.removeReference(s,t),this.xs.add(s.toString()),Me.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Me.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(a=>this.xs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.xs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.xs,s=>{const a=Xe.fromPath(s);return this.ks(e,a).next(l=>{l||t.removeEntry(a)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(s=>{s?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Me.or([()=>Me.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function iC(n,e){return`firestore_clients_${n}_${e}`}function sC(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function oC(n,e){return`firestore_targets_${n}_${e}`}class Oy{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static $s(e,t,s){const a=JSON.parse(s);let l,f="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(l=new Oe(a.error.code,a.error.message))),f?new Oy(e,t,a.state,l):(_r("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static $s(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new Oe(s.error.code,s.error.message))),l?new Mu(e,s.state,a):(_r("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Py{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=rg();for(let f=0;a&&f<s.activeTargetIds.length;++f)a=oy(s.activeTargetIds[f]),l=l.add(s.activeTargetIds[f]);return a?new Py(e,l):(_r("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $E{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $E(t.clientId,t.onlineState):(_r("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HE{constructor(){this.activeTargetIds=rg()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kf{constructor(e,t,s,a,l){this.window=e,this.Oe=t,this.persistenceKey=s,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new vr(Nt),this.started=!1,this.Ks=[];const f=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=iC(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new HE),this.Ws=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(v){return`firestore_bundle_loaded_${v}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.pn();for(const a of t){if(a===e.Ls)continue;const l=e.getItem(iC(e.persistenceKey,a));if(l){const f=Py.$s(a,l);f&&(e.qs=e.qs.insert(f.clientId,f))}}e.Ys();const s=e.storage.getItem(e.Hs);if(s){const a=e.Xs(s);a&&e.Zs(a)}for(const a of e.Ks)e.Us(a);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,s){this.ei(e,t,s),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(oC(this.persistenceKey,e));if(s){const a=Mu.$s(e,s);a&&(t=a.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(oC(this.persistenceKey,e))}updateQueryState(e,t,s){this.ii(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.ni(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Ve("SharedClientState","EVENT",s.key,s.newValue),s.key===this.js)return void _r("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==s.key)if(t.Ws.test(s.key)){if(null==s.newValue){const a=t.ci(s.key);return t.ai(a,null)}{const a=t.ui(s.key,s.newValue);if(a)return t.ai(a.clientId,a)}}else if(t.Gs.test(s.key)){if(null!==s.newValue){const a=t.hi(s.key,s.newValue);if(a)return t.li(a)}}else if(t.zs.test(s.key)){if(null!==s.newValue){const a=t.fi(s.key,s.newValue);if(a)return t.di(a)}}else if(s.key===t.Hs){if(null!==s.newValue){const a=t.Xs(s.newValue);if(a)return t.Zs(a)}}else if(s.key===t.Qs){const a=function(l){let f=Mr.T;if(null!=l)try{const v=JSON.parse(l);ft("number"==typeof v),f=v}catch(v){_r("SharedClientState","Failed to read sequence number from WebStorage",v)}return f}(s.newValue);a!==Mr.T&&t.sequenceNumberHandler(a)}else if(s.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(s)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,s){const a=new Oy(this.currentUser,e,t,s),l=sC(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Os())}ni(e){const t=sC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,s){const a=oC(this.persistenceKey,e),l=new Mu(e,t,s);this.setItem(a,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const s=this.ci(e);return Py.$s(s,t)}hi(e,t){const s=this.Gs.exec(e),a=Number(s[1]);return Oy.$s(new Qr(void 0!==s[2]?s[2]:null),a,t)}fi(e,t){const s=this.zs.exec(e),a=Number(s[1]);return Mu.$s(a,t)}Xs(e){return $E.$s(e)}li(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const s=t?this.qs.insert(e,t):this.qs.remove(e),a=this.ti(this.qs),l=this.ti(s),f=[],v=[];return l.forEach(b=>{a.has(b)||f.push(b)}),a.forEach(b=>{l.has(b)||v.push(b)}),this.syncEngine.gi(f,v).then(()=>{this.qs=s})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=rg();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class Kc{constructor(){this.yi=new HE,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,s){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new HE,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class aC{Ti(e){}shutdown(){}}class uC{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const IR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qA{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class ky extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,s,a){const l=this.Bi(e,t);Ve("RestConnection","Sending: ",l,s);const f={};return this.Ui(f,a),this.qi(e,l,f,s).then(v=>(Ve("RestConnection","Received: ",v),v),v=>{throw iy("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",s),v})}Ki(e,t,s,a){return this.Li(e,t,s,a)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+pf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const s in t.authHeaders)t.authHeaders.hasOwnProperty(s)&&(e[s]=t.authHeaders[s])}Bi(e,t){return`${this.Fi}/v1/${t}:${IR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,s,a){return new Promise((l,f)=>{const v=new tA;v.listenOnce(Yb.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case qv.NO_ERROR:const S=v.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(S)),l(S);break;case qv.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),f(new Oe(me.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:const N=v.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',N,"response text:",v.getResponseText()),N>0){const P=v.getResponseJson().error;if(P&&P.status&&P.message){const Y=function(J){const xe=J.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(xe)>=0?xe:me.UNKNOWN}(P.status);f(new Oe(Y,P.message))}else f(new Oe(me.UNKNOWN,"Server responded with status "+v.getStatus()))}else f(new Oe(me.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(a);v.send(t,"POST",b,s,15)})}ji(e,t){const s=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Zb(),l=QT(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new eA({})),this.Ui(f.initMessageHeaders,t),(0,St.uI)()||(0,St.b$)()||(0,St.d)()||(0,St.w1)()||(0,St.Mn)()||(0,St.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");Ve("Connection","Creating WebChannel: "+v,f);const b=a.createWebChannel(v,f);let S=!1,N=!1;const P=new qA({vi:J=>{N?Ve("Connection","Not sending because WebChannel is closed:",J):(S||(Ve("Connection","Opening WebChannel transport."),b.open(),S=!0),Ve("Connection","WebChannel sending:",J),b.send(J))},Vi:()=>b.close()}),Y=(J,xe,$e)=>{J.listen(xe,Ze=>{try{$e(Ze)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Y(b,qp.EventType.OPEN,()=>{N||Ve("Connection","WebChannel transport opened.")}),Y(b,qp.EventType.CLOSE,()=>{N||(N=!0,Ve("Connection","WebChannel transport closed"),P.$i())}),Y(b,qp.EventType.ERROR,J=>{N||(N=!0,iy("Connection","WebChannel transport errored:",J),P.$i(new Oe(me.UNAVAILABLE,"The operation could not be completed")))}),Y(b,qp.EventType.MESSAGE,J=>{var xe;if(!N){const $e=J.data[0];ft(!!$e);const Ze=$e,Ot=Ze.error||(null===(xe=Ze[0])||void 0===xe?void 0:xe.error);if(Ot){Ve("Connection","WebChannel received error:",Ot);const nn=Ot.status;let Nn=function(ur){const Ba=ar[ur];if(void 0!==Ba)return II(Ba)}(nn),Ut=Ot.message;void 0===Nn&&(Nn=me.INTERNAL,Ut="Unknown error status: "+nn+" with message "+Ot.message),N=!0,P.$i(new Oe(Nn,Ut)),b.close()}else Ve("Connection","WebChannel received:",$e),P.Oi($e)}}),Y(l,JT.STAT_EVENT,J=>{J.stat===XT.PROXY?Ve("Connection","Detected buffering proxy"):J.stat===XT.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.ki()},0),P}}function cC(){return"undefined"!=typeof window?window:null}function Fy(){return"undefined"!=typeof document?document:null}function Ff(n){return new _R(n,!0)}class Ly{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Qi=s,this.Wi=a,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),s=Math.max(0,Date.now()-this.Ji),a=Math.max(0,t-s);a>0&&Ve("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Vy{constructor(e,t,s,a,l,f,v){this.Oe=e,this.er=s,this.nr=a,this.sr=l,this.credentialsProvider=f,this.listener=v,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new Ly(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,be.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,be.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var s=this;return(0,be.Z)(function*(){s.gr(),s.yr(),s.ar.cancel(),s.ir++,4!==e?s.ar.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),s.ar.Yi()):t&&t.code===me.UNAUTHENTICATED&&3!==s.state&&s.credentialsProvider.invalidateToken(),null!==s.stream&&(s.pr(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(s=>{this.ir===t&&this.Er(s)},s=>{e(()=>{const a=new Oe(me.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Ir(a)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(s=>{t(()=>this.Ir(s))}),this.stream.onMessage(s=>{t(()=>this.onMessage(s))})}lr(){var e=this;this.state=5,this.ar.Xi((0,be.Z)(function*(){e.state=0,e.start()}))}Ir(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lC extends Vy{constructor(e,t,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,l),this.N=a}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:st(),a=e.targetChange.targetIds||[],l=function(b,S){return b.D?(ft(void 0===S||"string"==typeof S),sr.fromBase64String(S||"")):(ft(void 0===S||S instanceof Uint8Array),sr.fromUint8Array(S||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,v=f&&function(b){const S=void 0===b.code?me.UNKNOWN:II(b.code);return new Oe(S,b.message||"")}(f);t=new fE(s,a,l,v||null)}else if("documentChange"in e){const s=e.documentChange,a=Ds(n,s.document.name),l=ze(s.document.updateTime),f=new ei({mapValue:{fields:s.document.fields}}),v=In.newFoundDocument(a,l,f);t=new ig(s.targetIds||[],s.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const s=e.documentDelete,a=Ds(n,s.document),l=s.readTime?ze(s.readTime):It.min(),f=In.newNoDocument(a,l);t=new ig([],s.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const s=e.documentRemove,a=Ds(n,s.document);t=new ig([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return st();{const s=e.filter,l=new pA(s.count||0);t=new my(s.targetId,l)}}var b;return t}(this.N,e),s=function(a){if(!("targetChange"in a))return It.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?It.min():l.readTime?ze(l.readTime):It.min()}(e);return this.listener.Rr(t,s)}br(e){const t={};t.database=Vc(this.N),t.addTarget=function(a,l){let f;const v=l.target;return f=Jp(v)?{documents:wE(a,v)}:{query:NI(a,v)},f.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?f.resumeToken=gE(a,l.resumeToken):l.snapshotVersion.compareTo(It.min())>0&&(f.readTime=xf(a,l.snapshotVersion.toTimestamp())),f}(this.N,e);const s=function(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.mr(t)}Pr(e){const t={};t.database=Vc(this.N),t.removeTarget=e,this.mr(t)}}class dC extends Vy{constructor(e,t,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,l),this.N=a,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(n,e){return n&&n.length>0?(ft(void 0!==e),n.map(t=>function(s,a){let l=ze(s.updateTime?s.updateTime:a);return l.isEqual(It.min())&&(l=ze(a)),new yI(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=ze(e.commitTime);return this.listener.Dr(s,t)}return ft(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=Vc(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>ag(this.N,s))};this.mr(t)}}class WA extends class{}{constructor(e,t,s){super(),this.credentials=e,this.sr=t,this.N=s,this.kr=!1}$r(){if(this.kr)throw new Oe(me.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,s){return this.$r(),this.credentials.getToken().then(a=>this.sr.Li(e,t,s,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===me.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new Oe(me.UNKNOWN,a.toString())})}Ki(e,t,s){return this.$r(),this.credentials.getToken().then(a=>this.sr.Ki(e,t,s,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===me.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new Oe(me.UNKNOWN,a.toString())})}terminate(){this.kr=!0}}class zA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(_r(t),this.Mr=!1):Ve("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class hC{constructor(e,t,s,a,l){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=l,this.zr.Ti(v=>{s.enqueueAndForget((0,be.Z)(function*(){var b;Md(f)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,be.Z)(function*(S){const N=Be(S);N.Wr.add(4),yield Ou(N),N.Hr.set("Unknown"),N.Wr.delete(4),yield fg(N)}),function(S){return b.apply(this,arguments)})(f))}))}),this.Hr=new zA(s,a)}}function fg(n){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,be.Z)(function*(n){if(Md(n))for(const e of n.Gr)yield e(!0)})).apply(this,arguments)}function Ou(n){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,be.Z)(function*(n){for(const e of n.Gr)yield e(!1)})).apply(this,arguments)}function GE(n,e){const t=Be(n);t.Qr.has(e.targetId)||(t.Qr.set(e.targetId,e),Nd(t)?Zc(t):Fd(t).hr()&&qt(t,e))}function Pu(n,e){const t=Be(n),s=Fd(t);t.Qr.delete(e),s.hr()&&ku(t,e),0===t.Qr.size&&(s.hr()?s.wr():Md(t)&&t.Hr.set("Unknown"))}function qt(n,e){n.Jr.Y(e.targetId),Fd(n).br(e)}function ku(n,e){n.Jr.Y(e),Fd(n).Pr(e)}function Zc(n){n.Jr=new yA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.Qr.get(e)||null}),Fd(n).start(),n.Hr.Lr()}function Nd(n){return Md(n)&&!Fd(n).ur()&&n.Qr.size>0}function Md(n){return 0===Be(n).Wr.size}function yt(n){n.Jr=void 0}function oo(n){return pg.apply(this,arguments)}function pg(){return(pg=(0,be.Z)(function*(n){n.Qr.forEach((e,t)=>{qt(n,e)})})).apply(this,arguments)}function Od(n,e){return fC.apply(this,arguments)}function fC(){return(fC=(0,be.Z)(function*(n,e){yt(n),Nd(n)?(n.Hr.qr(e),Zc(n)):n.Hr.set("Unknown")})).apply(this,arguments)}function pC(n,e,t){return By.apply(this,arguments)}function By(){return(By=(0,be.Z)(function*(n,e,t){if(n.Hr.set("Online"),e instanceof fE&&2===e.state&&e.cause)try{yield(s=(0,be.Z)(function*(a,l){const f=l.cause;for(const v of l.targetIds)a.Qr.has(v)&&(yield a.remoteSyncer.rejectListen(v,f),a.Qr.delete(v),a.Jr.removeTarget(v))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield qE(n,s)}else if(e instanceof ig?n.Jr.rt(e):e instanceof my?n.Jr.ft(e):n.Jr.at(e),!t.isEqual(It.min()))try{const s=yield kA(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const f=a.Jr._t(l);return f.targetChanges.forEach((v,b)=>{if(v.resumeToken.approximateByteSize()>0){const S=a.Qr.get(b);S&&a.Qr.set(b,S.withResumeToken(v.resumeToken,l))}}),f.targetMismatches.forEach(v=>{const b=a.Qr.get(v);if(!b)return;a.Qr.set(v,b.withResumeToken(sr.EMPTY_BYTE_STRING,b.snapshotVersion)),ku(a,v);const S=new jc(b.target,v,1,b.sequenceNumber);qt(a,S)}),a.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(s){Ve("RemoteStore","Failed to raise snapshot:",s),yield qE(n,s)}var s})).apply(this,arguments)}function qE(n,e,t){return WE.apply(this,arguments)}function WE(){return(WE=(0,be.Z)(function*(n,e,t){if(!so(e))throw e;n.Wr.add(1),yield Ou(n),n.Hr.set("Offline"),t||(t=()=>kA(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.Wr.delete(1),yield fg(n)}))})).apply(this,arguments)}function gC(n,e){return e().catch(t=>qE(n,t,e))}function ri(n){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,be.Z)(function*(n){const e=Be(n),t=As(e);let s=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;Uo(e);)try{const a=yield LA(e.localStore,s);if(null===a){0===e.jr.length&&t.wr();break}s=a.batchId,mC(e,a)}catch(a){yield qE(e,a)}yC(e)&&zE(e)})).apply(this,arguments)}function Uo(n){return Md(n)&&n.jr.length<10}function mC(n,e){n.jr.push(e);const t=As(n);t.hr()&&t.Vr&&t.Sr(e.mutations)}function yC(n){return Md(n)&&!As(n).ur()&&n.jr.length>0}function zE(n){As(n).start()}function KE(n){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,be.Z)(function*(n){As(n).Nr()})).apply(this,arguments)}function gg(n){return ZE.apply(this,arguments)}function ZE(){return(ZE=(0,be.Z)(function*(n){const e=As(n);for(const t of n.jr)e.Sr(t.mutations)})).apply(this,arguments)}function Pd(n,e,t){return YE.apply(this,arguments)}function YE(){return(YE=(0,be.Z)(function*(n,e,t){const s=n.jr.shift(),a=lg.from(s,e,t);yield gC(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield ri(n)})).apply(this,arguments)}function _C(n,e){return mg.apply(this,arguments)}function mg(){return(mg=(0,be.Z)(function*(n,e){var t;e&&As(n).Vr&&(yield(t=(0,be.Z)(function*(s,a){if(bI(l=a.code)&&l!==me.ABORTED){const f=s.jr.shift();As(s).dr(),yield gC(s,()=>s.remoteSyncer.rejectFailedWrite(f.batchId,a)),yield ri(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),yC(n)&&zE(n)})).apply(this,arguments)}function kd(n,e){return yg.apply(this,arguments)}function yg(){return(yg=(0,be.Z)(function*(n,e){const t=Be(n);e?(t.Wr.delete(2),yield fg(t)):e||(t.Wr.add(2),yield Ou(t),t.Hr.set("Unknown"))})).apply(this,arguments)}function Fd(n){return n.Yr||(n.Yr=function(e,t,s){const a=Be(e);return a.$r(),new lC(t,a.sr,a.credentials,a.N,s)}(n.datastore,n.asyncQueue,{Si:oo.bind(null,n),Ci:Od.bind(null,n),Rr:pC.bind(null,n)}),n.Gr.push(function(){var e=(0,be.Z)(function*(t){t?(n.Yr.dr(),Nd(n)?Zc(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),yt(n))});return function(t){return e.apply(this,arguments)}}())),n.Yr}function As(n){return n.Xr||(n.Xr=function(e,t,s){const a=Be(e);return a.$r(),new dC(t,a.sr,a.credentials,a.N,s)}(n.datastore,n.asyncQueue,{Si:KE.bind(null,n),Ci:_C.bind(null,n),Cr:gg.bind(null,n),Dr:Pd.bind(null,n)}),n.Gr.push(function(){var e=(0,be.Z)(function*(t){t?(n.Xr.dr(),yield ri(n)):(yield n.Xr.stop(),n.jr.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Xr}class QE{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,s,a,l){const f=Date.now()+s,v=new QE(e,t,f,a,l);return v.start(s),v}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fu(n,e){if(_r("AsyncQueue",`${e}: ${n}`),so(n))return new Oe(me.UNAVAILABLE,`${e}: ${n}`);throw n}class Ld{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Xe.comparator(t.key,s.key):(t,s)=>Xe.comparator(t.key,s.key),this.keyedMap=dE(),this.sortedSet=new vr(this.comparator)}static emptySet(e){return new Ld(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ld)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Ld;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class JE{constructor(){this.Zr=new vr(Xe.comparator)}track(e){const t=e.doc.key,s=this.Zr.get(t);s?0!==e.type&&3===s.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==s.type?this.Zr=this.Zr.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Zr=this.Zr.remove(t):1===e.type&&2===s.type?this.Zr=this.Zr.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):st():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,s)=>{e.push(s)}),e}}class Vd{constructor(e,t,s,a,l,f,v,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=v,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new Vd(e,t,Ld.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class jy{constructor(){this.no=void 0,this.listeners=[]}}class KA{constructor(){this.queries=new hg(e=>fy(e),Ef),this.onlineState="Unknown",this.so=new Set}}function _g(n,e){return vg.apply(this,arguments)}function vg(){return(vg=(0,be.Z)(function*(n,e){const t=Be(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new jy),a)try{l.no=yield t.onListen(s)}catch(f){const v=Fu(f,`Initialization of query '${eo(e.query)}' failed`);return void e.onError(v)}t.queries.set(s,l),l.listeners.push(e),e.io(t.onlineState),l.no&&e.ro(l.no)&&Ud(t)})).apply(this,arguments)}function vC(n,e){return EC.apply(this,arguments)}function EC(){return(EC=(0,be.Z)(function*(n,e){const t=Be(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const f=l.listeners.indexOf(e);f>=0&&(l.listeners.splice(f,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)})).apply(this,arguments)}function _t(n,e){const t=Be(n);let s=!1;for(const a of e){const f=t.queries.get(a.query);if(f){for(const v of f.listeners)v.ro(a)&&(s=!0);f.no=a}}s&&Ud(t)}function CR(n,e,t){const s=Be(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function Ud(n){n.so.forEach(e=>{e.next()})}class XE{constructor(e,t,s){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=s||{}}ro(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Vd(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=Vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class ZA{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class wC{constructor(e){this.N=e}zn(e){return Ds(this.N,e)}Hn(e){return e.metadata.exists?_E(this.N,e.document,!1):In.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return ze(e)}}class DR{constructor(e,t,s){this._o=e,this.localStore=t,this.N=s,this.queries=[],this.documents=[],this.progress=YA(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,s=new wC(this.N);for(const a of e)if(a.metadata.queries){const l=s.zn(a.metadata.name);for(const f of a.metadata.queries){const v=(t.get(f)||Yt()).add(l);t.set(f,v)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function(n,e,t,s){return Pf.apply(this,arguments)}(e.localStore,new wC(e.N),e.documents,e._o.id),s=e.yo(e.documents);for(const a of e.queries)yield My(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",new bR(Object.assign({},e.progress),t)})()}}function YA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bC{constructor(e){this.key=e}}class ii{constructor(e){this.key=e}}class IC{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=Yt(),this.mutatedKeys=Yt(),this.Io=gI(e),this.Ao=new Ld(this.Io)}get Ro(){return this.po}bo(e,t){const s=t?t.Po:new JE,a=t?t.Ao:this.Ao;let l=t?t.mutatedKeys:this.mutatedKeys,f=a,v=!1;const b=Xp(this.query)&&a.size===this.query.limit?a.last():null,S=Du(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((N,P)=>{const Y=a.get(N),J=eg(this.query,P)?P:null,xe=!!Y&&this.mutatedKeys.has(Y.key),$e=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let Ze=!1;Y&&J?Y.data.isEqual(J.data)?xe!==$e&&(s.track({type:3,doc:J}),Ze=!0):this.vo(Y,J)||(s.track({type:2,doc:J}),Ze=!0,(b&&this.Io(J,b)>0||S&&this.Io(J,S)<0)&&(v=!0)):!Y&&J?(s.track({type:0,doc:J}),Ze=!0):Y&&!J&&(s.track({type:1,doc:Y}),Ze=!0,(b||S)&&(v=!0)),Ze&&(J?(f=f.add(J),l=$e?l.add(N):l.delete(N)):(f=f.delete(N),l=l.delete(N)))}),Xp(this.query)||Du(this.query))for(;f.size>this.query.limit;){const N=Xp(this.query)?f.last():f.first();f=f.delete(N.key),l=l.delete(N.key),s.track({type:1,doc:N})}return{Ao:f,Po:s,Ln:v,mutatedKeys:l}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const l=e.Po.eo();l.sort((S,N)=>function(P,Y){const J=xe=>{switch(xe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return J(P)-J(Y)}(S.type,N.type)||this.Io(S.doc,N.doc)),this.Vo(s);const f=t?this.So():[],v=0===this.Eo.size&&this.current?1:0,b=v!==this.To;return this.To=v,0!==l.length||b?{snapshot:new Vd(this.query,e.Ao,a,l,e.mutatedKeys,0===v,b,!1),Do:f}:{Do:f}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new JE,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(t=>this.po=this.po.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=Yt(),this.Ao.forEach(s=>{this.Co(s.key)&&(this.Eo=this.Eo.add(s.key))});const t=[];return e.forEach(s=>{this.Eo.has(s)||t.push(new ii(s))}),this.Eo.forEach(s=>{e.has(s)||t.push(new bC(s))}),t}No(e){this.po=e.Gn,this.Eo=Yt();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Vd.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class QA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class ew{constructor(e){this.key=e,this.ko=!1}}class JA{constructor(e,t,s,a,l,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.$o={},this.Oo=new hg(v=>fy(v),Ef),this.Fo=new Map,this.Mo=new Set,this.Lo=new vr(Xe.comparator),this.Bo=new Map,this.Uo=new BE,this.qo={},this.Ko=new Map,this.jo=Ru.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function XA(n,e){return tw.apply(this,arguments)}function tw(){return(tw=(0,be.Z)(function*(n,e){const t=kr(n);let s,a;const l=t.Oo.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.xo();else{const f=yield Sd(t.localStore,Cs(e)),v=t.sharedClientState.addLocalQueryTarget(f.targetId);s=f.targetId,a=yield nw(t,e,s,"current"===v),t.isPrimaryClient&&GE(t.remoteStore,f)}return a})).apply(this,arguments)}function nw(n,e,t,s){return rw.apply(this,arguments)}function rw(){return(rw=(0,be.Z)(function*(n,e,t,s){n.Wo=(N,P,Y)=>{return(J=(0,be.Z)(function*(xe,$e,Ze,Ot){let nn=$e.view.bo(Ze);nn.Ln&&(nn=yield Ry(xe.localStore,$e.query,!1).then(({documents:ur})=>$e.view.bo(ur,nn)));const Nn=Ot&&Ot.targetChanges.get($e.targetId),Ut=$e.view.applyChanges(nn,xe.isPrimaryClient,Nn);return DC(xe,$e.targetId,Ut.Do),Ut.snapshot}),function(xe,$e,Ze,Ot){return J.apply(this,arguments)})(n,N,P,Y);var J};const a=yield Ry(n.localStore,e,!0),l=new IC(e,a.Gn),f=l.bo(a.documents),v=Sf.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),b=l.applyChanges(f,n.isPrimaryClient,v);DC(n,t,b.Do);const S=new QA(e,t,l);return n.Oo.set(e,S),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),b.snapshot})).apply(this,arguments)}function eS(n,e){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,be.Z)(function*(n,e){const t=Be(n),s=t.Oo.get(e),a=t.Fo.get(s.targetId);if(a.length>1)return t.Fo.set(s.targetId,a.filter(l=>!Ef(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield xd(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),Pu(t.remoteStore,s.targetId),jd(t,s.targetId)}).catch(qc))):(jd(t,s.targetId),yield xd(t.localStore,s.targetId,!0))})).apply(this,arguments)}function iw(){return(iw=(0,be.Z)(function*(n,e,t){const s=$y(n);try{const a=yield function(l,f){const v=Be(l),b=Or.now(),S=f.reduce((P,Y)=>P.add(Y.key),Yt());let N;return v.persistence.runTransaction("Locally write mutations","readwrite",P=>v.Qn.Pn(P,S).next(Y=>{N=Y;const J=[];for(const xe of f){const $e=vI(xe,N.get(xe.key));null!=$e&&J.push(new Au(xe.key,$e,ly($e.value.mapValue),zn.exists(!0)))}return v.In.addMutationBatch(P,b,J,f)})).then(P=>(P.applyToLocalDocumentSet(N),{batchId:P.batchId,changes:N}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,f,v){let b=l.qo[l.currentUser.toKey()];b||(b=new vr(Nt)),b=b.insert(f,v),l.qo[l.currentUser.toKey()]=b}(s,a.batchId,t),yield Lu(s,a.changes),yield ri(s.remoteStore)}catch(a){const l=Fu(a,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function sw(n,e){return wg.apply(this,arguments)}function wg(){return(wg=(0,be.Z)(function*(n,e){const t=Be(n);try{const s=yield FA(t.localStore,e);e.targetChanges.forEach((a,l)=>{const f=t.Bo.get(l);f&&(ft(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?f.ko=!0:a.modifiedDocuments.size>0?ft(f.ko):a.removedDocuments.size>0&&(ft(f.ko),f.ko=!1))}),yield Lu(t,s,e)}catch(s){yield qc(s)}})).apply(this,arguments)}function CC(n,e,t){const s=Be(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.Oo.forEach((l,f)=>{const v=f.view.io(e);v.snapshot&&a.push(v.snapshot)}),function(l,f){const v=Be(l);v.onlineState=f;let b=!1;v.queries.forEach((S,N)=>{for(const P of N.listeners)P.io(f)&&(b=!0)}),b&&Ud(v)}(s.eventManager,e),a.length&&s.$o.Rr(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function TR(n,e,t){return ow.apply(this,arguments)}function ow(){return(ow=(0,be.Z)(function*(n,e,t){const s=Be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Bo.get(e),l=a&&a.key;if(l){let f=new vr(Xe.comparator);f=f.insert(l,In.newNoDocument(l,It.min()));const v=Yt().add(l),b=new Af(It.min(),new Map,new Vn(Nt),f,v);yield sw(s,b),s.Lo=s.Lo.remove(l),s.Bo.delete(e),dw(s)}else yield xd(s.localStore,e,!1).then(()=>jd(s,e,t)).catch(qc)})).apply(this,arguments)}function nS(n,e){return aw.apply(this,arguments)}function aw(){return(aw=(0,be.Z)(function*(n,e){const t=Be(n),s=e.batch.batchId;try{const a=yield PA(t.localStore,e);lw(t,s,null),cw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Lu(t,a)}catch(a){yield qc(a)}})).apply(this,arguments)}function rS(n,e,t){return uw.apply(this,arguments)}function uw(){return(uw=(0,be.Z)(function*(n,e,t){const s=Be(n);try{const a=yield function(l,f){const v=Be(l);return v.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let S;return v.In.lookupMutationBatch(b,f).next(N=>(ft(null!==N),S=N.keys(),v.In.removeMutationBatch(b,N))).next(()=>v.In.performConsistencyCheck(b)).next(()=>v.Qn.Pn(b,S))})}(s.localStore,e);lw(s,e,t),cw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Lu(s,a)}catch(a){yield qc(a)}})).apply(this,arguments)}function Bd(){return(Bd=(0,be.Z)(function*(n,e){const t=Be(n);Md(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const f=Be(l);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",v=>f.In.getHighestUnacknowledgedBatchId(v))}(t.localStore);if(-1===s)return void e.resolve();const a=t.Ko.get(s)||[];a.push(e),t.Ko.set(s,a)}catch(s){const a=Fu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function cw(n,e){(n.Ko.get(e)||[]).forEach(t=>{t.resolve()}),n.Ko.delete(e)}function lw(n,e,t){const s=Be(n);let a=s.qo[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.qo[s.currentUser.toKey()]=a}}function jd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Fo.get(e))n.Oo.delete(s),t&&n.$o.Go(s,t);n.Fo.delete(e),n.isPrimaryClient&&n.Uo.cs(e).forEach(s=>{n.Uo.containsKey(s)||Vf(n,s)})}function Vf(n,e){n.Mo.delete(e.path.canonicalString());const t=n.Lo.get(e);null!==t&&(Pu(n.remoteStore,t),n.Lo=n.Lo.remove(e),n.Bo.delete(t),dw(n))}function DC(n,e,t){for(const s of t)s instanceof bC?(n.Uo.addReference(s.key,e),TC(n,s)):s instanceof ii?(Ve("SyncEngine","Document no longer in limbo: "+s.key),n.Uo.removeReference(s.key,e),n.Uo.containsKey(s.key)||Vf(n,s.key)):st()}function TC(n,e){const t=e.key,s=t.path.canonicalString();n.Lo.get(t)||n.Mo.has(s)||(Ve("SyncEngine","New document in limbo: "+t),n.Mo.add(s),dw(n))}function dw(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const e=n.Mo.values().next().value;n.Mo.delete(e);const t=new Xe(Kt.fromString(e)),s=n.jo.next();n.Bo.set(s,new ew(t)),n.Lo=n.Lo.insert(t,s),GE(n.remoteStore,new jc(Cs(vd(t.path)),s,2,Mr.T))}}function Lu(n,e,t){return hw.apply(this,arguments)}function hw(){return(hw=(0,be.Z)(function*(n,e,t){const s=Be(n),a=[],l=[],f=[];var v;s.Oo.isEmpty()||(s.Oo.forEach((v,b)=>{f.push(s.Wo(b,e,t).then(S=>{if(S){s.isPrimaryClient&&s.sharedClientState.updateQueryState(b.targetId,S.fromCache?"not-current":"current"),a.push(S);const N=kE.kn(b.targetId,S);l.push(N)}}))}),yield Promise.all(f),s.$o.Rr(a),yield(v=(0,be.Z)(function*(b,S){const N=Be(b);try{yield N.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>Me.forEach(S,Y=>Me.forEach(Y.Nn,J=>N.persistence.referenceDelegate.addReference(P,Y.targetId,J)).next(()=>Me.forEach(Y.xn,J=>N.persistence.referenceDelegate.removeReference(P,Y.targetId,J)))))}catch(P){if(!so(P))throw P;Ve("LocalStore","Failed to update sequence numbers: "+P)}for(const P of S){const Y=P.targetId;if(!P.fromCache){const J=N.Un.get(Y),$e=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);N.Un=N.Un.insert(Y,$e)}}}),function(b,S){return v.apply(this,arguments)})(s.localStore,l))})).apply(this,arguments)}function sS(n,e){return fw.apply(this,arguments)}function fw(){return(fw=(0,be.Z)(function*(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const s=yield Ay(t.localStore,e);t.currentUser=e,(a=t).Ko.forEach(f=>{f.forEach(v=>{v.reject(new Oe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Ko.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Lu(t,s.Wn)}var a})).apply(this,arguments)}function AC(n,e){const t=Be(n),s=t.Bo.get(e);if(s&&s.ko)return Yt().add(s.key);{let a=Yt();const l=t.Fo.get(e);if(!l)return a;for(const f of l){const v=t.Oo.get(f);a=a.unionWith(v.view.Ro)}return a}}function oS(n,e){return pw.apply(this,arguments)}function pw(){return(pw=(0,be.Z)(function*(n,e){const t=Be(n),s=yield Ry(t.localStore,e.query,!0),a=e.view.No(s);return t.isPrimaryClient&&DC(t,e.targetId,a.Do),a})).apply(this,arguments)}function AR(n){return SC.apply(this,arguments)}function SC(){return(SC=(0,be.Z)(function*(n){const e=Be(n);return VE(e.localStore).then(t=>Lu(e,t))})).apply(this,arguments)}function SR(n,e,t,s){return bg.apply(this,arguments)}function bg(){return(bg=(0,be.Z)(function*(n,e,t,s){const a=Be(n),l=yield function(f,v){const b=Be(f),S=Be(b.In);return b.persistence.runTransaction("Lookup mutation documents","readonly",N=>S.Xt(N,v).next(P=>P?b.Qn.Pn(N,P):Me.resolve(null)))}(a.localStore,e);var v;null!==l?("pending"===t?yield ri(a.remoteStore):"acknowledged"===t||"rejected"===t?(lw(a,e,s||null),cw(a,e),v=e,Be(Be(a.localStore).In).te(v)):st(),yield Lu(a,l)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function gw(){return(gw=(0,be.Z)(function*(n,e){const t=Be(n);if(kr(t),$y(t),!0===e&&!0!==t.Qo){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield xC(t,s.toArray());t.Qo=!0,yield kd(t.remoteStore,!0);for(const l of a)GE(t.remoteStore,l)}else if(!1===e&&!1!==t.Qo){const s=[];let a=Promise.resolve();t.Fo.forEach((l,f)=>{t.sharedClientState.isLocalQueryTarget(f)?s.push(f):a=a.then(()=>(jd(t,f),xd(t.localStore,f,!0))),Pu(t.remoteStore,f)}),yield a,yield xC(t,s),function(l){const f=Be(l);f.Bo.forEach((v,b)=>{Pu(f.remoteStore,b)}),f.Uo.us(),f.Bo=new Map,f.Lo=new vr(Xe.comparator)}(t),t.Qo=!1,yield kd(t.remoteStore,!1)}})).apply(this,arguments)}function xC(n,e,t){return mw.apply(this,arguments)}function mw(){return(mw=(0,be.Z)(function*(n,e,t){const s=Be(n),a=[],l=[];for(const f of e){let v;const b=s.Fo.get(f);if(b&&0!==b.length){v=yield Sd(s.localStore,Cs(b[0]));for(const S of b){const N=s.Oo.get(S),P=yield oS(s,N);P.snapshot&&l.push(P.snapshot)}}else{const S=yield nC(s.localStore,f);v=yield Sd(s.localStore,S),yield nw(s,RC(S),f,!1)}a.push(v)}return s.$o.Rr(l),a})).apply(this,arguments)}function RC(n){return pI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uS(n){const e=Be(n);return Be(Be(e.localStore).persistence).pn()}function NC(n,e,t,s){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,be.Z)(function*(n,e,t,s){const a=Be(n);if(a.Qo)Ve("SyncEngine","Ignoring unexpected query state notification.");else if(a.Fo.has(e))switch(t){case"current":case"not-current":{const l=yield VE(a.localStore),f=Af.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Lu(a,l,f);break}case"rejected":yield xd(a.localStore,e,!0),jd(a,e,s);break;default:st()}})).apply(this,arguments)}function cS(n,e,t){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,be.Z)(function*(n,e,t){const s=kr(n);if(s.Qo){for(const a of e){if(s.Fo.has(a)){Ve("SyncEngine","Adding an already active target "+a);continue}const l=yield nC(s.localStore,a),f=yield Sd(s.localStore,l);yield nw(s,RC(l),f.targetId,!1),GE(s.remoteStore,f)}for(const a of t)s.Fo.has(a)&&(yield xd(s.localStore,a,!1).then(()=>{Pu(s.remoteStore,a),jd(s,a)}).catch(qc))}})).apply(this,arguments)}function kr(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TR.bind(null,e),e.$o.Rr=_t.bind(null,e.eventManager),e.$o.Go=CR.bind(null,e.eventManager),e}function $y(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rS.bind(null,e),e}class Hy{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.N=Ff(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return LE(this.persistence,new eC,e.initialUser,this.N)}Jo(e){return new HA(jE.Ns,this.N)}Ho(e){return new Kc}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class MC extends Hy{constructor(e,t,s){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,be.Z)(function*(){yield t().call(s,e),yield function(n){return UE.apply(this,arguments)}(s.localStore),yield s.Zo.initialize(s,e),yield $y(s.Zo.syncEngine),yield ri(s.Zo.remoteStore),yield s.persistence.nn(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(s.localStore),Promise.resolve()))})()}Xo(e){return LE(this.persistence,new eC,e.initialUser,this.N)}Yo(e){return new QI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=PE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new JI(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,cC(),Fy(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new Kc}}class OC extends MC{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,be.Z)(function*(){yield t().call(s,e);const a=s.Zo.syncEngine;s.sharedClientState instanceof kf&&(s.sharedClientState.syncEngine={_i:SR.bind(null,a),mi:NC.bind(null,a),gi:cS.bind(null,a),pn:uS.bind(null,a),wi:AR.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.nn(function(){var l=(0,be.Z)(function*(f){yield function(n,e){return gw.apply(this,arguments)}(s.Zo.syncEngine,f),s.gcScheduler&&(f&&!s.gcScheduler.started?s.gcScheduler.start(s.localStore):f||s.gcScheduler.stop())});return function(f){return l.apply(this,arguments)}}())})()}Ho(e){const t=cC();if(!kf.bt(t))throw new Oe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=PE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Gy{initialize(e,t){var s=this;return(0,be.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>CC(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=sS.bind(null,s.syncEngine),yield kd(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KA}createDatastore(e){const t=Ff(e.databaseInfo.databaseId),s=new ky(e.databaseInfo);return new WA(e.credentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=v=>CC(this.syncEngine,v,0),f=uC.bt()?new uC:new aC,new hC(t,s,a,l,f);var t,s,a,l,f}createSyncEngine(e,t){return function(s,a,l,f,v,b,S){const N=new JA(s,a,l,f,v,b);return S&&(N.Qo=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const s=Be(t);Ve("RemoteStore","RemoteStore shutting down."),s.Wr.add(5),yield Ou(s),s.zr.shutdown(),s.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function yw(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class lS{constructor(e,t){this.nc=e,this.N=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(s=>{s&&s.wo()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,be.Z)(function*(){const t=yield e.rc();if(null===t)return null;const s=e.sc.decode(t),a=Number(s);isNaN(a)&&e.oc(`length string (${s}) is not valid number`);const l=yield e.cc(a);return new ZA(JSON.parse(l),t.length+a)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,be.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}cc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const s=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,be.Z)(function*(){const t=yield e.nc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class dS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,be.Z)(function*(l,f){const v=Be(l),b=Vc(v.N)+"/documents",S={documents:f.map(J=>sg(v.N,J))},N=yield v.Ki("BatchGetDocuments",b,S),P=new Map;N.forEach(J=>{const xe=function(n,e){return"found"in e?function(t,s){ft(!!s.found);const a=Ds(t,s.found.name),l=ze(s.found.updateTime),f=new ei({mapValue:{fields:s.found.fields}});return In.newFoundDocument(a,l,f)}(n,e):"missing"in e?function(t,s){ft(!!s.missing),ft(!!s.readTime);const a=Ds(t,s.missing),l=ze(s.readTime);return In.newNoDocument(a,l)}(n,e):st()}(v.N,J);P.set(xe.key.toString(),xe)});const Y=[];return f.forEach(J=>{const xe=P.get(J.toString());ft(!!xe),Y.push(xe)}),Y}),function(l,f){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ng(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=Xe.fromPath(a);e.mutations.push(new lE(l,e.precondition(l)))}),yield(s=(0,be.Z)(function*(a,l){const f=Be(a),v=Vc(f.N)+"/documents",b={writes:l.map(S=>ag(f.N,S))};yield f.Li("Commit",v,b)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=It.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Oe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?zn.updateTime(t):zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new Oe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zn.updateTime(t)}return zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class PC{constructor(e,t,s,a){this.asyncQueue=e,this.datastore=t,this.updateFunction=s,this.deferred=a,this.hc=5,this.ar=new Ly(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,be.Z)(function*(){const t=new dS(e.datastore),s=e.fc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.dc(l)}))}).catch(a=>{e.dc(a)})}))}fc(e){try{const t=this.updateFunction(e);return!Iu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!bI(t)}return!1}}class hS{constructor(e,t,s){var a=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=s,this.user=Qr.UNAUTHENTICATED,this.clientId=Zv.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var l=(0,be.Z)(function*(f){Ve("FirestoreClient","Received user=",f.uid),yield a.credentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(s){const a=Fu(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function fS(n,e){return _w.apply(this,arguments)}function _w(){return(_w=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,be.Z)(function*(l){s.isEqual(l)||(yield Ay(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function kC(n,e){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield FC(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>{return(l=(0,be.Z)(function*(f,v){const b=Be(f);b.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const S=Md(b);b.Wr.add(3),yield Ou(b),S&&b.Hr.set("Unknown"),yield b.remoteSyncer.handleCredentialChange(v),b.Wr.delete(3),yield fg(b)}),function(f,v){return l.apply(this,arguments)})(e.remoteStore,a);var l}),n.onlineComponents=e})).apply(this,arguments)}function FC(n){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,be.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield fS(n,new Hy)),n.offlineComponents})).apply(this,arguments)}function zy(n){return LC.apply(this,arguments)}function LC(){return(LC=(0,be.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield kC(n,new Gy)),n.onlineComponents})).apply(this,arguments)}function vw(n){return FC(n).then(e=>e.persistence)}function Ew(n){return FC(n).then(e=>e.localStore)}function Ky(n){return zy(n).then(e=>e.remoteStore)}function ww(n){return zy(n).then(e=>e.syncEngine)}function $d(n){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,be.Z)(function*(n){const e=yield zy(n),t=e.eventManager;return t.onListen=XA.bind(null,e.syncEngine),t.onUnlisten=eS.bind(null,e.syncEngine),t})).apply(this,arguments)}function VC(n,e,t={}){const s=new Jr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(a,l,f,v,b){const S=new qy({next:P=>{l.enqueueAndForget(()=>vC(a,N));const Y=P.docs.has(f);!Y&&P.fromCache?b.reject(new Oe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):Y&&P.fromCache&&v&&"server"===v.source?b.reject(new Oe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(P)},error:P=>b.reject(P)}),N=new XE(vd(f.path),S,{includeMetadataChanges:!0,fo:!0});return _g(a,N)}(yield $d(n),n.asyncQueue,e,t,s)})),s.promise}function UC(n,e,t={}){const s=new Jr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(a,l,f,v,b){const S=new qy({next:P=>{l.enqueueAndForget(()=>vC(a,N)),P.fromCache&&"server"===v.source?b.reject(new Oe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(P)},error:P=>b.reject(P)}),N=new XE(f,S,{includeMetadataChanges:!0,fo:!0});return _g(a,N)}(yield $d(n),n.asyncQueue,e,t,s)})),s.promise}class $C{constructor(e,t,s,a,l,f,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=v,this.useFetchStreams=b}}class Hd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hd&&e.projectId===this.projectId&&e.database===this.database}}const bw=new Map;function Iw(n,e,t){if(!t)throw new Oe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HC(n,e,t,s){if(!0===e&&!0===s)throw new Oe(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GC(n){if(!Xe.isDocumentKey(n))throw new Oe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qC(n){if(Xe.isDocumentKey(n))throw new Oe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Vt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yy(n);throw new Oe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function WC(n,e){if(e<=0)throw new Oe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Uf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,HC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uf({}),this._settingsFrozen=!1,e instanceof Hd?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Oe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hd(s.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uf(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new fR;switch(t.type){case"gapi":const s=t.client;return ft(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new sA(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(me.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bw.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),bw.delete(e),t.terminate())}(this),Promise.resolve()}}class gn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gn(this.firestore,e,this._key)}}class Dn{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Dn(this.firestore,e,this._query)}}class Pa extends Dn{constructor(e,t,s){super(e,t,vd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gn(this.firestore,null,new Xe(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function Dg(n,e,...t){if(n=(0,St.m9)(n),Iw("collection","path",e),n instanceof Vu){const s=Kt.fromString(e,...t);return qC(s),new Pa(n,null,s)}{if(!(n instanceof gn||n instanceof Pa))throw new Oe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Kt.fromString(e,...t));return qC(s),new Pa(n.firestore,null,s)}}function Qy(n,e,...t){if(n=(0,St.m9)(n),1===arguments.length&&(e=Zv.I()),Iw("doc","path",e),n instanceof Vu){const s=Kt.fromString(e,...t);return GC(s),new gn(n,null,new Xe(s))}{if(!(n instanceof gn||n instanceof Pa))throw new Oe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Kt.fromString(e,...t));return GC(s),new gn(n.firestore,n instanceof Pa?n.converter:null,new Xe(s))}}function wS(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),(n instanceof gn||n instanceof Pa)&&(e instanceof gn||e instanceof Pa)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Jy(n,e){return n=(0,St.m9)(n),e=(0,St.m9)(e),n instanceof Dn&&e instanceof Dn&&n.firestore===e.firestore&&Ef(n._query,e._query)&&n.converter===e.converter}class Cw{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new Ly(this,"async_queue_retry"),this.Rc=()=>{const t=Fy();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const e=Fy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=Fy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new Jr;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,be.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(t){if(!so(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(s=>{throw this.Tc=s,this.Ec=!1,_r("INTERNAL UNHANDLED ERROR: ",function(l){let f=l.message||"";return l.stack&&(f=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),f}(s)),s}).then(s=>(this.Ec=!1,s))));return this._c=t,t}enqueueAfterDelay(e,t,s){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const a=QE.createAndSchedule(this,e,t,s,l=>this.Vc(l));return this.yc.push(a),a}bc(){this.Tc&&st()}verifyOperationInProgress(){}Sc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function Xy(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class Dw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fn extends Vu{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Cw,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Aw(this),this._firestoreClient.terminate()}}function Er(n){return n._firestoreClient||Aw(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Aw(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $C(n._databaseId,l,n._persistenceKey,(v=t).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,v.useFetchStreams));var l,v;n._firestoreClient=new hS(n._credentials,n._queue,s)}function KC(n,e,t){const s=new Jr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield fS(n,t),yield kC(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function XC(n){if(n._initialized||n._terminated)throw new Oe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Xc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oi(sr.fromBase64String(e))}catch(t){throw new Oe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oi(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gd{constructor(e){this._methodName=e}}class e_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const NR=/^__.*__$/;class Tg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Au(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tf(e,this.data,t,this.fieldTransforms)}}class eD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Au(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function t_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class n_{constructor(e,t,s,a,l,f){this.settings=e,this.databaseId=t,this.N=s,this.ignoreUndefinedProperties=a,void 0===l&&this.xc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new n_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$c({path:s,Fc:!1});return a.Mc(e),a}Lc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.$c({path:s,Fc:!1});return a.xc(),a}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return xg(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(t_(this.kc)&&NR.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class tD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=s||Ff(e)}jc(e,t,s,a=!1){return new n_({kc:e,methodName:t,Kc:s,path:Xr.emptyPath(),Fc:!1,qc:a},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function qd(n){const e=n._freezeSettings(),t=Ff(n._databaseId);return new tD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r_(n,e,t,s,a,l={}){const f=n.jc(l.merge||l.mergeFields?2:0,e,t,a);Ag("Data must be an object, but it was:",f,s);const v=Ow(s,f);let b,S;if(l.merge)b=new gd(f.fieldMask),S=f.fieldTransforms;else if(l.mergeFields){const N=[];for(const P of l.mergeFields){const Y=Sg(e,P,t);if(!f.contains(Y))throw new Oe(me.INVALID_ARGUMENT,`Field '${Y}' is specified in your field mask but missing from your input data.`);kw(N,Y)||N.push(Y)}b=new gd(N),S=f.fieldTransforms.filter(P=>b.covers(P.field))}else b=null,S=f.fieldTransforms;return new Tg(new ei(v),b,S)}class Wd extends Gd{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wd}}function xw(n,e,t){return new n_({kc:3,Kc:e.settings.Kc,methodName:n._methodName,Fc:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class i_ extends Gd{_toFieldTransform(e){return new Fc(e.path,new wf)}isEqual(e){return e instanceof i_}}class s_ extends Gd{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=xw(this,e,!0),s=this.Qc.map(l=>ka(l,t)),a=new Tu(s);return new Fc(e.path,a)}isEqual(e){return this===e}}class Rw extends Gd{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=xw(this,e,!0),s=this.Qc.map(l=>ka(l,t)),a=new Ed(s);return new Fc(e.path,a)}isEqual(e){return this===e}}class MR extends Gd{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new If(e.N,rE(e.N,this.Wc));return new Fc(e.path,t)}isEqual(e){return this===e}}function o_(n,e,t,s){const a=n.jc(1,e,t);Ag("Data must be an object, but it was:",a,s);const l=[],f=ei.empty();pd(s,(b,S)=>{const N=Pw(e,b,t);S=(0,St.m9)(S);const P=a.Lc(N);if(S instanceof Wd)l.push(N);else{const Y=ka(S,P);null!=Y&&(l.push(N),f.set(N,Y))}});const v=new gd(l);return new eD(f,v,a.fieldTransforms)}function Nw(n,e,t,s,a,l){const f=n.jc(1,e,t),v=[Sg(e,s,t)],b=[a];if(l.length%2!=0)throw new Oe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Y=0;Y<l.length;Y+=2)v.push(Sg(e,l[Y])),b.push(l[Y+1]);const S=[],N=ei.empty();for(let Y=v.length-1;Y>=0;--Y)if(!kw(S,v[Y])){const J=v[Y];let xe=b[Y];xe=(0,St.m9)(xe);const $e=f.Lc(J);if(xe instanceof Wd)S.push(J);else{const Ze=ka(xe,$e);null!=Ze&&(S.push(J),N.set(J,Ze))}}const P=new gd(S);return new eD(N,P,f.fieldTransforms)}function Mw(n,e,t,s=!1){return ka(t,n.jc(s?4:3,e))}function ka(n,e){if(nD(n=(0,St.m9)(n)))return Ag("Unsupported field value:",e,n),Ow(n,e);if(n instanceof Gd)return function(t,s){if(!t_(s.kc))throw s.Uc(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Uc(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const f of t){let v=ka(f,s.Bc(l));null==v&&(v={nullValue:"NULL_VALUE"}),a.push(v),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,St.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rE(s.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=Or.fromDate(t);return{timestampValue:xf(s.N,a)}}if(t instanceof Or){const a=new Or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xf(s.N,a)}}if(t instanceof e_)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oi)return{bytesValue:gE(s.N,t._byteString)};if(t instanceof gn){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.Uc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:mE(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.Uc(`Unsupported field value: ${Yy(t)}`)}(n,e)}function Ow(n,e){const t={};return eI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,(s,a)=>{const l=ka(a,e.Oc(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function nD(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Or||n instanceof e_||n instanceof Oi||n instanceof gn||n instanceof Gd)}function Ag(n,e,t){if(!nD(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Yy(t);throw e.Uc("an object"===s?n+" a custom object":n+" "+s)}var s}function Sg(n,e,t){if((e=(0,St.m9)(e))instanceof Xc)return e._internalPath;if("string"==typeof e)return Pw(n,e);throw xg("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const DS=new RegExp("[~\\*/\\[\\]]");function Pw(n,e,t){if(e.search(DS)>=0)throw xg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xc(...e.split("."))._internalPath}catch(s){throw xg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function xg(n,e,t,s,a){const l=s&&!s.isEmpty(),f=void 0!==a;let v=`Function ${e}() called with invalid data`;t&&(v+=" (via `toFirestore()`)"),v+=". ";let b="";return(l||f)&&(b+=" (found",l&&(b+=` in field ${s}`),f&&(b+=` in document ${a}`),b+=")"),new Oe(me.INVALID_ARGUMENT,v+n+b)}function kw(n,e){return n.some(t=>t.isEqual(e))}class Bf{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TS extends Bf{data(){return super.data()}}function Rg(n,e){return"string"==typeof e?Pw(n,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}class el{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Uu extends Bf{constructor(e,t,s,a,l,f){super(e,t,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ng(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Rg("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Ng extends Uu{data(e={}){return super.data(e)}}class Bu{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new el(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ng(this._firestore,this._userDataWriter,s.key,s,new el(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new Ng(s._firestore,s._userDataWriter,f.doc.key,f.doc,new el(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>a||3!==f.type).map(f=>{const v=new Ng(s._firestore,s._userDataWriter,f.doc.key,f.doc,new el(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let b=-1,S=-1;return 0!==f.type&&(b=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),1!==f.type&&(l=l.add(f.doc),S=l.indexOf(f.doc.key)),{type:AS(f.type),doc:v,oldIndex:b,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function Fw(n,e){return n instanceof Uu&&e instanceof Uu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bu&&e instanceof Bu&&n._firestore===e._firestore&&Jy(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Lw(n){if(Du(n)&&0===n.explicitOrderBy.length)throw new Oe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jf{}function ju(n,...e){for(const t of e)n=t._apply(n);return n}class SS extends jf{constructor(e,t,s){super(),this.Gc=e,this.zc=t,this.Hc=s,this.type="where"}_apply(e){const t=qd(e.firestore),s=function(a,l,f,v,b,S,N){let P;if(b.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new Oe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on FieldPath.documentId().`);if("in"===S||"not-in"===S){FS(N,S);const J=[];for(const xe of N)J.push(kS(v,a,xe));P={arrayValue:{values:J}}}else P=kS(v,a,N)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||FS(N,S),P=Mw(f,"where",N,"in"===S||"not-in"===S);const Y=_i.create(b,S,P);return function(J,xe){if(xe.v()){const Ze=nE(J);if(null!==Ze&&!Ze.isEqual(xe.field))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ze.toString()}' and '${xe.field.toString()}'`);const Ot=tE(J);null!==Ot&&LS(0,xe.field,Ot)}const $e=function(Ze,Ot){for(const nn of Ze.filters)if(Ot.indexOf(nn.op)>=0)return nn.op;return null}(J,function(Ze){switch(Ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(xe.op));if(null!==$e)throw new Oe(me.INVALID_ARGUMENT,$e===xe.op?`Invalid query. You cannot use more than one '${xe.op.toString()}' filter.`:`Invalid query. You cannot use '${xe.op.toString()}' filters with '${$e.toString()}' filters.`)}(a,Y),Y}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Dn(e.firestore,e.converter,function(a,l){const f=a.filters.concat([l]);return new xa(a.path,a.collectionGroup,a.explicitOrderBy.slice(),f,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class RS extends jf{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new Oe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Oe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Rn(a,l);return function(v,b){if(null===tE(v)){const S=nE(v);null!==S&&LS(0,S,b.field)}}(s,f),f}(e._query,this.Gc,this.Jc);return new Dn(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new xa(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class NS extends jf{constructor(e,t,s){super(),this.type=e,this.Yc=t,this.Xc=s}_apply(e){return new Dn(e.firestore,e.converter,lA(e._query,this.Yc,this.Xc))}}class MS extends jf{constructor(e,t,s){super(),this.type=e,this.Zc=t,this.ta=s}_apply(e){const t=PS(e,this.type,this.Zc,this.ta);return new Dn(e.firestore,e.converter,(a=t,new xa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class OS extends jf{constructor(e,t,s){super(),this.type=e,this.Zc=t,this.ta=s}_apply(e){const t=PS(e,this.type,this.Zc,this.ta);return new Dn(e.firestore,e.converter,(a=t,new xa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function PS(n,e,t,s){if(t[0]=(0,St.m9)(t[0]),t[0]instanceof Bf)return function(a,l,f,v,b){if(!v)throw new Oe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const S=[];for(const N of vf(a))if(N.field.isKeyField())S.push(gf(l,v.key));else{const P=v.data.field(N.field);if(md(P))throw new Oe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+N.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const Y=N.field.canonicalString();throw new Oe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Y}' (used as the orderBy) does not exist.`)}S.push(P)}return new _f(S,b)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=qd(n.firestore);return function(l,f,v,b,S,N){const P=l.explicitOrderBy;if(S.length>P.length)throw new Oe(me.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Y=[];for(let J=0;J<S.length;J++){const xe=S[J];if(P[J].field.isKeyField()){if("string"!=typeof xe)throw new Oe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof xe}`);if(!hy(l)&&-1!==xe.indexOf("/"))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${b}() must be a plain document ID, but '${xe}' contains a slash.`);const $e=l.path.child(Kt.fromString(xe));if(!Xe.isDocumentKey($e))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${b}() must result in a valid document path, but '${$e}' is not because it contains an odd number of segments.`);const Ze=new Xe($e);Y.push(gf(f,Ze))}else{const $e=Mw(v,b,xe);Y.push($e)}}return new _f(Y,N)}(n._query,n.firestore._databaseId,a,e,t,s)}}function kS(n,e,t){if("string"==typeof(t=(0,St.m9)(t))){if(""===t)throw new Oe(me.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!hy(e)&&-1!==t.indexOf("/"))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Kt.fromString(t));if(!Xe.isDocumentKey(s))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return gf(n,new Xe(s))}if(t instanceof gn)return gf(n,t._key);throw new Oe(me.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yy(t)}.`)}function FS(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LS(n,e,t){if(!t.isEqual(e))throw new Oe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class iD{convertValue(e,t="none"){switch(kc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return or(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const s={};return pd(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new e_(or(e.latitude),or(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rI(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(yd(e));default:return null}}convertTimestamp(e){const t=Sa(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Kt.fromString(e);ft(Nf(s));const a=new Hd(s.get(1),s.get(3)),l=new Xe(s.popFirst(5));return a.isEqual(t)||_r(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Vw(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class UR extends iD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}class VS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qd(e)}set(e,t,s){this._verifyNotCommitted();const a=tl(e,this._firestore),l=Vw(a.converter,t,s),f=r_(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(f.toMutation(a._key,zn.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=tl(e,this._firestore);let f;return f="string"==typeof(t=(0,St.m9)(t))||t instanceof Xc?Nw(this._dataReader,"WriteBatch.update",l._key,t,s,a):o_(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(f.toMutation(l._key,zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tl(e,this._firestore);return this._mutations=this._mutations.concat(new ng(t._key,zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tl(n,e){if((n=(0,St.m9)(n)).firestore!==e)throw new Oe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zd extends iD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gn(this.firestore,null,t)}}function sD(n,e,t){n=Vt(n,gn);const s=Vt(n.firestore,Fn),a=Vw(n.converter,e,t);return Mg(s,[r_(qd(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,zn.none())])}function $S(n,e,t,...s){n=Vt(n,gn);const a=Vt(n.firestore,Fn),l=qd(a);let f;return f="string"==typeof(e=(0,St.m9)(e))||e instanceof Xc?Nw(l,"updateDoc",n._key,e,t,s):o_(l,"updateDoc",n._key,e),Mg(a,[f.toMutation(n._key,zn.exists(!0))])}function HS(n,...e){var t,s,a;n=(0,St.m9)(n);let l={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||Xy(e[f])||(l=e[f],f++);const v={includeMetadataChanges:l.includeMetadataChanges};if(Xy(e[f])){const P=e[f];e[f]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[f+1]=null===(s=P.error)||void 0===s?void 0:s.bind(P),e[f+2]=null===(a=P.complete)||void 0===a?void 0:a.bind(P)}let b,S,N;if(n instanceof gn)S=Vt(n.firestore,Fn),N=vd(n._key.path),b={next:P=>{e[f]&&e[f](Uw(S,n,P))},error:e[f+1],complete:e[f+2]};else{const P=Vt(n,Dn);S=Vt(P.firestore,Fn),N=P._query;const Y=new zd(S);b={next:J=>{e[f]&&e[f](new Bu(S,Y,P,J))},error:e[f+1],complete:e[f+2]},Lw(n._query)}return function(P,Y,J,xe){const $e=new qy(xe),Ze=new XE(Y,$e,J);return P.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return _g(yield $d(P),Ze)})),()=>{$e.ec(),P.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return vC(yield $d(P),Ze)}))}}(Er(S),N,v,b)}function Mg(n,e){return function(t,s){const a=new Jr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,e,t){return iw.apply(this,arguments)}(yield ww(t),s,a)})),a.promise}(Er(n),e)}function Uw(n,e,t){const s=t.docs.get(e._key),a=new zd(n);return new Uu(n,a,e._key,s,new el(t.hasPendingWrites,t.fromCache),e.converter)}class Bw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qd(e)}get(e){const t=tl(e,this._firestore),s=new UR(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return st();const l=a[0];if(l.isFoundDocument())return new Bf(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new Bf(this._firestore,s,t._key,null,t.converter);throw st()})}set(e,t,s){const a=tl(e,this._firestore),l=Vw(a.converter,t,s),f=r_(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,f),this}update(e,t,s,...a){const l=tl(e,this._firestore);let f;return f="string"==typeof(t=(0,St.m9)(t))||t instanceof Xc?Nw(this._dataReader,"Transaction.update",l._key,t,s,a):o_(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,f),this}delete(e){const t=tl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=tl(e,this._firestore),s=new zd(this._firestore);return super.get(e).then(a=>new Uu(this._firestore,s,t._key,a._document,new el(!1,!1),t.converter))}}function a_(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Og(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function $w(){if("undefined"==typeof atob)throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pf=yu.SDK_VERSION,(0,yu._registerComponent)(new zs.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),l=new Fn(a,new Jb(t.getProvider("auth-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,yu.registerVersion)(Wv,"3.2.0",n),(0,yu.registerVersion)(Wv,"3.2.0","esm2017")}();class u_{constructor(e){this._delegate=e}static fromBase64String(e){return $w(),new u_(Oi.fromBase64String(e))}static fromUint8Array(e){return Og(),new u_(Oi.fromUint8Array(e))}toBase64(){return $w(),this._delegate.toBase64()}toUint8Array(){return Og(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function cD(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(n)}class KS{enableIndexedDbPersistence(e,t){return function(n,e){XC(n=Vt(n,Fn));const t=Er(n),s=n._freezeSettings(),a=new Gy;return KC(t,a,new MC(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){XC(n=Vt(n,Fn));const e=Er(n),t=n._freezeSettings(),s=new Gy;return KC(e,s,new OC(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Oe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(s){if(!io.bt())return Promise.resolve();const a=s+"main";yield io.delete(a)}),function(s){return t.apply(this,arguments)})(PE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZS{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&iy("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(n,e,t,s={}){var a;const l=(n=Vt(n,Vu))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&iy("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let f,v;if("string"==typeof s.mockUserToken)f=s.mockUserToken,v=Qr.MOCK_USER;else{f=(0,St.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new Oe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Qr(b)}n._credentials=new iA(new rA(f,v))}}(this._delegate,e,t,s)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield vw(n),t=yield Ky(n);return e.setNetworkEnabled(!0),function(s){const a=Be(s);return a.Wr.delete(0),fg(a)}(t)}))}(Er(n=Vt(n,Fn)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield vw(n),t=yield Ky(n);return e.setNetworkEnabled(!1),(s=(0,be.Z)(function*(a){const l=Be(a);l.Wr.add(0),yield Ou(l),l.Hr.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(Er(n=Vt(n,Fn)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,HC("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,e){return Bd.apply(this,arguments)}(yield ww(e),t)})),t.promise}(Er(n=Vt(n,Fn)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new qy(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return s=yield $d(n),a=t,Be(s).so.add(a),void a.next();var s,a})),()=>{t.ec(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return s=yield $d(n),a=t,void Be(s).so.delete(a);var s,a}))}}(Er(n=Vt(n,Fn)),Xy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gf(this,Dg(this._delegate,e))}catch(t){throw os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ao(this,Qy(this._delegate,e))}catch(t){throw os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pi(this,function(n,e){if(n=Vt(n,Vu),Iw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Dn(n,null,(t=e,new xa(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const s=yield(a=n,zy(a).then(l=>l.datastore));var a;new PC(n.asyncQueue,s,e,t).run()})),t.promise}(Er(n=Vt(n,Fn)),t=>e(new Bw(n,t)))}(this._delegate,t=>e(new QS(this,t)))}batch(){return Er(this._delegate),new JS(new VS(this._delegate,e=>Mg(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Er(n=Vt(n,Fn)),s=new Dw;return function(n,e,t,s){const a=function(l,f){let v;return v="string"==typeof l?(new TextEncoder).encode(l):l,b=function(b,S){if(b instanceof Uint8Array)return yw(b,S);if(b instanceof ArrayBuffer)return yw(new Uint8Array(b),S);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(v),new lS(b,f);var b}(t,Ff(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function(n,e,t){const s=Be(n);var a;(a=(0,be.Z)(function*(l,f,v){try{const b=yield f.getMetadata();if(yield function(Y,J){const xe=Be(Y),$e=ze(J.createTime);return xe.persistence.runTransaction("hasNewerBundle","readonly",Ze=>xe.Je.getBundleMetadata(Ze,J.id)).then(Ze=>!!Ze&&Ze.createTime.compareTo($e)>=0)}(l.localStore,b))return yield f.close(),void v._completeWith((Y=b,{taskState:"Success",documentsLoaded:Y.totalDocuments,bytesLoaded:Y.totalBytes,totalDocuments:Y.totalDocuments,totalBytes:Y.totalBytes}));v._updateProgress(YA(b));const S=new DR(b,l.localStore,f.N);let N=yield f.zo();for(;N;){const Y=yield S.mo(N);Y&&v._updateProgress(Y),N=yield f.zo()}const P=yield S.complete();yield Lu(l,P.En,void 0),yield function(Y,J){const xe=Be(Y);return xe.persistence.runTransaction("Save bundle","readwrite",$e=>xe.Je.saveBundleMetadata($e,J))}(l.localStore,b),v._completeWith(P.progress)}catch(b){iy("SyncEngine",`Loading bundle failed with ${b}`),v._failWith(b)}var Y}),function(l,f,v){return a.apply(this,arguments)})(s,e,t).then(()=>{s.sharedClientState.notifyBundleLoaded()})}(yield ww(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,s){const a=Be(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Je.getNamedQuery(l,s))}(yield Ew(n),e)}))}(Er(n=Vt(n,Fn)),e).then(t=>t?new Dn(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Pi(this,t):null)}}class Kd extends iD{constructor(e){super(),this.firestore=e}convertBytes(e){return new u_(new Oi(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ao.forKey(t,this.firestore,null)}}class QS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Kd(e)}get(e){const t=jo(e);return this._delegate.get(t).then(s=>new c_(this._firestore,new Uu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=jo(e);return s?(a_("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=jo(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=jo(e);return this._delegate.delete(t),this}}class JS{constructor(e){this._delegate=e}set(e,t,s){const a=jo(e);return s?(a_("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=jo(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=jo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class $u{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Ng(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hf(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=$u.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new $u(e,new Kd(e),t),a.set(t,l)),l}}$u.INSTANCES=new WeakMap;class ao{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kd(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ao(t,new gn(t._delegate,s,new Xe(e)))}static forKey(e,t,s){return new ao(t,new gn(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Gf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gf(this.firestore,Dg(this._delegate,e))}catch(t){throw os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,St.m9)(e))instanceof gn&&wS(this._delegate,e)}set(e,t){t=a_("DocumentReference.set",t);try{return t?sD(this._delegate,e,t):sD(this._delegate,e)}catch(s){throw os(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?$S(this._delegate,e):$S(this._delegate,e,t,...s)}catch(a){throw os(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Mg(Vt(n.firestore,Fn),[new ng(n._key,zn.none())])}(this._delegate)}onSnapshot(...e){const t=XS(e),s=lD(e,a=>new c_(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return HS(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Vt(n,gn);const e=Vt(n.firestore,Fn),t=Er(e),s=new zd(e);return function(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(s=(0,be.Z)(function*(a,l,f){try{const v=yield function(b,S){const N=Be(b);return N.persistence.runTransaction("read document","readonly",P=>N.Qn.An(P,S))}(a,l);v.isFoundDocument()?f.resolve(v):v.isNoDocument()?f.resolve(null):f.reject(new Oe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(v){const b=Fu(v,`Failed to get document '${l} from cache`);f.reject(b)}}),function(a,l,f){return s.apply(this,arguments)})(yield Ew(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Uu(e,s,n._key,a,new el(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Vt(n,gn);const e=Vt(n.firestore,Fn);return VC(Er(e),n._key,{source:"server"}).then(t=>Uw(e,n,t))}(this._delegate):function(n){n=Vt(n,gn);const e=Vt(n.firestore,Fn);return VC(Er(e),n._key).then(t=>Uw(e,n,t))}(this._delegate),t.then(s=>new c_(this.firestore,new Uu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new ao(this.firestore,this._delegate.withConverter(e?$u.getInstance(this.firestore,e):null))}}function os(n,e,t){return n.message=n.message.replace(e,t),n}function XS(n){for(const e of n)if("object"==typeof e&&!cD(e))return e;return{}}function lD(n,e){var t,s;let a;return a=cD(n[0])?n[0]:cD(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class c_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ao(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fw(this._delegate,e._delegate)}}class Hf extends c_{data(e){const t=this._delegate.data(e);return function(n,e){n||st()}(void 0!==t),t}}class Pi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Kd(e)}where(e,t,s){try{return new Pi(this.firestore,ju(this._delegate,function(n,e,t){const s=e,a=Rg("where",n);return new SS(a,s,t)}(e,t,s)))}catch(a){throw os(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Pi(this.firestore,ju(this._delegate,function(n,e="asc"){const t=e,s=Rg("orderBy",n);return new RS(s,t)}(e,t)))}catch(s){throw os(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pi(this.firestore,ju(this._delegate,function(n){return WC("limit",n),new NS("limit",n,"F")}(e)))}catch(t){throw os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Pi(this.firestore,ju(this._delegate,function(n){return WC("limitToLast",n),new NS("limitToLast",n,"L")}(e)))}catch(t){throw os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pi(this.firestore,ju(this._delegate,function(...n){return new MS("startAt",n,!0)}(...e)))}catch(t){throw os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pi(this.firestore,ju(this._delegate,function(...n){return new MS("startAfter",n,!1)}(...e)))}catch(t){throw os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pi(this.firestore,ju(this._delegate,function(...n){return new OS("endBefore",n,!0)}(...e)))}catch(t){throw os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pi(this.firestore,ju(this._delegate,function(...n){return new OS("endAt",n,!1)}(...e)))}catch(t){throw os(t,"endAt()","Query.endAt()")}}isEqual(e){return Jy(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Vt(n,Dn);const e=Vt(n.firestore,Fn),t=Er(e),s=new zd(e);return function(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(s=(0,be.Z)(function*(a,l,f){try{const v=yield Ry(a,l,!0),b=new IC(l,v.Gn),S=b.bo(v.documents),N=b.applyChanges(S,!1);f.resolve(N.snapshot)}catch(v){const b=Fu(v,`Failed to execute query '${l} against cache`);f.reject(b)}}),function(a,l,f){return s.apply(this,arguments)})(yield Ew(n),e,t);var s})),t.promise}(t,n._query).then(a=>new Bu(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Vt(n,Dn);const e=Vt(n.firestore,Fn),t=Er(e),s=new zd(e);return UC(t,n._query,{source:"server"}).then(a=>new Bu(e,s,n,a))}(this._delegate):function(n){n=Vt(n,Dn);const e=Vt(n.firestore,Fn),t=Er(e),s=new zd(e);return Lw(n._query),UC(t,n._query).then(a=>new Bu(e,s,n,a))}(this._delegate),t.then(s=>new dD(this.firestore,new Bu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=XS(e),s=lD(e,a=>new dD(this.firestore,new Bu(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return HS(this._delegate,t,s)}withConverter(e){return new Pi(this.firestore,this._delegate.withConverter(e?$u.getInstance(this.firestore,e):null))}}class zR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zR(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Hf(this._firestore,s))})}isEqual(e){return Fw(this._delegate,e._delegate)}}class Gf extends Pi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ao(this.firestore,e):null}doc(e){try{return new ao(this.firestore,void 0===e?Qy(this._delegate):Qy(this._delegate,e))}catch(t){throw os(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Vt(n.firestore,Fn),s=Qy(n),a=Vw(n.converter,e);return Mg(t,[r_(qd(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,zn.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new ao(this.firestore,t))}isEqual(e){return wS(this._delegate,e._delegate)}withConverter(e){return new Gf(this.firestore,this._delegate.withConverter(e?$u.getInstance(this.firestore,e):null))}}function jo(n){return Vt(n,gn)}class Hw{constructor(...e){this._delegate=new Xc(...e)}static documentId(){return new Hw(Xr.keyField().canonicalString())}isEqual(e){return(e=(0,St.m9)(e))instanceof Xc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Zd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new i_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Zd(e)}static delete(){const e=new Wd("deleteField");return e._methodName="FieldValue.delete",new Zd(e)}static arrayUnion(...e){const t=function(...n){return new s_("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Zd(t)}static arrayRemove(...e){const t=function(...n){return new Rw("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Zd(t)}static increment(e){const t=function(n){return new MR("increment",n)}(e);return t._methodName="FieldValue.increment",new Zd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ex={Firestore:ZS,GeoPoint:e_,Timestamp:Or,Blob:u_,Transaction:QS,WriteBatch:JS,DocumentReference:ao,DocumentSnapshot:c_,Query:Pi,QueryDocumentSnapshot:Hf,QuerySnapshot:dD,CollectionReference:Gf,FieldPath:Hw,FieldValue:Zd,setLogLevel:function(n){!function(n){hd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new zs.wA("firestore-compat",t=>((e,t)=>new ZS(e,t,new KS))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},ex)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.5")}(rb.Z);var Ss=V(6682),Pg=V(309),qw=V(7771),nx=V(8858);class rx extends Gr.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Ww(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,l=s.length;let f;if(this.closed)throw new Ao.N;if(this.isStopped||this.hasError?f=I.w.EMPTY:(this.observers.push(e),f=new nx.W(this,e)),a&&e.add(e=new Pg.ht(e,a)),t)for(let v=0;v<l&&!e.closed;v++)e.next(s[v]);else for(let v=0;v<l&&!e.closed;v++)e.next(s[v].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),f}_getNow(){return(this.scheduler||qw.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,a=this._events,l=a.length;let f=0;for(;f<l&&!(e-a[f].time<s);)f++;return l>t&&(f=Math.max(f,l-t)),f>0&&a.splice(0,f),a}}class Ww{constructor(e,t){this.time=e,this.value=t}}function zw(n,e,t){let s;return s=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let a,f,l=0,v=!1,b=!1;return function(N){let P;l++,!a||v?(v=!1,a=new rx(n,e,s),P=a.subscribe(this),f=N.subscribe({next(Y){a.next(Y)},error(Y){v=!0,a.error(Y)},complete(){b=!0,f=void 0,a.complete()}}),b&&(f=void 0)):P=a.subscribe(this),this.add(()=>{l--,P.unsubscribe(),P=void 0,f&&!b&&t&&0===l&&(f.unsubscribe(),f=void 0,a=void 0)})}}(s))}function fD(n,e){return e?tr(()=>n,e):tr(()=>n)}var l_=V(3101);V(2329);const Zw=new Map,ox={activated:!1,tokenObservers:[]},ax={initialized:!1,enabled:!1};function wi(n){return Zw.get(n)||ox}function Fa(n,e){Zw.set(n,e)}function Yw(){return ax}class vD{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new St.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new St.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const as=new St.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function wD(n){if(!wi(n).activated)throw as.create("use-before-activation",{appName:n.name})}function cx(n,e){return bD.apply(this,arguments)}function bD(){return(bD=(0,be.Z)(function*({url:n,body:e},t){const s={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});a&&(s["X-Firebase-Client"]=a.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:s};let f,v;try{f=yield fetch(n,l)}catch(P){throw as.create("fetch-network-error",{originalErrorMessage:P.message})}if(200!==f.status)throw as.create("fetch-status-error",{httpStatus:f.status});try{v=yield f.json()}catch(P){throw as.create("fetch-parse-error",{originalErrorMessage:P.message})}const b=v.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw as.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(b[1]),N=Date.now();return{token:v.attestationToken,expireTimeMillis:N+S,issuedAtTimeMillis:N}})).apply(this,arguments)}function CD(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Fg="firebase-app-check-store";let Lg=null;function hx(){return Lg||(Lg=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=s=>{n(s.target.result)},t.onerror=s=>{var a;e(as.create("storage-open",{originalErrorMessage:null===(a=s.target.error)||void 0===a?void 0:a.message}))},t.onupgradeneeded=s=>{const a=s.target.result;switch(s.oldVersion){case 0:a.createObjectStore(Fg,{keyPath:"compositeKey"})}}}catch(t){e(as.create("storage-open",{originalErrorMessage:t.message}))}}),Lg)}function f_(){return(f_=(0,be.Z)(function*(n,e){const s=(yield hx()).transaction(Fg,"readwrite"),l=s.objectStore(Fg).put({compositeKey:n,value:e});return new Promise((f,v)=>{l.onsuccess=b=>{f()},s.onerror=b=>{var S;v(as.create("storage-set",{originalErrorMessage:null===(S=b.target.error)||void 0===S?void 0:S.message}))}})})).apply(this,arguments)}const p_=new Ia.Yd("@firebase/app-check");function nl(n,e){return(0,St.hl)()?function(n,e){return function(n,e){return f_.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{p_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function m_(){return Yw().enabled}function AD(){return qf.apply(this,arguments)}function qf(){return(qf=(0,be.Z)(function*(){const n=Yw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const n0={error:"UNKNOWN_ERROR"};function SD(n){return St.US.encodeString(JSON.stringify(n),!1)}function Zn(n){return xD.apply(this,arguments)}function xD(){return(xD=(0,be.Z)(function*(n,e=!1){const t=n.app;wD(t);const s=wi(t);let l,f,a=s.token;if(!a){const v=yield s.cachedTokenPromise;v&&jg(v)&&(a=v,Fa(t,Object.assign(Object.assign({},s),{token:a})),Bg(t,{token:a.token}))}if(!e&&a&&jg(a))return{token:a.token};if(m_()){const v=yield cx(CD(t,yield AD()),n.platformLoggerProvider);return yield nl(t,v),Fa(t,Object.assign(Object.assign({},s),{token:v})),{token:v.token}}try{a=yield s.provider.getToken()}catch(v){p_.error(v),l=v}return a?(f={token:a.token},Fa(t,Object.assign(Object.assign({},s),{token:a})),yield nl(t,a)):f=rN(l),Bg(t,f),f})).apply(this,arguments)}function r0(n,e){const t=wi(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Fa(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function Bg(n,e){const t=wi(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function jg(n){return n.expireTimeMillis-Date.now()>0}function rN(n){return{token:SD(n0),error:n}}class iN{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=wi(this.app);for(const t of e)r0(this.app,t.next);return Promise.resolve()}}const MD="app-check-internal";(0,yu._registerComponent)(new zs.wA("app-check",n=>function(n,e){return new iN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MD).initialize()})),(0,yu._registerComponent)(new zs.wA(MD,n=>function(n){return{getToken:e=>Zn(n,e),addTokenListener:e=>function(n,e,t,s){const{app:a}=n,l=wi(a),f={next:t,error:s,type:e},v=Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,f]});if(!v.tokenRefresher){const b=function(n){const{app:e}=n;return new vD((0,be.Z)(function*(){let s;if(s=wi(e).token?yield Zn(n,!0):yield Zn(n),s.error)throw s.error}),()=>!0,()=>{const t=wi(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n);v.tokenRefresher=b}if(!v.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&v.tokenRefresher.start(),l.token&&jg(l.token)){const b=l.token;Promise.resolve().then(()=>t({token:b.token})).catch(()=>{})}else null==l.token&&l.cachedTokenPromise.then(b=>{b&&jg(b)&&t({token:b.token})}).catch(()=>{});Fa(a,v)}(n,"INTERNAL",e),removeTokenListener:e=>r0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,yu.registerVersion)("@firebase/app-check","0.4.2");class a0{constructor(){return(0,gi.vb)("app-check")}}"undefined"!=typeof window&&window;const FD=new m.OlP("angularfire2.auth.use-emulator"),uo=new m.OlP("angularfire2.auth.settings"),Rx=new m.OlP("angularfire2.auth.tenant-id"),l0=new m.OlP("angularfire2.auth.langugage-code"),LD=new m.OlP("angularfire2.auth.use-device-language"),d0=new m.OlP("angularfire.auth.persistence"),h0=(n,e,t,s,a,l,f,v)=>(0,bn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),s&&(b.tenantId=s),b.languageCode=a,l&&b.useDeviceLanguage(),f)for(const[S,N]of Object.entries(f))b.settings[S]=N;return v&&b.setPersistence(v),b},[t,s,a,l,f,v]);let __=(()=>{class n{constructor(t,s,a,l,f,v,b,S,N,P,Y,J){const xe=new Gr.xQ,$e=(0,rt.of)(void 0).pipe((0,Pg.QV)(f.outsideAngular),tr(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6096)))),(0,vt.U)(()=>(0,bn.on)(t,l,s)),(0,vt.U)(Ze=>h0(Ze,l,v,S,N,P,b,Y)),zw({bufferSize:1,refCount:!1}));if(_o(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,rt.of)(null);else{$e.pipe(Es()).subscribe();const Ot=$e.pipe(tr(Ut=>Ut.getRedirectResult().then(ur=>ur,()=>null)),gi.iC,zw({bufferSize:1,refCount:!1})),nn=$e.pipe(tr(Ut=>new qr.y(ur=>({unsubscribe:l.runOutsideAngular(()=>Ut.onAuthStateChanged(Ba=>ur.next(Ba),Ba=>ur.error(Ba),()=>ur.complete()))})))),Nn=$e.pipe(tr(Ut=>new qr.y(ur=>({unsubscribe:l.runOutsideAngular(()=>Ut.onIdTokenChanged(Ba=>ur.next(Ba),Ba=>ur.error(Ba),()=>ur.complete()))}))));this.authState=Ot.pipe(fD(nn),(0,l_.R)(f.outsideAngular),(0,Pg.QV)(f.insideAngular)),this.user=Ot.pipe(fD(Nn),(0,l_.R)(f.outsideAngular),(0,Pg.QV)(f.insideAngular)),this.idToken=this.user.pipe(tr(Ut=>Ut?(0,un.D)(Ut.getIdToken()):(0,rt.of)(null))),this.idTokenResult=this.user.pipe(tr(Ut=>Ut?(0,un.D)(Ut.getIdTokenResult()):(0,rt.of)(null))),this.credential=(0,Ss.T)(Ot,xe,this.authState.pipe(Ri(Ut=>!Ut))).pipe((0,vt.U)(Ut=>(null==Ut?void 0:Ut.user)?Ut:null),(0,l_.R)(f.outsideAngular),(0,Pg.QV)(f.insideAngular))}return(0,bn.pX)(this,$e,l,{spy:{apply:(Ze,Ot,nn)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&nn.then(Nn=>xe.next(Nn))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bn.Dh),m.LFG(bn.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(gi.HU),m.LFG(FD,8),m.LFG(uo,8),m.LFG(Rx,8),m.LFG(l0,8),m.LFG(LD,8),m.LFG(d0,8),m.LFG(a0,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function v_(n,e){return function(n,e=eb.z){return new qr.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function Wf(n,e){return v_(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function $g(n,e){return Wf(n,e).pipe(cu(void 0),sv(),(0,vt.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((f,v)=>{const b=a.find(N=>N.doc.ref.isEqual(f.ref)),S=null==t?void 0:t.payload.docs.find(N=>N.ref.isEqual(f.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(f.metadata)||!b&&S&&JSON.stringify(S.metadata)===JSON.stringify(f.metadata)||l.push({type:"modified",payload:{oldIndex:v,newIndex:v,type:"modified",doc:f}})}),l}))}function p0(n,e,t){return $g(n,t).pipe(pc((s,a)=>function(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return g0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return g0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return g0(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),t=>t.lift(new nb(void 0,void 0)),(0,vt.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function g0(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function BD(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class jD{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=$g(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(cu(void 0),sv(),Ri(([s,a])=>a.length>0||!s),(0,vt.U)(([s,a])=>a),gi.iC)}auditTrail(e){return this.stateChanges(e).pipe(pc((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=BD(e);return p0(this.query,t,this.afs.schedulers.outsideAngular).pipe(gi.iC)}valueChanges(e={}){return Wf(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),gi.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(gi.iC)}add(e){return this.ref.add(e)}doc(e){return new $D(this.ref.doc(e),this.afs)}}class $D{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=y0(s,t);return new jD(a,l,this.afs)}snapshotChanges(){return function(n,e){return v_(n,e).pipe(cu(void 0),sv(),(0,vt.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(gi.iC)}}class m0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$g(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),Ri(t=>t.length>0),gi.iC):$g(this.query,this.afs.schedulers.outsideAngular).pipe(gi.iC)}auditTrail(e){return this.stateChanges(e).pipe(pc((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=BD(e);return p0(this.query,t,this.afs.schedulers.outsideAngular).pipe(gi.iC)}valueChanges(e={}){return Wf(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),gi.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(gi.iC)}}const Mx=new m.OlP("angularfire2.enableFirestorePersistence"),ki=new m.OlP("angularfire2.firestore.persistenceSettings"),Hg=new m.OlP("angularfire2.firestore.settings"),w_=new m.OlP("angularfire2.firestore.use-emulator");function y0(n,e=(t=>t)){return{query:e(n),ref:n}}let b_=(()=>{class n{constructor(t,s,a,l,f,v,b,S,N,P,Y,J,xe,$e,Ze,Ot,nn){this.schedulers=b;const Nn=(0,bn.on)(t,v,s),Ut=N;P&&h0(Nn,v,Y,xe,$e,Ze,J,Ot),[this.firestore,this.persistenceEnabled$]=(0,bn.cc)(`${Nn.name}.firestore`,"AngularFirestore",Nn.name,()=>{const ur=v.runOutsideAngular(()=>Nn.firestore());if(l&&ur.settings(l),Ut&&ur.useEmulator(...Ut),a&&!_o(f)){const Ba=()=>{try{return(0,un.D)(ur.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(MM){return"undefined"!=typeof console&&console.warn(MM),(0,rt.of)(!1)}};return[ur,v.runOutsideAngular(Ba)]}return[ur,(0,rt.of)(!1)]},[l,Ut,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:f}=y0(a,s),v=this.schedulers.ngZone.run(()=>l);return new jD(v,f,this)}collectionGroup(t,s){const a=s||(f=>f),l=this.firestore.collectionGroup(t);return new m0(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new $D(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bn.Dh),m.LFG(bn.xv,8),m.LFG(Mx,8),m.LFG(Hg,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(gi.HU),m.LFG(ki,8),m.LFG(w_,8),m.LFG(__,8),m.LFG(FD,8),m.LFG(uo,8),m.LFG(Rx,8),m.LFG(l0,8),m.LFG(LD,8),m.LFG(d0,8),m.LFG(a0,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_0=(()=>{class n{constructor(t,s){this.afs=t,this.auth=s,this.chats=[]}obtenerCollection(){return this.itemsCollection=this.afs.collection("chats",t=>t.orderBy("fecha","desc").limit(15)),this.itemsCollection.valueChanges().pipe((0,vt.U)(t=>{this.chats=[];const s=t;for(let a of s)this.chats.unshift(a)}))}agregarMensaje(t){return t.fecha=(new Date).getTime(),this.itemsCollection.add(t)}login(){this.auth.signInWithPopup(new IT.Z.auth.FacebookAuthProvider)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(b_),m.LFG(__))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I_=(()=>{class n{constructor(t){this.firechat=t}ngOnInit(){}ingresar(t){this.firechat.login()}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(_0))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"row"],[1,"col","md-12","text","center"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,s){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"p"),m._uU(3," Ingrese al chat con su cuenta favorita "),m.qZA(),m.TgZ(4,"button",2),m.NdJ("click",function(){return s.ingresar("google")}),m._uU(5," Google "),m.qZA(),m.TgZ(6,"button",3),m.NdJ("click",function(){return s.ingresar("twitter")}),m._uU(7," Twitter "),m.qZA(),m.qZA(),m.qZA())},styles:[""]}),n})();var Ox=V(1555);function C_(n,e){return new qr.y(t=>{const s=n.length;if(0===s)return void t.complete();const a=new Array(s);let l=0,f=0;for(let v=0;v<s;v++){const b=(0,un.D)(n[v]);let S=!1;t.add(b.subscribe({next:N=>{S||(S=!0,f++),a[v]=N},error:N=>t.error(N),complete:()=>{l++,(l===s||!S)&&(f===s&&t.next(e?e.reduce((N,P,Y)=>(N[P]=a[Y],N),{}):a),t.complete())}}))}})}let GD=(()=>{class n{constructor(t,s){this._renderer=t,this._elementRef=s,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(t,s){this._renderer.setProperty(this._elementRef.nativeElement,t,s)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),rl=(()=>{class n extends GD{}return n.\u0275fac=function(){let e;return function(s){return(e||(e=m.n5z(n)))(s||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Va=new m.OlP("NgValueAccessor"),il={provide:Va,useExisting:(0,m.Gpc)(()=>D_),multi:!0},v0=new m.OlP("CompositionEventMode");let D_=(()=>{class n extends GD{constructor(t,s,a){super(t,s),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(v0,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,s){1&t&&m.NdJ("input",function(l){return s._handleInput(l.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(l){return s._compositionEnd(l.target.value)})},features:[m._Bn([il]),m.qOj]}),n})();const Lr=new m.OlP("NgValidators"),ol=new m.OlP("NgAsyncValidators");function QD(n){return null!=n}function JD(n){const e=(0,m.QGY)(n)?(0,un.D)(n):n;return(0,m.CqO)(e),e}function E0(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function w0(n,e){return e.map(t=>t(n))}function b0(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function I0(n){return null!=n?function(n){if(!n)return null;const e=n.filter(QD);return 0==e.length?null:function(t){return E0(w0(t,e))}}(b0(n)):null}function A_(n){return null!=n?function(n){if(!n)return null;const e=n.filter(QD);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,au.k)(e))return C_(e,null);if((0,Ox.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return C_(t.map(s=>e[s]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return C_(n=1===n.length&&(0,au.k)(n[0])?n[0]:n,null).pipe((0,vt.U)(t=>e(...t)))}return C_(n,null)}(w0(t,e).map(JD)).pipe((0,vt.U)(E0))}}(b0(n)):null}function ul(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function C0(n){return n?Array.isArray(n)?n:[n]:[]}function D0(n,e){return Array.isArray(n)?n.includes(e):n===e}function Lx(n,e){const t=C0(e);return C0(n).forEach(a=>{D0(t,a)||t.push(a)}),t}function Vx(n,e){return C0(e).filter(t=>!D0(n,t))}let Ux=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=I0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=A_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,s){return!!this.control&&this.control.hasError(t,s)}getError(t,s){return this.control?this.control.getError(t,s):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n}),n})(),Fi=(()=>{class n extends Ux{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=m.n5z(n)))(s||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();class cl extends Ux{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let jx=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,s,a;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(a=null===(s=this._cd)||void 0===s?void 0:s.control)||void 0===a?void 0:a[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(cl,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,s){2&t&&m.ekj("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[m.qOj]}),n})();function C(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ul(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const s=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ul(s,e.asyncValidator)):"function"==typeof s&&n.setAsyncValidators([s]);const a=()=>n.updateValueAndValidity();R(e._rawValidators,a),R(e._rawAsyncValidators,a)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ke(n,e)})}(n,e),function(n,e){const t=(s,a)=>{e.valueAccessor.writeValue(s),a&&e.viewToModelUpdate(s)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ke(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=s=>{e.valueAccessor.setDisabledState(s)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function R(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ke(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Hu(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Xd="VALID",Kf="INVALID",dl="PENDING",eh="DISABLED";function Hx(n){return(qx(n)?n.validators:n)||null}function yN(n){return Array.isArray(n)?I0(n):n||null}function Gx(n,e){return(qx(e)?e.asyncValidators:n)||null}function _N(n){return Array.isArray(n)?A_(n):n||null}function qx(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Wx{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=yN(this._rawValidators),this._composedAsyncValidatorFn=_N(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xd}get invalid(){return this.status===Kf}get pending(){return this.status==dl}get disabled(){return this.status===eh}get enabled(){return this.status!==eh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=yN(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=_N(e)}addValidators(e){this.setValidators(Lx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Lx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Vx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Vx(e,this._rawAsyncValidators))}hasValidator(e){return D0(this._rawValidators,e)}hasAsyncValidator(e){return D0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=eh,this.errors=null,this._forEachChild(s=>{s.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Xd,this._forEachChild(s=>{s.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xd||this.status===dl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eh:Xd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dl,this._hasOwnPendingAsyncValidator=!0;const t=JD(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let s=n;return e.forEach(a=>{s=s instanceof zx?s.controls.hasOwnProperty(a)?s.controls[a]:null:s instanceof QN&&s.at(a)||null}),s}(this,e)}getError(e,t){const s=t?this.get(t):this;return s&&s.errors?s.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?eh:this.errors?Kf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dl)?dl:this._anyControlsHaveStatus(Kf)?Kf:Xd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qx(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class sT extends Wx{constructor(e=null,t,s){super(Hx(t),Gx(s,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Hu(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Hu(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class zx extends Wx{constructor(e,t,s){super(Hx(t),Gx(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,s={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((s,a)=>{s.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,s)=>(e[s]=t instanceof sT?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,s)=>!!s._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const s=this.controls[t];s&&e(s,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const s=this.controls[t];if(this.contains(t)&&e(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,s)=>((t.enabled||this.disabled)&&(e[s]=t.value),e))}_reduceChildren(e,t){let s=e;return this._forEachChild((a,l)=>{s=t(s,a,l)}),s}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,s)=>{if(void 0===e[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class QN extends Wx{constructor(e,t,s){super(Hx(t),Gx(s,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,s={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,s={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((s,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((s,a)=>{this.at(a)&&this.at(a).patchValue(s,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((s,a)=>{s.reset(e[a],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof sT?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,s)=>!!s._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,s)=>{e(t,s)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,s)=>{if(void 0===e[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const eM={provide:cl,useExisting:(0,m.Gpc)(()=>Zx)},wN=(()=>Promise.resolve(null))();let Zx=(()=>{class n extends cl{constructor(t,s,a,l){super(),this.control=new sT,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(s),this._setAsyncValidators(a),this.valueAccessor=function(n,e){if(!e)return null;let t,s,a;return Array.isArray(e),e.forEach(l=>{l.constructor===D_?t=l:function(n){return Object.getPrototypeOf(n.constructor)===rl}(l)?s=l:a=l}),a||s||t||null}(0,l)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){wN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const s=t.isDisabled.currentValue,a=""===s||s&&"false"!==s;wN.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Fi,9),m.Y36(Lr,10),m.Y36(ol,10),m.Y36(Va,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([eM]),m.qOj,m.TTD]}),n})(),IN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),BN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[IN]]}),n})(),DM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[BN]}),n})();const TM=function(n){return{"text-end":n}},AM=function(n,e){return{"bg-dark":n,"bg-danger":e}};function SM(n,e){if(1&n&&(m.TgZ(0,"div",8),m.TgZ(1,"span",9),m._uU(2),m.qZA(),m.TgZ(3,"p"),m._uU(4),m.qZA(),m.qZA()),2&n){const t=e.$implicit,s=m.oxw();m.Q6J("ngClass",m.VKq(4,TM,s.data.nombre==t.nombre)),m.xp6(1),m.Q6J("ngClass",m.WLB(6,AM,"jesus"==t.nombre,"mueguis"==t.nombre)),m.xp6(1),m.Oqu(t.nombre),m.xp6(2),m.Oqu(t.mensaje)}}let xM=(()=>{class n{constructor(t){this.firechat=t,this.data={mensaje:"",nombre:""}}ngOnInit(){this.elemento=document.getElementById("app-mensajes")}usuario(t){this.data.nombre=t,this.firechat.obtenerCollection().subscribe(()=>{setTimeout(()=>{this.elemento.scrollTop=this.elemento.scrollHeight},20)})}enviarMensaje(){var t;if(0!=this.data.mensaje.length){if(0==(null===(t=this.data.nombre)||void 0===t?void 0:t.length))return void alert("escogueee un usuario xd");console.log(this.data),this.firechat.agregarMensaje(this.data).then(()=>this.data.mensaje="").catch(()=>console.error("Error"))}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(_0))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-chat"]],decls:10,vars:4,consts:[[1,"row","mb-3"],[1,"col-auto","ms-auto"],[1,"btn","btn-danger",3,"disabled","click"],[1,"col-auto"],[1,"btn","btn-dark",3,"disabled","click"],["id","app-mensajes",1,"app-mensajes"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text ","name","mensaje ","placeholder","Escribir mensaje... ",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge",3,"ngClass"]],template:function(t,s){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m.TgZ(2,"button",2),m.NdJ("click",function(){return s.usuario("mueguis")}),m._uU(3,"Mueguis"),m.qZA(),m.qZA(),m.TgZ(4,"div",3),m.TgZ(5,"button",4),m.NdJ("click",function(){return s.usuario("jesus")}),m._uU(6,"Jesus"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"div",5),m.YNc(8,SM,5,9,"div",6),m.qZA(),m.TgZ(9,"input",7),m.NdJ("ngModelChange",function(l){return s.data.mensaje=l})("keyup.enter",function(){return s.enviarMensaje()}),m.qZA()),2&t&&(m.xp6(2),m.Q6J("disabled","jesus"==s.data.nombre),m.xp6(3),m.Q6J("disabled","mueguis"==s.data.nombre),m.xp6(3),m.Q6J("ngForOf",s.firechat.chats),m.xp6(1),m.Q6J("ngModel",s.data.mensaje))},directives:[Di,D_,jx,Zx,Ha],styles:[""]}),n})(),RM=(()=>{class n{constructor(){this.title="fireChat"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"container","main-container"],[1,"display-4"],[1,"row","justify-content-center"],[1,"chat-window","mt-4"]],template:function(t,s){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"h1",1),m._uU(2,"FireChat"),m.qZA(),m.TgZ(3,"div",2),m._UZ(4,"app-login"),m.TgZ(5,"div",3),m._UZ(6,"app-chat"),m.qZA(),m.qZA(),m.qZA())},directives:[I_,xM],styles:[""]}),n})(),NM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[RM]}),n.\u0275inj=m.cJS({providers:[],imports:[[eu,bT,DM,bn.hO.initializeApp(Al_firebase)]]}),n})();(0,m.G48)(),Tl().bootstrapModule(NM).catch(n=>console.error(n))},4762:(et,Te,V)=>{"use strict";function ce(ne,oe){var fe={};for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&oe.indexOf(ue)<0&&(fe[ue]=ne[ue]);if(null!=ne&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(ue=Object.getOwnPropertySymbols(ne);Pe<ue.length;Pe++)oe.indexOf(ue[Pe])<0&&Object.prototype.propertyIsEnumerable.call(ne,ue[Pe])&&(fe[ue[Pe]]=ne[ue[Pe]])}return fe}function le(ne,oe,fe,ue){return new(fe||(fe=Promise))(function(ge,it){function Bt(Gt){try{mt(ue.next(Gt))}catch(On){it(On)}}function Mn(Gt){try{mt(ue.throw(Gt))}catch(On){it(On)}}function mt(Gt){Gt.done?ge(Gt.value):function(ge){return ge instanceof fe?ge:new fe(function(it){it(ge)})}(Gt.value).then(Bt,Mn)}mt((ue=ue.apply(ne,oe||[])).next())})}function W(ne,oe){var ue,Pe,ge,it,fe={label:0,sent:function(){if(1&ge[0])throw ge[1];return ge[1]},trys:[],ops:[]};return it={next:Bt(0),throw:Bt(1),return:Bt(2)},"function"==typeof Symbol&&(it[Symbol.iterator]=function(){return this}),it;function Bt(mt){return function(Gt){return function(mt){if(ue)throw new TypeError("Generator is already executing.");for(;fe;)try{if(ue=1,Pe&&(ge=2&mt[0]?Pe.return:mt[0]?Pe.throw||((ge=Pe.return)&&ge.call(Pe),0):Pe.next)&&!(ge=ge.call(Pe,mt[1])).done)return ge;switch(Pe=0,ge&&(mt=[2&mt[0],ge.value]),mt[0]){case 0:case 1:ge=mt;break;case 4:return fe.label++,{value:mt[1],done:!1};case 5:fe.label++,Pe=mt[1],mt=[0];continue;case 7:mt=fe.ops.pop(),fe.trys.pop();continue;default:if(!(ge=(ge=fe.trys).length>0&&ge[ge.length-1])&&(6===mt[0]||2===mt[0])){fe=0;continue}if(3===mt[0]&&(!ge||mt[1]>ge[0]&&mt[1]<ge[3])){fe.label=mt[1];break}if(6===mt[0]&&fe.label<ge[1]){fe.label=ge[1],ge=mt;break}if(ge&&fe.label<ge[2]){fe.label=ge[2],fe.ops.push(mt);break}ge[2]&&fe.ops.pop(),fe.trys.pop();continue}mt=oe.call(ne,fe)}catch(Gt){mt=[6,Gt],Pe=0}finally{ue=ge=0}if(5&mt[0])throw mt[1];return{value:mt[0]?mt[1]:void 0,done:!0}}([mt,Gt])}}}function Q(ne){var oe="function"==typeof Symbol&&Symbol.iterator,fe=oe&&ne[oe],ue=0;if(fe)return fe.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&ue>=ne.length&&(ne=void 0),{value:ne&&ne[ue++],done:!ne}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(ne,oe){var fe="function"==typeof Symbol&&ne[Symbol.iterator];if(!fe)return ne;var Pe,it,ue=fe.call(ne),ge=[];try{for(;(void 0===oe||oe-- >0)&&!(Pe=ue.next()).done;)ge.push(Pe.value)}catch(Bt){it={error:Bt}}finally{try{Pe&&!Pe.done&&(fe=ue.return)&&fe.call(ue)}finally{if(it)throw it.error}}return ge}function de(ne,oe,fe){if(fe||2===arguments.length)for(var ge,ue=0,Pe=oe.length;ue<Pe;ue++)(ge||!(ue in oe))&&(ge||(ge=Array.prototype.slice.call(oe,0,ue)),ge[ue]=oe[ue]);return ne.concat(ge||Array.prototype.slice.call(oe))}V.d(Te,{_T:()=>ce,mG:()=>le,Jh:()=>W,XA:()=>Q,CR:()=>K,ev:()=>de})},8239:(et,Te,V)=>{"use strict";function m(F,ce,te,ie,Ee,le,W){try{var k=F[le](W),L=k.value}catch(Q){return void te(Q)}k.done?ce(L):Promise.resolve(L).then(ie,Ee)}function ee(F){return function(){var ce=this,te=arguments;return new Promise(function(ie,Ee){var le=F.apply(ce,te);function W(L){m(le,ie,Ee,W,k,"next",L)}function k(L){m(le,ie,Ee,W,k,"throw",L)}W(void 0)})}}V.d(Te,{Z:()=>ee})}},et=>{et(et.s=9486)}]);